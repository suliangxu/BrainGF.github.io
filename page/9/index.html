<!DOCTYPE html>



  


<html class="theme-next pisces use-motion" lang>
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Hexo, NexT">










<meta property="og:type" content="website">
<meta property="og:title" content="Hexo">
<meta property="og:url" content="http://yoursite.com/page/9/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:locale" content="default">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Hexo">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/page/9/">





  <title>Hexo</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="default">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Hexo</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br>
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br>
            
            Tags
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br>
            
            Categories
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>
            
            Archives
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/08/03/python全栈/第02部分：并发编程+数据库+前端/并发编程/进程（一）/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="John Doe">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/08/03/python全栈/第02部分：并发编程+数据库+前端/并发编程/进程（一）/" itemprop="url">进程（一）</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-08-03T01:27:51+08:00">
                2019-08-03
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/python全栈-02部分-并发编程/" itemprop="url" rel="index">
                    <span itemprop="name">python全栈 -02部分 -并发编程</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>[TOC]</p>
<h2 id="（一）理论知识"><a href="#（一）理论知识" class="headerlink" title="（一）理论知识"></a>（一）理论知识</h2><h3 id="一、操作系统背景知识"><a href="#一、操作系统背景知识" class="headerlink" title="一、操作系统背景知识"></a>一、操作系统背景知识</h3><p>​        <strong>顾名思义，进程即正在执行的一个过程。进程是对正在运行程序的一个抽象。</strong></p>
<p>​        <strong>进程的概念起源于操作系统，是操作系统最核心的概念，也是操作系统提供的最古老也是最重要的抽象概念之一。操作系统的其他所有内容都是围绕进程的概念展开的。</strong></p>
<p>​        <strong>所以想要真正了解进程，必须事先了解操作系统，点击进入</strong>    </p>
<p>PS：即使可以利用的cpu只有一个（早期的计算机确实如此），也能保证支持（伪）并发的能力。将一个单独的cpu变成多个虚拟的cpu（多道技术：时间多路复用和空间多路复用+硬件上支持隔离），没有进程的抽象，现代计算机将不复存在。</p>
<p><strong>必备的理论基础：</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">#一 操作系统的作用：</span><br><span class="line">    1：隐藏丑陋复杂的硬件接口，提供良好的抽象接口</span><br><span class="line">    2：管理、调度进程，并且将多个进程对硬件的竞争变得有序</span><br><span class="line"></span><br><span class="line">#二 多道技术：</span><br><span class="line">    1.产生背景：针对单核，实现并发</span><br><span class="line">    ps：</span><br><span class="line">    现在的主机一般是多核，那么每个核都会利用多道技术</span><br><span class="line">    有4个cpu，运行于cpu1的某个程序遇到io阻塞，会等到io结束再重新调度，会被调度到4个</span><br><span class="line">    cpu中的任意一个，具体由操作系统调度算法决定。</span><br><span class="line">    </span><br><span class="line">    2.空间上的复用：如内存中同时有多道程序</span><br><span class="line">    3.时间上的复用：复用一个cpu的时间片</span><br><span class="line">       强调：遇到io切，占用cpu时间过长也切，核心在于切之前将进程的状态保存下来，这样</span><br><span class="line">            才能保证下次切换回来时，能基于上次切走的位置继续运行</span><br></pre></td></tr></table></figure>

<h3 id="二、什么是进程"><a href="#二、什么是进程" class="headerlink" title="二、什么是进程"></a>二、什么是进程</h3><p>​        <strong>进程（Process）</strong>是计算机中的程序关于某数据集合上的一次运行活动，是系统进行资源分配和调度的基本单位，是<a href="https://baike.baidu.com/item/操作系统" target="_blank" rel="noopener">操作系统</a>结构的基础。在早期面向进程设计的计算机结构中，进程是程序的基本执行实体；在当代面向线程设计的计算机结构中，进程是线程的容器。程序是指令、数据及其组织形式的描述，进程是程序的实体。</p>
<p>​        <strong>狭义定义：</strong>进程是正在运行的程序的实例（an instance of a computer program that is being executed）。</p>
<p>​        <strong>广义定义：</strong>进程是一个具有一定独立功能的程序关于某个数据集合的一次运行活动。它是<a href="https://baike.baidu.com/item/操作系统/192" target="_blank" rel="noopener">操作系统</a>动态执行的<a href="https://baike.baidu.com/item/基本单元" target="_blank" rel="noopener">基本单元</a>，在传统的<a href="https://baike.baidu.com/item/操作系统" target="_blank" rel="noopener">操作系统</a>中，进程既是基本的<a href="https://baike.baidu.com/item/分配单元" target="_blank" rel="noopener">分配单元</a>，也是基本的执行单元。</p>
<h4 id="1、进程的概念"><a href="#1、进程的概念" class="headerlink" title="1、进程的概念"></a>1、进程的概念</h4><p>​        第一，进程是一个实体。每一个进程都有它自己的地址空间（每个进程的地址空间是相互独立的），一般情况下，包括文本区域（text region）、数据区域（data region）和堆栈（stack region）。文本区域存储处理器执行的代码；数据区域存储变量和进程执行期间使用的动态分配的内存；堆栈区域存储着活动过程调用的指令和本地变量。</p>
<p>​        第二，进程是一个“执行中的程序”。程序是一个没有生命的实体，只有处理器赋予程序生命时（操作系统执行之），它才能成为一个活动的实体，我们称其为进程。</p>
<p>​        进程是操作系统中最基本、重要的概念。是多道程序系统出现后，为了刻画系统内部出现的动态情况，描述系统内部各道程序的活动规律引进的一个概念,所有多道程序设计操作系统都建立在进程的基础上。</p>
<h4 id="2、操作系统引入进程的概念的原因"><a href="#2、操作系统引入进程的概念的原因" class="headerlink" title="2、操作系统引入进程的概念的原因"></a>2、操作系统引入进程的概念的原因</h4><p>从理论角度看，是对正在运行的程序过程的抽象；<br>        从实现角度看，是一种数据结构，目的在于清晰地刻画动态系统的内在规律，有效管理和调度进入计算机系统主存储器运行的程序。</p>
<h4 id="3、进程的特征"><a href="#3、进程的特征" class="headerlink" title="3、进程的特征"></a>3、进程的特征</h4><ul>
<li><strong>动态性：</strong>进程的实质是程序在多道程序系统中的一次执行过程，进程是动态产生，动态消亡的。</li>
<li><strong>并发性：</strong>任何进程都可以同其他进程一起并发执行</li>
<li><strong>独立性：</strong>进程是一个能独立运行的基本单位，同时也是系统分配资源和调度的独立单位；</li>
<li><strong>异步性：</strong>由于进程间的相互制约，使进程具有执行的间断性，即进程按各自独立的、不可预知的速度向前推进<br>结构特征：进程由程序、数据和进程控制块三部分组成</li>
</ul>
<p>​        多个不同的进程可以包含相同的程序：一个程序在不同的数据集里就构成不同的进程，能得到不同的结果；但是执行过程中，程序不能发生改变。</p>
<h4 id="4、进程与程序中的区别"><a href="#4、进程与程序中的区别" class="headerlink" title="4、进程与程序中的区别"></a>4、进程与程序中的区别</h4><p>​        程序是指令和数据的有序集合，其本身没有任何运行的含义，是一个静态的概念。<br>​        而进程是程序在处理机上的一次执行过程，它是一个动态的概念。<br>​        程序可以作为一种软件资料长期存在，而进程是有一定生命期的。<br>​        程序是永久的，进程是暂时的。</p>
<p><strong>注意：</strong></p>
<p>​        <strong>同一个程序执行两次，就会在操作系统中出现两个进程，所以我们可以同时运行一个软件，分别做不同的事情也不会混乱。</strong></p>
<h3 id="三、进程调度"><a href="#三、进程调度" class="headerlink" title="三、进程调度"></a>三、进程调度</h3><p>​        要想多个进程交替运行，操作系统必须对这些进程进行调度，这个调度也不是随即进行的，而是需要遵循一定的法则，由此就有了进程的调度算法。</p>
<h4 id="1、先来先服务的调度算法"><a href="#1、先来先服务的调度算法" class="headerlink" title="1、先来先服务的调度算法"></a>1、先来先服务的调度算法</h4><p>​        先来先服务（FCFS）调度算法是一种最简单的调度算法，该算法既可用于作业调度，也可用于进程调度。FCFS算法比较有利于长作业（进程），而不利于短作业（进程）。由此可知，本算法适合于CPU繁忙型作业，而不利于I/O繁忙型的作业（进程）。</p>
<h4 id="2、短作业优先调度算法"><a href="#2、短作业优先调度算法" class="headerlink" title="2、短作业优先调度算法"></a>2、短作业优先调度算法</h4><p>​        短作业（进程）优先调度算法（SJ/PF）是指对短作业或短进程优先调度的算法，该算法既可用于作业调度，也可用于进程调度。但其对长作业不利；不能保证紧迫性作业（进程）被及时处理；作业的长短只是被估算出来的。</p>
<h4 id="3、时间片轮转法"><a href="#3、时间片轮转法" class="headerlink" title="3、时间片轮转法"></a>3、时间片轮转法</h4><p>​        时间片轮转(Round Robin，RR)法的基本思路是让每个进程在就绪队列中的等待时间与享受服务的时间成比例。在时间片轮转法中，需要将CPU的处理时间分成固定大小的时间片，例如，几十毫秒至几百毫秒。如果一个进程在被调度选中之后用完了系统规定的时间片，但又未完成要求的任务，则它自行释放自己所占有的CPU而排到就绪队列的末尾，等待下一次调度。同时，进程调度程序又去调度当前就绪队列中的第一个进程。<br>​      显然，轮转法只能用来调度分配一些可以抢占的资源。这些可以抢占的资源可以随时被剥夺，而且可以将它们再分配给别的进程。CPU是可抢占资源的一种。但打印机等资源是不可抢占的。由于作业调度是对除了CPU之外的所有系统硬件资源的分配，其中包含有不可抢占资源，所以作业调度不使用轮转法。<br>​        在轮转法中，时间片长度的选取非常重要。首先，时间片长度的选择会直接影响到系统的开销和响应时间。如果时间片长度过短，则调度程序抢占处理机的次数增多。这将使进程上下文切换次数也大大增加，从而加重系统开销。反过来，如果时间片长度选择过长，例如，一个时间片能保证就绪队列中所需执行时间最长的进程能执行完毕，则轮转法变成了先来先服务法。时间片长度的选择是根据系统对响应时间的要求和就绪队列中所允许最大的进程数来确定的。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">在轮转法中，加入到就绪队列的进程有3种情况：</span><br><span class="line">      一种是分给它的时间片用完，但进程还未完成，回到就绪队列的末尾等待下次调度去继续执行。</span><br><span class="line">      另一种情况是分给该进程的时间片并未用完，只是因为请求I/O或由于进程的互斥与同步关系而被阻塞。当阻塞解除之后再回到就绪队列。</span><br><span class="line">      第三种情况就是新创建进程进入就绪队列。</span><br><span class="line">      如果对这些进程区别对待，给予不同的优先级和时间片从直观上看，可以进一步改善系统服务质量和效率。例如，我们可把就绪队列按照进程到达就绪队列的类型和进程被阻塞时的阻塞原因分成不同的就绪队列，每个队列按FCFS原则排列，各队列之间的进程享有不同的优先级，但同一队列内优先级相同。这样，当一个进程在执行完它的时间片之后，或从睡眠中被唤醒以及被创建之后，将进入不同的就绪队列。</span><br></pre></td></tr></table></figure>

<h4 id="4、多级反馈队列"><a href="#4、多级反馈队列" class="headerlink" title="4、多级反馈队列"></a>4、多级反馈队列</h4><p>​        前面介绍的各种用作进程调度的算法都有一定的局限性。如短进程优先的调度算法，仅照顾了短进程而忽略了长进程，而且如果并未指明进程的长度，则短进程优先和基于进程长度的抢占式调度算法都将无法使用。<br>​        而多级反馈队列调度算法则不必事先知道各种进程所需的执行时间，而且还可以满足各种类型进程的需要，因而它是目前被公认的一种较好的进程调度算法。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">在采用多级反馈队列调度算法的系统中，调度算法的实施过程如下所述。</span><br><span class="line">(1) 应设置多个就绪队列，并为各个队列赋予不同的优先级。第一个队列的优先级最高，第二个队列次之，其余各队列的优先权逐个降低。该算法赋予各个队列中进程执行时间片的大小也各不相同，在优先权愈高的队列中，为每个进程所规定的执行时间片就愈小。例如，第二个队列的时间片要比第一个队列的时间片长一倍，……，第i+1个队列的时间片要比第i个队列的时间片长一倍。</span><br><span class="line">(2) 当一个新进程进入内存后，首先将它放入第一队列的末尾，按FCFS原则排队等待调度。当轮到该进程执行时，如它能在该时间片内完成，便可准备撤离系统；如果它在一个时间片结束时尚未完成，调度程序便将该进程转入第二队列的末尾，再同样地按FCFS原则等待调度执行；如果它在第二队列中运行一个时间片后仍未完成，再依次将它放入第三队列，……，如此下去，当一个长作业(进程)从第一队列依次降到第n队列后，在第n 队列便采取按时间片轮转的方式运行。</span><br><span class="line"></span><br><span class="line">(3) 仅当第一队列空闲时，调度程序才调度第二队列中的进程运行；仅当第1～(i-1)队列均空时，才会调度第i队列中的进程运行。如果处理机正在第i队列中为某进程服务时，又有新进程进入优先权较高的队列(第1～(i-1)中的任何一个队列)，则此时新进程将抢占正在运行进程的处理机，即由调度程序把正在运行的进程放回到第i队列的末尾，把处理机分配给新到的高优先权进程。</span><br></pre></td></tr></table></figure>

<h3 id="四、进程的并行与并发"><a href="#四、进程的并行与并发" class="headerlink" title="四、进程的并行与并发"></a>四、进程的并行与并发</h3><p><strong>并行</strong> : 并行是指两者同时执行，比如赛跑，两个人都在不停的往前跑；（资源够用，比如三个线程，四核的CPU ）</p>
<p><strong>并发</strong> : 并发是指资源有限的情况下，两者交替轮流使用资源，比如一段路(单核CPU资源)同时只能过一个人，A走一段后，让给B，B用完继续给A ，交替使用，目的是提高效率。</p>
<p><strong>区别</strong>:</p>
<p><strong>并行</strong>是从微观上，也就是在一个精确的时间片刻，有不同的程序在执行，这就要求必须有多个处理器。<br><strong>并发</strong>是从宏观上，在一个时间段上可以看出是同时执行的，比如一个服务器同时处理多个session。</p>
<h3 id="五、同步异步阻塞非阻塞"><a href="#五、同步异步阻塞非阻塞" class="headerlink" title="五、同步异步阻塞非阻塞"></a>五、同步异步阻塞非阻塞</h3><h4 id="1、状态介绍"><a href="#1、状态介绍" class="headerlink" title="1、状态介绍"></a>1、状态介绍</h4><p><img src="https://raw.githubusercontent.com/suliangxu/MyHexoPicture/master/python%E5%85%A8%E6%A0%88/%E7%AC%AC02%E9%83%A8%E5%88%86%EF%BC%9A%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B%2B%E6%95%B0%E6%8D%AE%E5%BA%93%2B%E5%89%8D%E7%AB%AF/%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B/10.png" alt></p>
<p>​        在了解其他概念之前，我们首先要了解进程的几个状态。在程序运行的过程中，由于被操作系统的调度算法控制，程序会进入几个状态：就绪，运行和阻塞。</p>
<p>　　<strong>（1）就绪(Ready)状态</strong></p>
<p>　　当进程已分配到除CPU以外的所有必要的资源，只要获得处理机便可立即执行，这时的进程状态称为就绪状态。</p>
<p>　　<strong>（2）执行/运行（Running）状态</strong></p>
<p>​        当进程已获得处理机，其程序正在处理机上执行，此时的进程状态称为执行状态。</p>
<p>　　<strong>（3）阻塞(Blocked)状态</strong></p>
<p>​        正在执行的进程，由于等待某个事件发生而无法执行时，便放弃处理机而处于阻塞状态。引起进程阻塞的事件可有多种，例如，等待I/O完成、申请缓冲区不能满足、等待信件(信号)等。</p>
<p><img src="https://raw.githubusercontent.com/suliangxu/MyHexoPicture/master/python%E5%85%A8%E6%A0%88/%E7%AC%AC02%E9%83%A8%E5%88%86%EF%BC%9A%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B%2B%E6%95%B0%E6%8D%AE%E5%BA%93%2B%E5%89%8D%E7%AB%AF/%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B/11.png" alt></p>
<h4 id="2、同步和异步"><a href="#2、同步和异步" class="headerlink" title="2、同步和异步"></a>2、同步和异步</h4><p>​        所谓同步就是一个任务的完成需要依赖另外一个任务时，只有等待被依赖的任务完成后，依赖的任务才能算完成，这是一种可靠的任务序列。要么成功都成功，失败都失败，两个任务的状态可以保持一致。</p>
<p>　    所谓异步是不需要等待被依赖的任务完成，只是通知被依赖的任务要完成什么工作，依赖的任务也立即执行，只要自己完成了整个任务就算完成了。至于被依赖的任务最终是否真正完成，依赖它的任务无法确定，所以它是不可靠的任务序列。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">例子：</span><br><span class="line">比如我去银行办理业务，可能会有两种方式：</span><br><span class="line">第一种 ：选择排队等候；</span><br><span class="line">第二种 ：选择取一个小纸条上面有我的号码，等到排到我这一号时由柜台的人通知我轮到我去办理业务了；</span><br><span class="line"></span><br><span class="line">第一种：前者(排队等候)就是同步等待消息通知，也就是我要一直在等待银行办理业务情况；</span><br><span class="line"></span><br><span class="line">第二种：后者(等待别人通知)就是异步等待消息通知。在异步消息处理中，等待消息通知者(在这个例子中就是等待办理业务的人)往往注册一个回调机制，在所等待的事件被触发时由触发机制(在这里是柜台的人)通过某种机制(在这里是写在小纸条上的号码，喊号)找到等待该事件的人。</span><br></pre></td></tr></table></figure>

<h4 id="3、阻塞与非阻塞"><a href="#3、阻塞与非阻塞" class="headerlink" title="3、阻塞与非阻塞"></a>3、阻塞与非阻塞</h4><p>​        阻塞和非阻塞这两个概念与程序（线程）等待消息通知(无所谓同步或者异步)时的状态有关。也就是说阻塞与非阻塞主要是程序（线程）等待消息通知时的状态角度来说的。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">例子：</span><br><span class="line">		继续上面的那个例子，不论是排队还是使用号码等待通知，如果在这个等待的过程中，等待者除了等待消息通知之外不能做其它的事情，那么该机制就是阻塞的，表现在程序中,也就是该程序一直阻塞在该函数调用处不能继续往下执行。</span><br><span class="line">		相反，有的人喜欢在银行办理这些业务的时候一边打打电话发发短信一边等待，这样的状态就是非阻塞的，因为他(等待者)没有阻塞在这个消息通知上，而是一边做自己的事情一边等待。</span><br><span class="line"></span><br><span class="line">		注意：同步非阻塞形式实际上是效率低下的，想象一下你一边打着电话一边还需要抬头看到底队伍排到你了没有。如果把打电话和观察排队的位置看成是程序的两个操作的话，这个程序需要在这两种不同的行为之间来回的切换，效率可想而知是低下的；而异步非阻塞形式却没有这样的问题，因为打电话是你(等待者)的事情，而通知你则是柜台(消息触发机制)的事情，程序没有在两种不同的操作中来回切换。</span><br></pre></td></tr></table></figure>

<h4 id="4、同步-异步-与-阻塞-非阻塞"><a href="#4、同步-异步-与-阻塞-非阻塞" class="headerlink" title="4、同步/异步 与 阻塞/非阻塞"></a>4、同步/异步 与 阻塞/非阻塞</h4><ol>
<li><p><strong>同步阻塞形式</strong></p>
<p>​        效率最低。拿上面的例子来说，就是你专心排队，什么别的事都不做。</p>
</li>
<li><p><strong>异步阻塞形式</strong></p>
<p>​        如果在银行等待办理业务的人采用的是异步的方式去等待消息被触发（通知），也就是领了一张小纸条，假如在这段时间里他不能离开银行做其它的事情，那么很显然，这个人被阻塞在了这个等待的操作上面；</p>
<p>​        <strong>异步操作是可以被阻塞住的，只不过它不是在处理消息时阻塞，而是在等待消息通知时被阻塞。</strong></p>
</li>
<li><p><strong>同步非阻塞形式</strong></p>
<p>​        实际上是效率低下的。</p>
<p>　　想象一下你一边打着电话一边还需要抬头看到底队伍排到你了没有，如果把打电话和观察排队的位置看成是程序的两个操作的话，这个程序需要在这两种不同的行为之间来回的切换，效率可想而知是低下的。</p>
</li>
<li><p><strong>异步非阻塞形式</strong></p>
<p>​        效率更高，</p>
<p>　　因为打电话是你(等待者)的事情，而通知你则是柜台(消息触发机制)的事情，程序没有在两种不同的操作中来回切换。</p>
<p>　　比如说，这个人突然发觉自己烟瘾犯了，需要出去抽根烟，于是他告诉大堂经理说，排到我这个号码的时候麻烦到外面通知我一下，那么他就没有被阻塞在这个等待的操作上面，自然这个就是异步+非阻塞的方式了。</p>
</li>
</ol>
<p>​        很多人会把同步和阻塞混淆，是因为很多时候同步操作会以阻塞的形式表现出来，同样的，很多人也会把异步和非阻塞混淆，因为异步操作一般都不会在真正的IO操作处被阻塞。</p>
<h3 id="六、进程的创建与结束"><a href="#六、进程的创建与结束" class="headerlink" title="六、进程的创建与结束"></a>六、进程的创建与结束</h3><h4 id="1、进程的创建"><a href="#1、进程的创建" class="headerlink" title="1、进程的创建"></a>1、进程的创建</h4><p>​        但凡是硬件，都需要有操作系统去管理，只要有操作系统，就有进程的概念，就需要有创建进程的方式，一些操作系统只为一个应用程序设计，比如微波炉中的控制器，一旦启动微波炉，所有的进程都已经存在。</p>
<p>　　而对于通用系统（跑很多应用程序），需要有系统运行过程中创建或撤销进程的能力，主要分为4中形式创建新的进程：</p>
<p>　　1. 系统初始化（查看进程linux中用ps命令，windows中用任务管理器，前台进程负责与用户交互，后台运行的进程与用户无关，运行在后台并且只在需要时才唤醒的进程，称为守护进程，如电子邮件、web页面、新闻、打印）</p>
<p>　　2. 一个进程在运行过程中开启了子进程（如nginx开启多进程，os.fork,subprocess.Popen等）</p>
<p>　　3. 用户的交互式请求，而创建一个新进程（如用户双击暴风影音）</p>
<p>　　4. 一个批处理作业的初始化（只在大型机的批处理系统中应用）</p>
<p>　　无论哪一种，新进程的创建都是由一个已经存在的进程执行了一个用于创建进程的系统调用而创建的。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">创建进程：</span><br><span class="line">1. 在UNIX中该系统调用是：fork，fork会创建一个与父进程一模一样的副本，二者有相同的存储映像、同样的环境字符串和同样的打开文件（在shell解释器进程中，执行一个命令就会创建一个子进程）</span><br><span class="line"></span><br><span class="line">　　2. 在windows中该系统调用是：CreateProcess，CreateProcess既处理进程的创建，也负责把正确的程序装入新进程。</span><br><span class="line"></span><br><span class="line">　　关于创建子进程，UNIX和windows</span><br><span class="line"></span><br><span class="line">　　1.相同的是：进程创建后，父进程和子进程有各自不同的地址空间（多道技术要求物理层面实现进程之间内存的隔离），任何一个进程的在其地址空间中的修改都不会影响到另外一个进程。</span><br><span class="line"></span><br><span class="line">　　2.不同的是：在UNIX中，子进程的初始地址空间是父进程的一个副本，提示：子进程和父进程是可以有只读的共享内存区的。但是对于windows系统来说，从一开始父进程与子进程的地址空间就是不同的。</span><br></pre></td></tr></table></figure>

<h4 id="2、进程的结束"><a href="#2、进程的结束" class="headerlink" title="2、进程的结束"></a>2、进程的结束</h4><ol>
<li><p>正常退出（自愿，如用户点击交互式页面的叉号，或程序执行完毕调用发起系统调用正常退出，在linux中用exit，在windows中用ExitProcess）</p>
</li>
<li><p>出错退出（自愿，python a.py中a.py不存在）</p>
</li>
<li><p>严重错误（非自愿，执行非法指令，如引用不存在的内存，1/0等，可以捕捉异常，try…except…）</p>
</li>
<li><p>被其他进程杀死（非自愿，如kill -9）</p>
</li>
</ol>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/08/02/python全栈/第02部分：并发编程+数据库+前端/并发编程/操作系统的发展史/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="John Doe">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/08/02/python全栈/第02部分：并发编程+数据库+前端/并发编程/操作系统的发展史/" itemprop="url">操作系统的发展史</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-08-02T22:21:10+08:00">
                2019-08-02
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/python全栈-02部分-并发编程/" itemprop="url" rel="index">
                    <span itemprop="name">python全栈 -02部分 -并发编程</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>[TOC]</p>
<h2 id="一、手工操作——穿孔卡片"><a href="#一、手工操作——穿孔卡片" class="headerlink" title="一、手工操作——穿孔卡片"></a>一、手工操作——穿孔卡片</h2><p>1946年第一台计算机诞生–20世纪50年代中期，计算机工作还在采用手工操作方式。此时还没有操作系统的概念。</p>
<p><img src="https://raw.githubusercontent.com/suliangxu/MyHexoPicture/master/python%E5%85%A8%E6%A0%88/%E7%AC%AC02%E9%83%A8%E5%88%86%EF%BC%9A%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B%2B%E6%95%B0%E6%8D%AE%E5%BA%93%2B%E5%89%8D%E7%AB%AF/%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B/01.png" alt> <img src="https://raw.githubusercontent.com/suliangxu/MyHexoPicture/master/python%E5%85%A8%E6%A0%88/%E7%AC%AC02%E9%83%A8%E5%88%86%EF%BC%9A%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B%2B%E6%95%B0%E6%8D%AE%E5%BA%93%2B%E5%89%8D%E7%AB%AF/%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B/02.png" alt></p>
<p>​        程序员将对应于程序和数据的已穿孔的纸带（或卡片）装入输入机，然后启动输入机把程序和数据输入计算机内存，接着通过控制台开关启动程序针对数据运行；计算完毕，打印机输出计算结果；用户取走结果并卸下纸带（或卡片）后，才让下一个用户上机。</p>
<p>手工操作方式两个特点：</p>
<p>　　（1）用户独占全机。不会出现因资源已被其他用户占用而等待的现象，但资源的利用率低。</p>
<p>　　（2）CPU 等待手工操作。CPU的利用不充分。</p>
<p>​      20世纪50年代后期，出现<a href="https://baike.baidu.com/item/人机矛盾" target="_blank" rel="noopener">人机矛盾</a>：手工操作的慢速度和计算机的高速度之间形成了尖锐矛盾，手工操作方式已严重损害了系统资源的利用率（使资源利用率降为百分之几，甚至更低），不能容忍。唯一的解决办法：只有摆脱人的手工操作，实现作业的自动过渡。这样就出现了成<a href="https://baike.baidu.com/item/批处理" target="_blank" rel="noopener">批处理</a>。</p>
<h2 id="二、批处理——磁带存储"><a href="#二、批处理——磁带存储" class="headerlink" title="二、批处理——磁带存储"></a>二、批处理——磁带存储</h2><p>​        批处理系统：加载在计算机上的一个<a href="https://baike.baidu.com/item/系统软件" target="_blank" rel="noopener">系统软件</a>，在它的控制下，计算机能够自动地、成批地处理一个或多个用户的作业（这作业包括程序、数据和命令）。</p>
<h3 id="1、联机批处理系统"><a href="#1、联机批处理系统" class="headerlink" title="1、联机批处理系统"></a>1、联机批处理系统</h3><p>首先出现的是联机批处理系统，即作业的输入/输出由CPU来处理。</p>
<p><img src="https://raw.githubusercontent.com/suliangxu/MyHexoPicture/master/python%E5%85%A8%E6%A0%88/%E7%AC%AC02%E9%83%A8%E5%88%86%EF%BC%9A%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B%2B%E6%95%B0%E6%8D%AE%E5%BA%93%2B%E5%89%8D%E7%AB%AF/%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B/03.png" alt></p>
<p>​        主机与输入机之间增加一个存储设备——<strong>磁带</strong>，在运行于主机上的监督程序的自动控制下，计算机可自动完成：成批地把输入机上的用户作业读入磁带，依次把磁带上的用户作业读入主机内存并执行并把计算结果向输出机输出。完成了上一批作业后，监督程序又从输入机上输入另一批作业，保存在磁带上，并按上述步骤重复处理。</p>
<p>​        监督程序不停地处理各个作业，从而实现了作业到作业的自动转接，减少了作业建立时间和手工操作时间，有效克服了人机矛盾，提高了计算机的利用率。</p>
<p>​        但是，在作业输入和结果输出时，主机的高速CPU仍处于空闲状态，等待慢速的输入/输出设备完成工作： 主机处于“忙等”状态。</p>
<h3 id="2、脱机批处理系统"><a href="#2、脱机批处理系统" class="headerlink" title="2、脱机批处理系统"></a>2、脱机批处理系统</h3><p>​        为克服与缓解：高速主机与慢速外设的矛盾，提高CPU的利用率，又引入了<a href="https://baike.baidu.com/item/脱机批处理系统" target="_blank" rel="noopener">脱机批处理系统</a>，即输入/输出脱离主机控制。</p>
<p><img src="https://raw.githubusercontent.com/suliangxu/MyHexoPicture/master/python%E5%85%A8%E6%A0%88/%E7%AC%AC02%E9%83%A8%E5%88%86%EF%BC%9A%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B%2B%E6%95%B0%E6%8D%AE%E5%BA%93%2B%E5%89%8D%E7%AB%AF/%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B/04.png" alt></p>
<p><img src="https://raw.githubusercontent.com/suliangxu/MyHexoPicture/master/python%E5%85%A8%E6%A0%88/%E7%AC%AC02%E9%83%A8%E5%88%86%EF%BC%9A%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B%2B%E6%95%B0%E6%8D%AE%E5%BA%93%2B%E5%89%8D%E7%AB%AF/%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B/05.png" alt></p>
<p>​        卫星机：一台不与主机直接相连而专门用于与输入/输出设备打交道的。</p>
<p>　　其功能是：</p>
<p>　　（1）从输入机上读取用户作业并放到输入磁带上。</p>
<p>　　（2）从输出磁带上读取执行结果并传给输出机。</p>
<p>​        这样，主机不是直接与慢速的输入/输出设备打交道，而是与速度相对较快的磁带机发生关系，有效缓解了主机与设备的矛盾。主机与卫星机可并行工作，二者分工明确，可以充分发挥主机的高速计算能力。</p>
<p>​        脱机批处理系统:20世纪60年代应用十分广泛，它极大缓解了人机矛盾及主机与外设的矛盾。</p>
<p>　　不足：每次主机内存中仅存放一道作业，每当它运行期间发出输入/输出（I/O）请求后，高速的CPU便处于等待低速的I/O完成状态，致使CPU空闲。</p>
<p>​        为改善CPU的利用率，又引入了多道程序系统。</p>
<h2 id="三、多道程序系统"><a href="#三、多道程序系统" class="headerlink" title="三、多道程序系统"></a>三、多道程序系统</h2><h3 id="1、多道程序设计技术"><a href="#1、多道程序设计技术" class="headerlink" title="1、多道程序设计技术"></a>1、多道程序设计技术</h3><p>​        所谓多道程序设计技术，就是指允许多个程序同时进入内存并运行。即同时把多个程序放入内存，并允许它们交替在CPU中运行，它们共享系统中的各种硬、软件资源。当一道程序因I/O请求而暂停运行时，CPU便立即转去运行另一道程序。</p>
<p><img src="https://raw.githubusercontent.com/suliangxu/MyHexoPicture/master/python%E5%85%A8%E6%A0%88/%E7%AC%AC02%E9%83%A8%E5%88%86%EF%BC%9A%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B%2B%E6%95%B0%E6%8D%AE%E5%BA%93%2B%E5%89%8D%E7%AB%AF/%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B/06.png" alt></p>
<p>​        在A程序计算时，I/O空闲， A程序I/O操作时，CPU空闲（B程序也是同样）；必须A工作完成后，B才能进入内存中开始工作，两者是串行的，全部完成共需时间=T1+T2。</p>
<p><img src="https://raw.githubusercontent.com/suliangxu/MyHexoPicture/master/python%E5%85%A8%E6%A0%88/%E7%AC%AC02%E9%83%A8%E5%88%86%EF%BC%9A%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B%2B%E6%95%B0%E6%8D%AE%E5%BA%93%2B%E5%89%8D%E7%AB%AF/%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B/07.png" alt></p>
<p>​        将A、B两道程序同时存放在内存中，它们在系统的控制下，可相互穿插、交替地在CPU上运行：当A程序因请求I/O操作而放弃CPU时，B程序就可占用CPU运行，这样 CPU不再空闲，而正进行A I/O操作的I/O设备也不空闲，显然，CPU和I/O设备都处于“忙”状态，大大提高了资源的利用率，从而也提高了系统的效率，A、B全部完成所需时间&lt;&lt;T1+T2。</p>
<p>​      多道程序设计技术不仅使CPU得到充分利用，同时改善I/O设备和内存的利用率，从而提高了整个系统的资源利用率和系统吞吐量（单位时间内处理作业（程序）的个数），最终提高了整个系统的效率。</p>
<p>​        单处理机系统中多道程序运行时的特点：</p>
<p>　　（1）多道：计算机内存中同时存放几道相互独立的程序；</p>
<p>　　（2）宏观上并行：同时进入系统的几道程序都处于运行过程中，即它们先后开始了各自的运行，但都未运行完毕；</p>
<p>　　（3）微观上串行：实际上，各道程序轮流地用CPU，并交替运行。</p>
<p>​        <strong>多道程序系统的出现，标志着操作系统渐趋成熟的阶段，先后出现了作业调度管理、处理机管理、存储器管理、外部设备管理、文件系统管理等功能。</strong></p>
<p>​        <strong>由于多个程序同时在计算机中运行，开始有了空间隔离的概念，只有内存空间的隔离，才能让数据更加安全、稳定。</strong></p>
<p>​        <strong>出了空间隔离之外，多道技术还第一次体现了时空复用的特点，遇到IO操作就切换程序，使得cpu的利用率提高了，计算机的工作效率也随之提高。</strong></p>
<h3 id="2、多道批处理系统"><a href="#2、多道批处理系统" class="headerlink" title="2、多道批处理系统"></a>2、多道批处理系统</h3><p>​        20世纪60年代中期，在前述的批处理系统中，引入多道程序设计技术后形成多道批处理系统（简称：批处理系统）。</p>
<p>　　它有两个特点：</p>
<p>　　（1）多道：系统内可同时容纳多个作业。这些作业放在外存中，组成一个后备队列，系统按一定的调度原则每次从后备作业队列中选取一个或多个作业进入内存运行，运行作业结束、退出运行和后备作业进入运行均由系统自动实现，从而在系统中形成一个自动转接的、连续的作业流。</p>
<p>　　（2）成批：在系统运行过程中，不允许用户与其作业发生交互作用，即：作业一旦进入系统，用户就不能直接干预其作业的运行。</p>
<p>　　批处理系统的追求目标：提高系统资源利用率和系统吞吐量，以及作业流程的自动化。</p>
<p>　　批处理系统的一个重要缺点：不提供人机交互能力，给用户使用计算机带来不便。</p>
<p>　　虽然用户独占全机资源，并且直接控制程序的运行，可以随时了解程序运行情况。但这种工作方式因独占全机造成资源效率极低。</p>
<p>　　一种新的追求目标：既能保证计算机效率，又能方便用户使用计算机。 20世纪60年代中期，计算机技术和软件技术的发展使这种追求成为可能。</p>
<h2 id="四、分时系统"><a href="#四、分时系统" class="headerlink" title="四、分时系统"></a>四、分时系统</h2><p>​        由于CPU速度不断提高和采用分时技术，一台计算机可同时连接多个用户终端，而每个用户可在自己的终端上联机使用计算机，好像自己独占机器一样。</p>
<p><img src="https://raw.githubusercontent.com/suliangxu/MyHexoPicture/master/python%E5%85%A8%E6%A0%88/%E7%AC%AC02%E9%83%A8%E5%88%86%EF%BC%9A%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B%2B%E6%95%B0%E6%8D%AE%E5%BA%93%2B%E5%89%8D%E7%AB%AF/%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B/08.png" alt></p>
<p>​        分时技术：把处理机的运行时间分成很短的时间片，按时间片轮流把处理机分配给各联机作业使用。</p>
<p>　　若某个作业在分配给它的时间片内不能完成其计算，则该作业暂时中断，把处理机让给另一作业使用，等待下一轮时再继续其运行。由于计算机速度很快，作业运行轮转得很快，给每个用户的印象是，好象他独占了一台计算机。而每个用户可以通过自己的终端向系统发出各种操作控制命令，在充分的人机交互情况下，完成作业的运行。</p>
<p>​        具有上述特征的计算机系统称为分时系统，它允许多个用户同时联机使用计算机。</p>
<p>　　特点：</p>
<p>　　（1）多路性。若干个用户同时使用一台计算机。微观上看是各用户轮流使用计算机；宏观上看是各用户并行工作。</p>
<p>　　（2）交互性。用户可根据系统对请求的响应结果，进一步向系统提出新的请求。这种能使用户与系统进行人机对话的工作方式，明显地有别于批处理系统，因而，分时系统又被称为交互式系统。</p>
<p>　　（3）独立性。用户之间可以相互独立操作，互不干扰。系统保证各用户程序运行的完整性，不会发生相互混淆或破坏现象。</p>
<p>　　（4）及时性。系统可对用户的输入及时作出响应。分时系统性能的主要指标之一是响应时间，它是指：从终端发出命令到系统予以应答所需的时间。</p>
<p>　　<strong>分时系统的主要目标</strong>：对用户响应的及时性，即不至于用户等待每一个命令的处理时间过长。</p>
<p>​        分时系统可以同时接纳数十个甚至上百个用户，由于内存空间有限，往往采用对换（又称交换）方式的存储方法。即将未“轮到”的作业放入磁盘，一旦“轮到”，再将其调入内存；而时间片用完后，又将作业存回磁盘（俗称“滚进”、“滚出“法），使同一存储区域轮流为多个用户服务。</p>
<p>​        多用户分时系统是当今计算机操作系统中最普遍使用的一类操作系统。</p>
<p>​      <strong>注意：分时系统的分时间片工作，在没有遇到IO操作的时候就用完了自己的时间片被切走了，这样的切换工作其实并没有提高cpu的效率，反而使得计算机的效率降低了。但是我们牺牲了一点效率，却实现了多个程序共同执行的效果，这样你就可以在计算机上一边听音乐一边聊qq了。</strong></p>
<h2 id="五、实时系统"><a href="#五、实时系统" class="headerlink" title="五、实时系统"></a>五、实时系统</h2><p>​        虽然多道批处理系统和分时系统能获得较令人满意的资源利用率和系统响应时间，但却不能满足实时控制与实时信息处理两个应用领域的需求。于是就产生了实时系统，即系统能够及时响应随机发生的外部事件，并在严格的时间范围内完成对该事件的处理。</p>
<p>​        实时系统在一个特定的应用中常作为一种控制设备来使用。</p>
<p>　　  实时系统可分成两类：</p>
<p>　　  （1）实时控制系统。当用于飞机飞行、导弹发射等的自动控制时，要求计算机能尽快处理测量系统测得的数据，及时地对飞机或导弹进行控制，或将有关信息通过显示终端提供给决策人员。当用于轧钢、石化等工业生产过程控制时，也要求计算机能及时处理由各类传感器送来的数据，然后控制相应的执行机构。</p>
<p>　　  （2）实时信息处理系统。当用于预定飞机票、查询有关航班、航线、票价等事宜时，或当用于银行系统、情报检索系统时，都要求计算机能对终端设备发来的服务请求及时予以正确的回答。此类对响应及时性的要求稍弱于第一类。</p>
<p>　　<strong>实时操作系统的主要特点</strong>：</p>
<p>　　（1）及时响应。每一个信息接收、分析处理和发送的过程必须在严格的时间限制内完成。</p>
<p>　　（2）高可靠性。需采取冗余措施，双机系统前后台工作，也包括必要的保密措施等。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">分时系统和实时系统的比较：</span><br><span class="line">分时——现在流行的PC，服务器都是采用这种运行模式，即把CPU的运行分成若干时间片分别处理不同的运算请求 linux系统</span><br><span class="line">实时——一般用于单片机上、PLC等，比如电梯的上下控制中，对于按键等动作要求进行实时处理</span><br></pre></td></tr></table></figure>

<h2 id="六、通用操作系统"><a href="#六、通用操作系统" class="headerlink" title="六、通用操作系统"></a>六、通用操作系统</h2><p>​        操作系统的三种基本类型：多道批处理系统、分时系统、实时系统。</p>
<p>　　<strong>通用操作系统：具有多种类型操作特征的操作系统。可以同时兼有多道批处理、分时、实时处理的功能，或其中两种以上的功能。</strong></p>
<p>　　例如：实时处理+批处理=实时批处理系统。首先保证优先处理实时任务，插空进行批处理作业。常把实时任务称为前台作业，批作业称为后台作业。</p>
<p>　　再如：分时处理+批处理=分时批处理系统。即：时间要求不强的作业放入“后台”（批处理）处理，需频繁交互的作业在“前台”（分时）处理，处理机优先运行“前台”作业。</p>
<p>　　从上世纪60年代中期，国际上开始研制一些大型的通用操作系统。这些系统试图达到功能齐全、可适应各种应用范围和操作方式变化多端的环境的目标。但是，这些系统过于复杂和庞大，不仅付出了巨大的代价，且在解决其可靠性、可维护性和可理解性方面都遇到很大的困难。</p>
<p>　　相比之下，UNIX操作系统却是一个例外。这是一个通用的多用户分时交互型的操作系统。它首先建立的是一个精干的核心，而其功能却足以与许多大型的操作系统相媲美，在核心层以外，可以支持庞大的软件系统。它很快得到应用和推广，并不断完善，对现代操作系统有着重大的影响。</p>
<p>　　至此，操作系统的基本概念、功能、基本结构和组成都已形成并渐趋完善。</p>
<h2 id="七、操作系统的进一步发展"><a href="#七、操作系统的进一步发展" class="headerlink" title="七、操作系统的进一步发展"></a>七、操作系统的进一步发展</h2><p>​        进入20世纪80年代，大规模集成电路工艺技术的飞跃发展，微处理机的出现和发展，掀起了计算机大发展大普及的浪潮。一方面迎来了个人计算机的时代，同时又向计算机网络、分布式处理、巨型计算机和智能化方向发展。于是，操作系统有了进一步的发展，如：个人计算机操作系统、网络操作系统、分布式操作系统等。</p>
<h3 id="1、个人计算机操作系统"><a href="#1、个人计算机操作系统" class="headerlink" title="1、个人计算机操作系统"></a>1、个人计算机操作系统</h3><p>​        个人计算机上的操作系统是联机交互的单用户操作系统，它提供的联机交互功能与通用分时系统提供的功能很相似。</p>
<p>　　由于是个人专用，因此一些功能会简单得多。然而，由于个人计算机的应用普及，对于提供更方便友好的用户接口和丰富功能的文件系统的要求会愈来愈迫切。</p>
<h3 id="2、网络操作系统"><a href="#2、网络操作系统" class="headerlink" title="2、网络操作系统"></a>2、网络操作系统</h3><p>​        计算机网络：通过通信设施，将地理上分散的、具有自治功能的多个计算机系统互连起来，实现信息交换、资源共享、互操作和协作处理的系统。</p>
<p>　　网络操作系统：在原来各自计算机操作系统上，按照网络体系结构的各个协议标准增加网络管理模块，其中包括：通信、资源共享、系统安全和各种网络应用服务。</p>
<h3 id="3、分布式操作系统"><a href="#3、分布式操作系统" class="headerlink" title="3、分布式操作系统"></a>3、分布式操作系统</h3><p>​        表面上看，分布式系统与计算机网络系统没有多大区别。分布式操作系统也是通过通信网络，将地理上分散的具有自治功能的数据处理系统或计算机系统互连起来，实现信息交换和资源共享，协作完成任务。——硬件连接相同。</p>
<p>　　但有如下一些明显的区别：</p>
<p>　　（1）分布式系统要求一个统一的操作系统，实现系统操作的统一性。</p>
<p>　　（2）分布式操作系统管理分布式系统中的所有资源，它负责全系统的资源分配和调度、任务划分、信息传输和控制协调工作，并为用户提供一个统一的界面。</p>
<p>　　（3）用户通过这一界面，实现所需要的操作和使用系统资源，至于操作定在哪一台计算机上执行，或使用哪台计算机的资源，则是操作系统完成的，用户不必知道，此谓：系统的透明性。</p>
<p>　　（4）分布式系统更强调分布式计算和处理，因此对于多机合作和系统重构、坚强性和容错能力有更高的要求，希望系统有：更短的响应时间、高吞吐量和高可靠性。</p>
<h2 id="八、操作系统的作用"><a href="#八、操作系统的作用" class="headerlink" title="八、操作系统的作用"></a>八、操作系统的作用</h2><p>​        现代的计算机系统主要是由一个或者多个处理器，主存，硬盘，键盘，鼠标，显示器，打印机，网络接口及其他输入输出设备组成。</p>
<p>　　一般而言，现代计算机系统是一个复杂的系统。</p>
<p>　　其一：如果每位应用程序员都必须掌握该系统所有的细节，那就不可能再编写代码了（严重影响了程序员的开发效率：全部掌握这些细节可能需要一万年….）</p>
<p>　　其二：并且管理这些部件并加以优化使用，是一件极富挑战性的工作，于是，计算安装了一层软件（系统软件），称为操作系统。它的任务就是为用户程序提供一个更好、更简单、更清晰的计算机模型，并管理刚才提到的所有设备。</p>
<p>　　<strong>总结：</strong></p>
<p>　　<strong>程序员无法把所有的硬件操作细节都了解到，管理这些硬件并且加以优化使用是非常繁琐的工作，这个繁琐的工作就是操作系统来干的，有了他，程序员就从这些繁琐的工作中解脱了出来，只需要考虑自己的应用软件的编写就可以了，应用软件直接使用操作系统提供的功能来间接使用硬件。</strong></p>
<p>　　<strong>精简的说的话，操作系统就是一个协调、管理和控制计算机硬件资源和软件资源的控制程序。操作系统所处的位置如图</strong></p>
<p><img src="https://raw.githubusercontent.com/suliangxu/MyHexoPicture/master/python%E5%85%A8%E6%A0%88/%E7%AC%AC02%E9%83%A8%E5%88%86%EF%BC%9A%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B%2B%E6%95%B0%E6%8D%AE%E5%BA%93%2B%E5%89%8D%E7%AB%AF/%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B/09.png" alt></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">细说的话，操作系统应该分成两部分功能：</span><br><span class="line">#一：隐藏了丑陋的硬件调用接口，为应用程序员提供调用硬件资源的更好，更简单，更清晰的模型（系统调用接口）。应用程序员有了这些接口后，就不用再考虑操作硬件的细节，专心开发自己的应用程序即可。</span><br><span class="line">例如：操作系统提供了文件这个抽象概念，对文件的操作就是对磁盘的操作，有了文件我们无需再去考虑关于磁盘的读写控制（比如控制磁盘转动，移动磁头读写数据等细节），</span><br><span class="line"></span><br><span class="line">#二：将应用程序对硬件资源的竞态请求变得有序化</span><br><span class="line">例如：很多应用软件其实是共享一套计算机硬件，比方说有可能有三个应用程序同时需要申请打印机来输出内容，那么a程序竞争到了打印机资源就打印，然后可能是b竞争到打印机资源，也可能是c，这就导致了无序，打印机可能打印一段a的内容然后又去打印c...,操作系统的一个功能就是将这种无序变得有序。</span><br></pre></td></tr></table></figure>


          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/07/29/python全栈/第01部分：基础+模块+面向对象+网络编程/网络编程/计算机网络/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="John Doe">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/07/29/python全栈/第01部分：基础+模块+面向对象+网络编程/网络编程/计算机网络/" itemprop="url">计算机网络</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-07-29T22:57:50+08:00">
                2019-07-29
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/python全栈-01部分-网络编程/" itemprop="url" rel="index">
                    <span itemprop="name">python全栈 -01部分 -网络编程</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="（一）计算机网络的发展及基础网络概念"><a href="#（一）计算机网络的发展及基础网络概念" class="headerlink" title="（一）计算机网络的发展及基础网络概念"></a>（一）计算机网络的发展及基础网络概念</h2><h3 id="一、早期：联机"><a href="#一、早期：联机" class="headerlink" title="一、早期：联机"></a>一、早期：联机</h3><p><img src="https://raw.githubusercontent.com/suliangxu/MyHexoPicture/master/python%E5%85%A8%E6%A0%88/%E7%AC%AC01%E9%83%A8%E5%88%86%EF%BC%9A%E5%9F%BA%E7%A1%80%2B%E6%A8%A1%E5%9D%97%2B%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%2B%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B/%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B/11.png" alt></p>
<h3 id="二、以太网：局域网与交换机"><a href="#二、以太网：局域网与交换机" class="headerlink" title="二、以太网：局域网与交换机"></a>二、以太网：局域网与交换机</h3><p><img src="https://raw.githubusercontent.com/suliangxu/MyHexoPicture/master/python%E5%85%A8%E6%A0%88/%E7%AC%AC01%E9%83%A8%E5%88%86%EF%BC%9A%E5%9F%BA%E7%A1%80%2B%E6%A8%A1%E5%9D%97%2B%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%2B%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B/%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B/12.png" alt></p>
<p>交换机——解决多台电脑的通信问题(广播、单播、组播)</p>
<h4 id="1、广播"><a href="#1、广播" class="headerlink" title="1、广播"></a>1、广播</h4><p>​        主机之间“一对所有”的通讯模式，网络对其中每一台主机发出的信号都进行无条件复制并转发，<strong>所有主机都可以接收到所有信息（不管你是否需要）</strong>，由于其不用路径选择，所以其网络成本可以很低廉。有线电视网就是典型的广播型网络，我们的电视机实际上是接受到所有频道的信号，但只将一个频道的信号还原成画面。在数据网络中也允许广播的存在，但其被限制在二层交换机的局域网范围内，禁止广播数据穿过路由器，防止广播数据影响大面积的主机。</p>
<p>​        <a href="https://baike.baidu.com/item/广播风暴/3574878?fr=aladdin" target="_blank" rel="noopener">广播风暴</a>：简单的讲是指当广播数据充斥网络无法处理，并占用大量<a href="https://baike.baidu.com/item/网络带宽/6120475" target="_blank" rel="noopener">网络带宽</a>，导致正常业务不能运行，甚至彻底瘫痪，这就发生了“广播风暴”。一个<a href="https://baike.baidu.com/item/数据帧/10571824" target="_blank" rel="noopener">数据帧</a>或包被传输到本地<a href="https://baike.baidu.com/item/网段/11026985" target="_blank" rel="noopener">网段</a> （由<a href="https://baike.baidu.com/item/广播域/5293530" target="_blank" rel="noopener">广播域</a>定义）上的每个<a href="https://baike.baidu.com/item/节点/865052" target="_blank" rel="noopener">节点</a>就是广播；由于<a href="https://baike.baidu.com/item/网络拓扑/4804125" target="_blank" rel="noopener">网络拓扑</a>的设计和连接问题，或其他原因导致广播在网段内大量复制，传播<a href="https://baike.baidu.com/item/数据帧/10571824" target="_blank" rel="noopener">数据帧</a>，导致网络性能下降，甚至<a href="https://baike.baidu.com/item/网络瘫痪/5928979" target="_blank" rel="noopener">网络瘫痪</a>，这就是广播风暴。</p>
<h4 id="2、ip地址与ip协议"><a href="#2、ip地址与ip协议" class="headerlink" title="2、ip地址与ip协议"></a>2、ip地址与ip协议</h4><ul>
<li>规定网络地址的协议叫ip协议，它定义的地址称之为ip地址，广泛采用的v4版本即ipv4，它规定网络地址由32位2进制表示</li>
<li>范围0.0.0.0-255.255.255.255</li>
<li>一个ip地址通常写成四段十进制数，例：172.16.10.1</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">ip保留地址：</span><br><span class="line"></span><br><span class="line">a类网   10.0.0.0~10.255.255.255</span><br><span class="line"></span><br><span class="line">b类网   172.16.0.0~172.31.255.255</span><br><span class="line"></span><br><span class="line">c类网   192.168.0.0~192.168.255.255</span><br></pre></td></tr></table></figure>

<h4 id="3、mac地址"><a href="#3、mac地址" class="headerlink" title="3、mac地址"></a>3、mac地址</h4><p>​        head中包含的源和目标地址由来：ethernet规定接入internet的设备都必须具备网卡，发送端和接收端的地址便是指网卡的地址，即mac地址。</p>
<p>　　mac地址：每块网卡出厂时都被烧制上一个世界唯一的mac地址，长度为48位2进制，通常由12位16进制数表示（前六位是厂商编号，后六位是流水线号）</p>
<h4 id="4、arp协议——查询IP地址和MAC地址的对应关系"><a href="#4、arp协议——查询IP地址和MAC地址的对应关系" class="headerlink" title="4、arp协议——查询IP地址和MAC地址的对应关系"></a>4、arp协议——查询IP地址和MAC地址的对应关系</h4><p>​        地址解析协议，即ARP（Address Resolution Protocol），是根据IP地址获取物理地址的一个TCP/IP协议。</p>
<p>　　主机发送信息时将包含目标IP地址的ARP请求广播到网络上的所有主机，并接收返回消息，以此确定目标的物理地址。</p>
<p>　　收到返回消息后将该IP地址和物理地址存入本机ARP缓存中并保留一定时间，下次请求时直接查询ARP缓存以节约资源。</p>
<p>　　地址解析协议是建立在网络中各个主机互相信任的基础上的，网络上的主机可以自主发送ARP应答消息，其他主机收到应答报文时不会检测该报文的真实性就会将其记入本机ARP缓存；由此攻击者就可以向某一主机发送伪ARP应答报文，使其发送的信息无法到达预期的主机或到达错误的主机，这就构成了一个ARP欺骗。ARP命令可用于查询本机ARP缓存中IP地址和MAC地址的对应关系、添加或删除静态对应关系等。相关协议有RARP、代理ARP。NDP用于在IPv6中代替地址解析协议。</p>
<h3 id="三、广域网与路由器"><a href="#三、广域网与路由器" class="headerlink" title="三、广域网与路由器"></a>三、广域网与路由器</h3><p><img src="https://raw.githubusercontent.com/suliangxu/MyHexoPicture/master/python%E5%85%A8%E6%A0%88/%E7%AC%AC01%E9%83%A8%E5%88%86%EF%BC%9A%E5%9F%BA%E7%A1%80%2B%E6%A8%A1%E5%9D%97%2B%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%2B%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B/%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B/13.png" alt></p>
<h4 id="1、网关"><a href="#1、网关" class="headerlink" title="1、网关"></a>1、网关</h4><p>​        大家都知道，从一个房间走到另一个房间，必然要经过一扇门。同样，从一个网络向另一个网络发送消息，也必须经过一道“关口”，这道关口就是网关。顾名思义网关（Gateway）就是一个网络连接到另一个网络的“关口”。也就是网络关卡。</p>
<p>​        网关(Gateway)又称网间连接器、协议转换器。默认网关在网络层上以实现网络互连，是最复杂的网络互连设备，仅用于两个高层协议不同的网络互连。网关的结构也和路由器类似，不同的是互连层。网关既可以用于广域网互连，也可以用于局域网互连 [1]  。</p>
<p>​        网关ip：局域网内的机器访问公网ip，就通过网关访问</p>
<h4 id="2、路由器"><a href="#2、路由器" class="headerlink" title="2、路由器"></a>2、路由器</h4><p>​        路由器（Router），是连接因特网中各局域网、广域网的设备，它会根据信道的情况自动选择和设定路由，以最佳路径，按前后顺序发送信号。 路由器是互联网络的枢纽，”交通警察”。目前路由器已经广泛应用于各行各业，各种不同档次的产品已成为实现各种骨干网内部连接、骨干网间互联和骨干网与互联网互联互通业务的主力军。路由和交换机之间的主要区别就是交换机发生在OSI参考模型第二层（数据链路层），而路由发生在第三层，即网络层。这一区别决定了路由和交换机在移动信息的过程中需使用不同的控制信息，所以说两者实现各自功能的方式是不同的。</p>
<p>　　路由器（Router）又称网关设备（Gateway）是用于连接多个逻辑上分开的网络，所谓逻辑网络是代表一个单独的网络或者一个子网。当数据从一个子网传输到另一个子网时，可通过路由器的路由功能来完成。因此，路由器具有判断网络地址和选择IP路径的功能，它能在多网络互联环境中，建立灵活的连接，可用完全不同的数据分组和介质访问方法连接各种子网，路由器只接受源站或其他路由器的信息，属网络层的一种互联设备。</p>
<h4 id="3、局域网"><a href="#3、局域网" class="headerlink" title="3、局域网"></a>3、局域网</h4><p>​        局域网（Local Area Network，LAN）是指在某一区域内由多台计算机互联成的计算机组。一般是方圆几千米以内。局域网可以实现文件管理、应用软件共享、打印机共享、工作组内的日程安排、电子邮件和传真通信服务等功能。局域网是封闭型的，可以由办公室内的两台计算机组成，也可以由一个公司内的上千台计算机组成。</p>
<h3 id="三、子网掩码"><a href="#三、子网掩码" class="headerlink" title="三、子网掩码"></a>三、子网掩码</h3><p>​    所谓”子网掩码”，就是表示子网络特征的一个参数。它在形式上等同于IP地址，也是一个32位二进制数字，它的网络部分全部为1，主机部分全部为0。比如，IP地址172.16.10.1，如果已知网络部分是前24位，主机部分是后8位，那么子网络掩码就是11111111.11111111.11111111.00000000，写成十进制就是255.255.255.0。</p>
<p>　　<strong>知道”子网掩码”，我们就能判断，任意两个IP地址是否处在同一个子网络。</strong>方法是将两个IP地址与子网掩码分别进行AND运算（两个数位都为1，运算结果为1，否则为0），然后比较结果是否相同，如果是的话，就表明它们在同一个子网络中，否则就不是。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">比如，已知IP地址172.16.10.1和172.16.10.2的子网掩码都是255.255.255.0，请问它们是否在同一个子网络？两者与子网掩码分别进行AND运算，</span><br><span class="line"></span><br><span class="line">172.16.10.1：10101100.00010000.00001010.000000001</span><br><span class="line">255255.255.255.0:11111111.11111111.11111111.00000000</span><br><span class="line">AND运算得网络地址结果：10101100.00010000.00001010.000000001-&gt;172.16.10.0</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">172.16.10.2：10101100.00010000.00001010.00000010</span><br><span class="line">255255.255.255.0:11111111.11111111.11111111.00000000</span><br><span class="line">AND运算得网络地址结果：10101100.00010000.00001010.000000001-&gt;172.16.10.0</span><br><span class="line">结果都是172.16.10.0，因此它们在同一个子网络。</span><br></pre></td></tr></table></figure>

<p>总结一下，IP协议的作用主要有两个，一个是为每一台计算机分配IP地址，另一个是确定哪些地址在同一个子网络。</p>
<h3 id="四、tcp协议和udp协议"><a href="#四、tcp协议和udp协议" class="headerlink" title="四、tcp协议和udp协议"></a>四、tcp协议和udp协议</h3><p>​        用于应用程序之间的通信。如果说ip地址和mac地址帮我们确定唯一的一台机器，那么我们怎么找到一台机器上的一个软件呢？</p>
<h4 id="1、端口"><a href="#1、端口" class="headerlink" title="1、端口"></a>1、端口</h4><p>​        我们知道，一台拥有IP地址的主机可以提供许多服务，比如Web服务、FTP服务、SMTP服务等，这些服务完全可以通过1个IP地址来实现。那么，主机是怎样区分不同的网络服务呢？显然不能只靠IP地址，因为IP 地址与网络服务的关系是一对多的关系。实际上是通过“IP地址+端口号”来区分不同的服务的。</p>
<p>​        在计算机上，每一个需要网络通信的程序，都会开一个端口。在同一时间只会有一个程序占用一个端口，不可能在同一时间有两个及以上程序占用同一个端口。所以通过端口来找到程序。</p>
<p>​        端口的范围： 0 - 65535， 一般我们使用8000之后的端口。靠前的端口有可能是系统默认使用的。</p>
<p>​        IP —— 确定唯一一台机器</p>
<p>​        端口 —— 确定唯一一台程序</p>
<p>​        IP+端口 —— 找到唯一的一台机器上的唯一的一个程序</p>
<h4 id="2、TCP协议"><a href="#2、TCP协议" class="headerlink" title="2、TCP协议"></a>2、TCP协议</h4><p>​        当应用程序希望通过 TCP 与另一个应用程序通信时，它会发送一个通信请求。这个请求必须被送到一个确切的地址。在双方“握手”之后，TCP 将在两个应用程序之间建立一个全双工 (full-duplex) 的通信。</p>
<p>​        全双工：双方都能互相收发消息。</p>
<p>　　这个全双工的通信将占用两个计算机之间的通信线路，直到它被一方或双方关闭为止。</p>
<p><img src="https://raw.githubusercontent.com/suliangxu/MyHexoPicture/master/python%E5%85%A8%E6%A0%88/%E7%AC%AC01%E9%83%A8%E5%88%86%EF%BC%9A%E5%9F%BA%E7%A1%80%2B%E6%A8%A1%E5%9D%97%2B%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%2B%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B/%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B/14.png" alt></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">tcp的三次握手:</span><br><span class="line">			TCP是因特网中的传输层协议，使用三次握手协议建立连接。当主动方发出SYN连接请求后，等待对方回答SYN+ACK[1]，并最终对对方的 SYN 执行 ACK 确认。这种建立连接的方法可以防止产生错误的连接。[1] </span><br><span class="line">TCP三次握手的过程如下：</span><br><span class="line">客户端发送SYN（SEQ=x）报文给服务器端，进入SYN_SEND状态。</span><br><span class="line">服务器端收到SYN报文，回应一个SYN （SEQ=y）ACK(ACK=x+1）报文，进入SYN_RECV状态。</span><br><span class="line">客户端收到服务器端的SYN报文，回应一个ACK(ACK=y+1）报文，进入Established状态。</span><br><span class="line">三次握手完成，TCP客户端和服务器端成功地建立连接，可以开始传输数据了。</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">tcp的四次挥手:</span><br><span class="line">建立一个连接需要三次握手，而终止一个连接要经过四次握手，这是由TCP的半关闭（half-close）造成的。</span><br><span class="line">(1) 某个应用进程首先调用close，称该端执行“主动关闭”（active close）。该端的TCP于是发送一个FIN分节，表示数据发送完毕。</span><br><span class="line">(2) 接收到这个FIN的对端执行 “被动关闭”（passive close），这个FIN由TCP确认。</span><br><span class="line">注意：FIN的接收也作为一个文件结束符（end-of-file）传递给接收端应用进程，放在已排队等候该应用进程接收的任何其他数据之后，因为，FIN的接收意味着接收端应用进程在相应连接上再无额外数据可接收。</span><br><span class="line">(3) 一段时间后，接收到这个文件结束符的应用进程将调用close关闭它的套接字。这导致它的TCP也发送一个FIN。</span><br><span class="line">(4) 接收这个最终FIN的原发送端TCP（即执行主动关闭的那一端）确认这个FIN。[1] </span><br><span class="line">既然每个方向都需要一个FIN和一个ACK，因此通常需要4个分节。</span><br><span class="line">注意：</span><br><span class="line">(1) “通常”是指，某些情况下，步骤1的FIN随数据一起发送，另外，步骤2和步骤3发送的分节都出自执行被动关闭那一端，有可能被合并成一个分节。[2] </span><br><span class="line">(2) 在步骤2与步骤3之间，从执行被动关闭一端到执行主动关闭一端流动数据是可能的，这称为“半关闭”（half-close）。</span><br><span class="line">(3) 当一个Unix进程无论自愿地（调用exit或从main函数返回）还是非自愿地（收到一个终止本进程的信号）终止时，所有打开的描述符都被关闭，这也导致仍然打开的任何TCP连接上也发出一个FIN。</span><br><span class="line">无论是客户还是服务器，任何一端都可以执行主动关闭。通常情况是，客户执行主动关闭，但是某些协议，例如，HTTP/1.0却由服务器执行主动关闭。[2]</span><br></pre></td></tr></table></figure>

<h4 id="3、UDP协议"><a href="#3、UDP协议" class="headerlink" title="3、UDP协议"></a>3、UDP协议</h4><p>　　当应用程序希望通过UDP与一个应用程序通信时，传输数据之前源端和终端不建立连接。</p>
<p>　　当它想传送时就简单地去抓取来自应用程序的数据，并尽可能快地把它扔到网络上。</p>
<h3 id="五、tcp和udp的对比"><a href="#五、tcp和udp的对比" class="headerlink" title="五、tcp和udp的对比"></a>五、tcp和udp的对比</h3><p>​        TCP—传输控制协议,提供的是面向连接、可靠的字节流服务。当客户和服务器彼此交换数据前，必须先在双方之间建立一个TCP连接，之后才能传输数据。TCP提供超时重发，丢弃重复数据，检验数据，流量控制等功能，保证数据能从一端传到另一端。<br>​        UDP—用户数据报协议，是一个简单的面向数据报的运输层协议。UDP不提供可靠性，它只是把应用程序传给IP层的数据报发送出去，但是并不能保证它们能到达目的地。由于UDP在传输数据报前不用在客户和服务器之间建立一个连接，且没有超时重发等机制，故而传输速度很快</p>
<p>​        tcp：打电话</p>
<p>​        udp：发短信</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">更多：</span><br><span class="line">		现在Internet上流行的协议是TCP/IP协议，该协议中对低于1024的端口都有确切的定义，他们对应着Internet上一些常见的服务。这些常见的服务可以分为使用TCP端口（面向连接）和使用UDP端口（面向无连接）两种。 </span><br><span class="line">		说到TCP和UDP,首先要明白“连接”和“无连接”的含义，他们的关系可以用一个形象地比喻来说明，就是打电话和写信。两个人如果要通话，首先要建立连接——即打电话时的拨号，等待响应后——即接听电话后，才能相互传递信息，最后还要断开连接——即挂电话。写信就比较简单了，填写好收信人的地址后将信投入邮筒，收信人就可以收到了。从这个分析可以看出，建立连接可以在需要痛心地双方建立一个传递信息的通道，在发送方发送请求连接信息接收方响应后，由于是在接受方响应后才开始传递信息，而且是在一个通道中传送，因此接受方能比较完整地收到发送方发出的信息，即信息传递的可靠性比较高。但也正因为需要建立连接，使资源开销加大（在建立连接前必须等待接受方响应，传输信息过程中必须确认信息是否传到及断开连接时发出相应的信号等），独占一个通道，在断开连接钱不能建立另一个连接，即两人在通话过程中第三方不能打入电话。而无连接是一开始就发送信息（严格说来，这是没有开始、结束的），只是一次性的传递，是先不需要接受方的响应，因而在一定程度上也无法保证信息传递的可靠性了，就像写信一样，我们只是将信寄出去，却不能保证收信人一定可以收到。 </span><br><span class="line">		TCP是面向连接的，有比较高的可靠性， 一些要求比较高的服务一般使用这个协议，如FTP、Telnet、SMTP、HTTP、POP3等。</span><br><span class="line">而UDP是面向无连接的，使用这个协议的常见服务有DNS、SNMP、QQ等。对于QQ必须另外说明一下，QQ2003以前是只使用UDP协议的，其服务器使用8000端口，侦听是否有信息传来，客户端使用4000端口，向外发送信息（这也就不难理解在一般的显IP的QQ版本中显示好友的IP地址信息中端口常为4000或其后续端口的原因了），即QQ程序既接受服务又提供服务，在以后的QQ版本中也支持使用TCP协议了。</span><br></pre></td></tr></table></figure>

<h2 id="（二）互联网协议与osi模型"><a href="#（二）互联网协议与osi模型" class="headerlink" title="（二）互联网协议与osi模型"></a>（二）互联网协议与osi模型</h2><p>互联网协议按照功能不同分为osi七层或tcp/ip五层或tcp/ip四层</p>
<p><img src="https://raw.githubusercontent.com/suliangxu/MyHexoPicture/master/python%E5%85%A8%E6%A0%88/%E7%AC%AC01%E9%83%A8%E5%88%86%EF%BC%9A%E5%9F%BA%E7%A1%80%2B%E6%A8%A1%E5%9D%97%2B%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%2B%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B/%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B/15.png" alt></p>
<h3 id="一、每层运行常见物理设备"><a href="#一、每层运行常见物理设备" class="headerlink" title="一、每层运行常见物理设备"></a>一、每层运行常见物理设备</h3><p><img src="https://raw.githubusercontent.com/suliangxu/MyHexoPicture/master/python%E5%85%A8%E6%A0%88/%E7%AC%AC01%E9%83%A8%E5%88%86%EF%BC%9A%E5%9F%BA%E7%A1%80%2B%E6%A8%A1%E5%9D%97%2B%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%2B%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B/%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B/16.png" alt></p>
<h3 id="二、每层运行常见的协议"><a href="#二、每层运行常见的协议" class="headerlink" title="二、每层运行常见的协议"></a>二、每层运行常见的协议</h3><p><img src="https://raw.githubusercontent.com/suliangxu/MyHexoPicture/master/python%E5%85%A8%E6%A0%88/%E7%AC%AC01%E9%83%A8%E5%88%86%EF%BC%9A%E5%9F%BA%E7%A1%80%2B%E6%A8%A1%E5%9D%97%2B%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%2B%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B/%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B/17.png" alt></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/07/24/python全栈/第01部分：基础+模块+面向对象+网络编程/模块/常用模块（一）/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="John Doe">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/07/24/python全栈/第01部分：基础+模块+面向对象+网络编程/模块/常用模块（一）/" itemprop="url">常用模块（一）</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-07-24T00:25:31+08:00">
                2019-07-24
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/python全栈-01部分-模块和包/" itemprop="url" rel="index">
                    <span itemprop="name">python全栈 -01部分 -模块和包</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>[TOC]</p>
<h2 id="（一）认识模块"><a href="#（一）认识模块" class="headerlink" title="（一）认识模块"></a>（一）认识模块</h2><h3 id="一、什么是模块"><a href="#一、什么是模块" class="headerlink" title="一、什么是模块"></a>一、什么是模块</h3><h4 id="1、什么是模块"><a href="#1、什么是模块" class="headerlink" title="1、什么是模块"></a>1、什么是模块</h4><p>常见的场景：一个模块就是一个包含了python定义和声明的文件，文件名就是模块名字加上.py的后缀。</p>
<p>   但其实import加载的模块分为四个通用类别：　</p>
<ol>
<li>使用python编写的代码（.py文件）</li>
<li>已被编译为共享库或DLL的C或C++扩展</li>
<li>包好一组模块的包</li>
<li>使用C编写并链接到python解释器的内置模块</li>
</ol>
<h4 id="2、为何要使用模块"><a href="#2、为何要使用模块" class="headerlink" title="2、为何要使用模块"></a>2、为何要使用模块</h4><p>​        如果你退出python解释器然后重新进入，那么你之前定义的函数或者变量都将丢失，因此我们通常将程序写到文件中以便永久保存下来，需要时就通过python test.py方式去执行，此时test.py被称为脚本script。</p>
<p>​        随着程序的发展，功能越来越多，为了方便管理，我们通常将程序分成一个个的文件，这样做程序的结构更清晰，方便管理。这时我们不仅仅可以把这些文件当做脚本去执行，还可以把他们当做模块来导入到其他的模块中，实现了功能的重复利用</p>
<h3 id="二、模块的导入和使用"><a href="#二、模块的导入和使用" class="headerlink" title="二、模块的导入和使用"></a>二、模块的导入和使用</h3><p>见 “模块和包”</p>
<h2 id="（二）常用模块（一）"><a href="#（二）常用模块（一）" class="headerlink" title="（二）常用模块（一）"></a>（二）常用模块（一）</h2><h3 id="一、collections模块"><a href="#一、collections模块" class="headerlink" title="一、collections模块"></a>一、collections模块</h3><p>在内置数据类型（dict、list、set、tuple）的基础上，collections模块还提供了几个额外的数据类型：Counter、deque、defaultdict、namedtuple和OrderedDict等。</p>
<ol>
<li>namedtuple: 生成可以使用名字来访问元素内容的tuple</li>
<li>deque: 双端队列，可以快速的从另外一侧追加和推出对象</li>
<li>Counter: 计数器，主要用来计数 </li>
<li>OrderedDict: 有序字典 </li>
<li>defaultdict: 带有默认值的字典</li>
</ol>
<h4 id="1、namedtuple"><a href="#1、namedtuple" class="headerlink" title="1、namedtuple"></a>1、namedtuple</h4><p>我们知道tuple可以表示不变集合，例如，一个点的二维坐标就可以表示成：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>p = (<span class="number">1</span>, <span class="number">2</span>)</span><br></pre></td></tr></table></figure>

<p>但是，看到(1, 2)，很难看出这个tuple是用来表示一个坐标的。</p>
<p>这时，namedtuple就派上了用场：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">from</span> collections <span class="keyword">import</span> namedtuple</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>Point = namedtuple(<span class="string">'Point'</span>, [<span class="string">'x'</span>, <span class="string">'y'</span>])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>p = Point(<span class="number">1</span>, <span class="number">2</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>p.x</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>p.y</span><br></pre></td></tr></table></figure>

<p>类似的，如果要用坐标和半径表示一个圆，也可以用namedtuple定义：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#namedtuple('名称', [属性list]):</span></span><br><span class="line">Circle = namedtuple(<span class="string">'Circle'</span>, [<span class="string">'x'</span>, <span class="string">'y'</span>, <span class="string">'r'</span>])</span><br></pre></td></tr></table></figure>

<h4 id="2、deque"><a href="#2、deque" class="headerlink" title="2、deque"></a>2、deque</h4><p>​        使用list存储数据时，按索引访问元素很快，但是插入和删除元素就很慢了，因为list是线性存储，数据量大的时候，插入和删除效率很低。</p>
<p>​         deque是为了高效实现插入和删除操作的双向列表，适合用于队列和栈：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">from</span> collections <span class="keyword">import</span> deque</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>q = deque([<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>q.append(<span class="string">'x'</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>q.appendleft(<span class="string">'y'</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>q</span><br><span class="line">deque([<span class="string">'y'</span>, <span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>, <span class="string">'x'</span>])</span><br></pre></td></tr></table></figure>

<p>deque除了实现list的<code>append()</code>和<code>pop()</code>外，还支持<code>appendleft()</code>和<code>popleft()</code>，这样就可以非常高效地往头部添加或删除元素。</p>
<h4 id="3、OrderedDict"><a href="#3、OrderedDict" class="headerlink" title="3、OrderedDict"></a>3、OrderedDict</h4><p>使用dict时，Key是无序的。在对dict做迭代时，我们无法确定Key的顺序。</p>
<p>如果要保持Key的顺序，可以用<code>OrderedDict</code>：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">from</span> collections <span class="keyword">import</span> OrderedDict</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>d = dict([(<span class="string">'a'</span>, <span class="number">1</span>), (<span class="string">'b'</span>, <span class="number">2</span>), (<span class="string">'c'</span>, <span class="number">3</span>)])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>d <span class="comment"># dict的Key是无序的</span></span><br><span class="line">&#123;<span class="string">'a'</span>: <span class="number">1</span>, <span class="string">'c'</span>: <span class="number">3</span>, <span class="string">'b'</span>: <span class="number">2</span>&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>od = OrderedDict([(<span class="string">'a'</span>, <span class="number">1</span>), (<span class="string">'b'</span>, <span class="number">2</span>), (<span class="string">'c'</span>, <span class="number">3</span>)])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>od <span class="comment"># OrderedDict的Key是有序的</span></span><br><span class="line">OrderedDict([(<span class="string">'a'</span>, <span class="number">1</span>), (<span class="string">'b'</span>, <span class="number">2</span>), (<span class="string">'c'</span>, <span class="number">3</span>)])</span><br></pre></td></tr></table></figure>

<p>注意，<code>OrderedDict</code>的Key会按照插入的顺序排列，不是Key本身排序：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>od = OrderedDict()</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>od[<span class="string">'z'</span>] = <span class="number">1</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>od[<span class="string">'y'</span>] = <span class="number">2</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>od[<span class="string">'x'</span>] = <span class="number">3</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>od.keys() <span class="comment"># 按照插入的Key的顺序返回</span></span><br><span class="line">[<span class="string">'z'</span>, <span class="string">'y'</span>, <span class="string">'x'</span>]</span><br></pre></td></tr></table></figure>

<h4 id="4、defaultdict"><a href="#4、defaultdict" class="headerlink" title="4、defaultdict"></a>4、defaultdict</h4><p>有如下值集合 [<code>11</code>,<code>22</code>,<code>33</code>,<code>44</code>,<code>55</code>,<code>66</code>,<code>77</code>,<code>88</code>,<code>99</code>,<code>90.</code>..]，将所有大于 66的值保存至字典的第一个key中，将小于 66的值保存至第二个key的值中。<br>即： {k1: 大于66, k2: 小于66}</p>
<p><strong>原生字典解决方法</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">values = [<span class="number">11</span>, <span class="number">22</span>, <span class="number">33</span>,<span class="number">44</span>,<span class="number">55</span>,<span class="number">66</span>,<span class="number">77</span>,<span class="number">88</span>,<span class="number">99</span>,<span class="number">90</span>]</span><br><span class="line"></span><br><span class="line">my_dict = &#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> value <span class="keyword">in</span>  values:</span><br><span class="line">    <span class="keyword">if</span> value&gt;<span class="number">66</span>:</span><br><span class="line">        <span class="keyword">if</span> my_dict.has_key(<span class="string">'k1'</span>):</span><br><span class="line">            my_dict[<span class="string">'k1'</span>].append(value)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            my_dict[<span class="string">'k1'</span>] = [value]</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">if</span> my_dict.has_key(<span class="string">'k2'</span>):</span><br><span class="line">            my_dict[<span class="string">'k2'</span>].append(value)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            my_dict[<span class="string">'k2'</span>] = [value]</span><br></pre></td></tr></table></figure>

<p><strong>defaultdict字典解决方法</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> collections <span class="keyword">import</span> defaultdict</span><br><span class="line"></span><br><span class="line">values = [<span class="number">11</span>, <span class="number">22</span>, <span class="number">33</span>,<span class="number">44</span>,<span class="number">55</span>,<span class="number">66</span>,<span class="number">77</span>,<span class="number">88</span>,<span class="number">99</span>,<span class="number">90</span>]</span><br><span class="line"></span><br><span class="line">my_dict = defaultdict(list)</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> value <span class="keyword">in</span>  values:</span><br><span class="line">    <span class="keyword">if</span> value&gt;<span class="number">66</span>:</span><br><span class="line">        my_dict[<span class="string">'k1'</span>].append(value)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        my_dict[<span class="string">'k2'</span>].append(value)</span><br></pre></td></tr></table></figure>

<p>使用<code>dict</code>时，如果引用的Key不存在，就会抛出<code>KeyError</code>。如果希望key不存在时，返回一个默认值，就可以用<code>defaultdict</code>：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">from</span> collections <span class="keyword">import</span> defaultdict</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>dd = defaultdict(<span class="keyword">lambda</span>: <span class="string">'N/A'</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>dd[<span class="string">'key1'</span>] = <span class="string">'abc'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>dd[<span class="string">'key1'</span>] <span class="comment"># key1存在</span></span><br><span class="line"><span class="string">'abc'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>dd[<span class="string">'key2'</span>] <span class="comment"># key2不存在，返回默认值</span></span><br><span class="line"><span class="string">'N/A'</span></span><br></pre></td></tr></table></figure>

<h4 id="5、Counter"><a href="#5、Counter" class="headerlink" title="5、Counter"></a>5、Counter</h4><p>Counter类的目的是用来跟踪值出现的次数。它是一个无序的容器类型，以字典的键值对形式存储，其中元素作为key，其计数作为value。计数值可以是任意的Interger（包括0和负数）。Counter类和其他语言的bags或multisets很相似。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">c = Counter(<span class="string">'abcdeabcdabcaba'</span>)</span><br><span class="line"><span class="keyword">print</span> c</span><br><span class="line">输出：Counter(&#123;<span class="string">'a'</span>: <span class="number">5</span>, <span class="string">'b'</span>: <span class="number">4</span>, <span class="string">'c'</span>: <span class="number">3</span>, <span class="string">'d'</span>: <span class="number">2</span>, <span class="string">'e'</span>: <span class="number">1</span>&#125;)</span><br></pre></td></tr></table></figure>

<h3 id="二、时间模块"><a href="#二、时间模块" class="headerlink" title="二、时间模块"></a>二、时间模块</h3><p>和时间有关系的我们就要用到时间模块。在使用模块之前，应该首先导入这个模块。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">#常用方法</span><br><span class="line">1.time.sleep(secs)</span><br><span class="line">(线程)推迟指定的时间运行。单位为秒。</span><br><span class="line">2.time.time()</span><br><span class="line">获取当前时间戳</span><br></pre></td></tr></table></figure>

<h4 id="1、表示时间的三种方式"><a href="#1、表示时间的三种方式" class="headerlink" title="1、表示时间的三种方式"></a>1、表示时间的三种方式</h4><p>在Python中，通常有这三种方式来表示时间：时间戳、元组(struct_time)、格式化的时间字符串：</p>
<ol>
<li><p>时间戳(timestamp) ：通常来说，时间戳表示的是从1970年1月1日00:00:00开始按秒计算的偏移量。我们运行“type(time.time())”，返回的是float类型。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">python中时间日期格式化符号：</span><br><span class="line">%y 两位数的年份表示（00-99）</span><br><span class="line">%Y 四位数的年份表示（000-9999）</span><br><span class="line">%m 月份（01-12）</span><br><span class="line">%d 月内中的一天（0-31）</span><br><span class="line">%H 24小时制小时数（0-23）</span><br><span class="line">%I 12小时制小时数（01-12）</span><br><span class="line">%M 分钟数（00=59）</span><br><span class="line">%S 秒（00-59）</span><br><span class="line">%a 本地简化星期名称</span><br><span class="line">%A 本地完整星期名称</span><br><span class="line">%b 本地简化的月份名称</span><br><span class="line">%B 本地完整的月份名称</span><br><span class="line">%c 本地相应的日期表示和时间表示</span><br><span class="line">%j 年内的一天（001-366）</span><br><span class="line">%p 本地A.M.或P.M.的等价符</span><br><span class="line">%U 一年中的星期数（00-53）星期天为星期的开始</span><br><span class="line">%w 星期（0-6），星期天为星期的开始</span><br><span class="line">%W 一年中的星期数（00-53）星期一为星期的开始</span><br><span class="line">%x 本地相应的日期表示</span><br><span class="line">%X 本地相应的时间表示</span><br><span class="line">%Z 当前时区的名称</span><br><span class="line">%% %号本身</span><br></pre></td></tr></table></figure>



</li>
</ol>
<ol start="2">
<li><p>格式化的时间字符串(Format String)： ‘1999-12-06’</p>
<table>
<thead>
<tr>
<th align="left">索引（Index）</th>
<th>属性（Attribute）</th>
<th align="left">值（Values）</th>
</tr>
</thead>
<tbody><tr>
<td align="left">0</td>
<td>tm_year（年）</td>
<td align="left">比如2011</td>
</tr>
<tr>
<td align="left">1</td>
<td>tm_mon（月）</td>
<td align="left">1 - 12</td>
</tr>
<tr>
<td align="left">2</td>
<td>tm_mday（日）</td>
<td align="left">1 - 31</td>
</tr>
<tr>
<td align="left">3</td>
<td>tm_hour（时）</td>
<td align="left">0 - 23</td>
</tr>
<tr>
<td align="left">4</td>
<td>tm_min（分）</td>
<td align="left">0 - 59</td>
</tr>
<tr>
<td align="left">5</td>
<td>tm_sec（秒）</td>
<td align="left">0 - 60</td>
</tr>
<tr>
<td align="left">6</td>
<td>tm_wday（weekday）</td>
<td align="left">0 - 6（0表示周一）</td>
</tr>
<tr>
<td align="left">7</td>
<td>tm_yday（一年中的第几天）</td>
<td align="left">1 - 366</td>
</tr>
<tr>
<td align="left">8</td>
<td>tm_isdst（是否是夏令时）</td>
<td align="left">默认为0</td>
</tr>
</tbody></table>
</li>
</ol>
<p>首先，我们先导入time模块，来认识一下python中表示时间的几种格式：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#导入时间模块</span></span><br><span class="line">&gt;&gt;&gt;<span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line"><span class="comment">#时间戳</span></span><br><span class="line">&gt;&gt;&gt;time.time()</span><br><span class="line"><span class="number">1500875844.800804</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#时间字符串</span></span><br><span class="line">&gt;&gt;&gt;time.strftime(<span class="string">"%Y-%m-%d %X"</span>)</span><br><span class="line"><span class="string">'2017-07-24 13:54:37'</span></span><br><span class="line">&gt;&gt;&gt;time.strftime(<span class="string">"%Y-%m-%d %H-%M-%S"</span>)</span><br><span class="line"><span class="string">'2017-07-24 13-55-04'</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#时间元组:localtime将一个时间戳转换为当前时区的struct_time</span></span><br><span class="line">time.localtime()</span><br><span class="line">time.struct_time(tm_year=<span class="number">2017</span>, tm_mon=<span class="number">7</span>, tm_mday=<span class="number">24</span>,</span><br><span class="line">　　　　　　　　　　tm_hour=<span class="number">13</span>, tm_min=<span class="number">59</span>, tm_sec=<span class="number">37</span>, </span><br><span class="line">                 tm_wday=<span class="number">0</span>, tm_yday=<span class="number">205</span>, tm_isdst=<span class="number">0</span>)</span><br></pre></td></tr></table></figure>

<p><strong><em>小结：</em></strong></p>
<p>时间戳是计算机能够识别的时间；时间字符串是人能够看懂的时间；元组则是用来操作时间的</p>
<h4 id="2、几种格式之间的转换"><a href="#2、几种格式之间的转换" class="headerlink" title="2、几种格式之间的转换"></a>2、几种格式之间的转换</h4><p><img src="https://images2015.cnblogs.com/blog/827651/201707/827651-20170724144151992-1508626640.png" alt></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#时间戳--&gt;结构化时间</span></span><br><span class="line"><span class="comment">#time.gmtime(时间戳)    #UTC时间，与英国伦敦当地时间一致</span></span><br><span class="line"><span class="comment">#time.localtime(时间戳) #当地时间。例如我们现在在北京执行这个方法：与UTC时间相差8小时，UTC时间+8小时 = 北京时间 </span></span><br><span class="line">&gt;&gt;&gt;time.gmtime(<span class="number">1500000000</span>)</span><br><span class="line">time.struct_time(tm_year=<span class="number">2017</span>, tm_mon=<span class="number">7</span>, tm_mday=<span class="number">14</span>, tm_hour=<span class="number">2</span>, tm_min=<span class="number">40</span>, tm_sec=<span class="number">0</span>, tm_wday=<span class="number">4</span>, tm_yday=<span class="number">195</span>, tm_isdst=<span class="number">0</span>)</span><br><span class="line">&gt;&gt;&gt;time.localtime(<span class="number">1500000000</span>)</span><br><span class="line">time.struct_time(tm_year=<span class="number">2017</span>, tm_mon=<span class="number">7</span>, tm_mday=<span class="number">14</span>, tm_hour=<span class="number">10</span>, tm_min=<span class="number">40</span>, tm_sec=<span class="number">0</span>, tm_wday=<span class="number">4</span>, tm_yday=<span class="number">195</span>, tm_isdst=<span class="number">0</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">#结构化时间--&gt;时间戳　</span></span><br><span class="line"><span class="comment">#time.mktime(结构化时间)</span></span><br><span class="line">&gt;&gt;&gt;time_tuple = time.localtime(<span class="number">1500000000</span>)</span><br><span class="line">&gt;&gt;&gt;time.mktime(time_tuple)</span><br><span class="line"><span class="number">1500000000.0</span></span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#结构化时间--&gt;字符串时间</span></span><br><span class="line"><span class="comment">#time.strftime("格式定义","结构化时间")  结构化时间参数若不传，则显示当前时间</span></span><br><span class="line">&gt;&gt;&gt;time.strftime(<span class="string">"%Y-%m-%d %X"</span>)</span><br><span class="line"><span class="string">'2017-07-24 14:55:36'</span></span><br><span class="line">&gt;&gt;&gt;time.strftime(<span class="string">"%Y-%m-%d"</span>,time.localtime(<span class="number">1500000000</span>))</span><br><span class="line"><span class="string">'2017-07-14'</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#字符串时间--&gt;结构化时间</span></span><br><span class="line"><span class="comment">#time.strptime(时间字符串,字符串对应格式)</span></span><br><span class="line">&gt;&gt;&gt;time.strptime(<span class="string">"2017-03-16"</span>,<span class="string">"%Y-%m-%d"</span>)</span><br><span class="line">time.struct_time(tm_year=<span class="number">2017</span>, tm_mon=<span class="number">3</span>, tm_mday=<span class="number">16</span>, tm_hour=<span class="number">0</span>, tm_min=<span class="number">0</span>, tm_sec=<span class="number">0</span>, tm_wday=<span class="number">3</span>, tm_yday=<span class="number">75</span>, tm_isdst=<span class="number">-1</span>)</span><br><span class="line">&gt;&gt;&gt;time.strptime(<span class="string">"07/24/2017"</span>,<span class="string">"%m/%d/%Y"</span>)</span><br><span class="line">time.struct_time(tm_year=<span class="number">2017</span>, tm_mon=<span class="number">7</span>, tm_mday=<span class="number">24</span>, tm_hour=<span class="number">0</span>, tm_min=<span class="number">0</span>, tm_sec=<span class="number">0</span>, tm_wday=<span class="number">0</span>, tm_yday=<span class="number">205</span>, tm_isdst=<span class="number">-1</span>)</span><br></pre></td></tr></table></figure>

<p><img src="https://images2015.cnblogs.com/blog/827651/201707/827651-20170724144235883-1963884021.png" alt></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#结构化时间 --&gt; %a %b %d %H:%M:%S %Y串</span></span><br><span class="line"><span class="comment">#time.asctime(结构化时间) 如果不传参数，直接返回当前时间的格式化串</span></span><br><span class="line">&gt;&gt;&gt;time.asctime(time.localtime(<span class="number">1500000000</span>))</span><br><span class="line"><span class="string">'Fri Jul 14 10:40:00 2017'</span></span><br><span class="line">&gt;&gt;&gt;time.asctime()</span><br><span class="line"><span class="string">'Mon Jul 24 15:18:33 2017'</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#时间戳 --&gt; %a %b %d %H:%M:%S %Y串</span></span><br><span class="line"><span class="comment">#time.ctime(时间戳)  如果不传参数，直接返回当前时间的格式化串</span></span><br><span class="line">&gt;&gt;&gt;time.ctime()</span><br><span class="line"><span class="string">'Mon Jul 24 15:19:07 2017'</span></span><br><span class="line">&gt;&gt;&gt;time.ctime(<span class="number">1500000000</span>)</span><br><span class="line"><span class="string">'Fri Jul 14 10:40:00 2017'</span></span><br></pre></td></tr></table></figure>

<p>计算时间差：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> time</span><br><span class="line">true_time=time.mktime(time.strptime(<span class="string">'2017-09-11 08:30:00'</span>,<span class="string">'%Y-%m-%d %H:%M:%S'</span>))</span><br><span class="line">time_now=time.mktime(time.strptime(<span class="string">'2017-09-12 11:00:00'</span>,<span class="string">'%Y-%m-%d %H:%M:%S'</span>))</span><br><span class="line">dif_time=time_now-true_time</span><br><span class="line">struct_time=time.gmtime(dif_time)</span><br><span class="line">print(<span class="string">'过去了%d年%d月%d天%d小时%d分钟%d秒'</span>%(struct_time.tm_year<span class="number">-1970</span>,struct_time.tm_mon<span class="number">-1</span>,</span><br><span class="line">                                       struct_time.tm_mday<span class="number">-1</span>,struct_time.tm_hour,</span><br><span class="line">                                       struct_time.tm_min,struct_time.tm_sec))</span><br></pre></td></tr></table></figure>

<h3 id="三、random模块"><a href="#三、random模块" class="headerlink" title="三、random模块"></a>三、random模块</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> random</span><br><span class="line"><span class="comment">#随机小数</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>random.random()      <span class="comment"># 大于0且小于1之间的小数</span></span><br><span class="line"><span class="number">0.7664338663654585</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>random.uniform(<span class="number">1</span>,<span class="number">3</span>) <span class="comment">#大于1小于3的小数</span></span><br><span class="line"><span class="number">1.6270147180533838</span></span><br><span class="line"><span class="comment">#恒富：发红包</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#随机整数</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>random.randint(<span class="number">1</span>,<span class="number">5</span>)  <span class="comment"># 大于等于1且小于等于5之间的整数</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>random.randrange(<span class="number">1</span>,<span class="number">10</span>,<span class="number">2</span>) <span class="comment"># 大于等于1且小于10之间的奇数</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#随机选择一个返回</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>random.choice([<span class="number">1</span>,<span class="string">'23'</span>,[<span class="number">4</span>,<span class="number">5</span>]])  <span class="comment"># #1或者23或者[4,5]</span></span><br><span class="line"><span class="comment">#随机选择多个返回，返回的个数为函数的第二个参数</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>random.sample([<span class="number">1</span>,<span class="string">'23'</span>,[<span class="number">4</span>,<span class="number">5</span>]],<span class="number">2</span>) <span class="comment"># #列表元素任意2个组合</span></span><br><span class="line">[[<span class="number">4</span>, <span class="number">5</span>], <span class="string">'23'</span>]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#打乱列表顺序</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>item=[<span class="number">1</span>,<span class="number">3</span>,<span class="number">5</span>,<span class="number">7</span>,<span class="number">9</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>random.shuffle(item) <span class="comment"># 打乱次序</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>item</span><br><span class="line">[<span class="number">5</span>, <span class="number">1</span>, <span class="number">3</span>, <span class="number">7</span>, <span class="number">9</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>random.shuffle(item)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>item</span><br><span class="line">[<span class="number">5</span>, <span class="number">9</span>, <span class="number">7</span>, <span class="number">1</span>, <span class="number">3</span>]</span><br></pre></td></tr></table></figure>

<p>生成随机验证码：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> random</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">v_code</span><span class="params">()</span>:</span></span><br><span class="line"></span><br><span class="line">    code = <span class="string">''</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">5</span>):</span><br><span class="line"></span><br><span class="line">        num=random.randint(<span class="number">0</span>,<span class="number">9</span>)</span><br><span class="line">        alf=chr(random.randint(<span class="number">65</span>,<span class="number">90</span>))</span><br><span class="line">        add=random.choice([num,alf])</span><br><span class="line">        code=<span class="string">""</span>.join([code,str(add)])</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> code</span><br><span class="line"></span><br><span class="line">print(v_code())</span><br></pre></td></tr></table></figure>

<h3 id="四、os模块"><a href="#四、os模块" class="headerlink" title="四、os模块"></a>四、os模块</h3><p>os模块是与操作系统交互的一个接口</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">os.makedirs(<span class="string">'dirname1/dirname2'</span>)    可生成多层递归目录</span><br><span class="line">os.removedirs(<span class="string">'dirname1'</span>)    若目录为空，则删除，并递归到上一级目录，如若也为空，则删除，依此类推</span><br><span class="line">os.mkdir(<span class="string">'dirname'</span>)    生成单级目录；相当于shell中mkdir dirname</span><br><span class="line">os.rmdir(<span class="string">'dirname'</span>)    删除单级空目录，若目录不为空则无法删除，报错；相当于shell中rmdir dirname</span><br><span class="line">os.listdir(<span class="string">'dirname'</span>)    列出指定目录下的所有文件和子目录，包括隐藏文件，并以列表方式打印</span><br><span class="line">os.remove()  删除一个文件</span><br><span class="line">os.rename(<span class="string">"oldname"</span>,<span class="string">"newname"</span>)  重命名文件/目录</span><br><span class="line">os.stat(<span class="string">'path/filename'</span>)  获取文件/目录信息</span><br><span class="line"></span><br><span class="line">os.system(<span class="string">"bash command"</span>)  运行shell命令，直接显示</span><br><span class="line">os.popen(<span class="string">"bash command).read()  运行shell命令，获取执行结果</span></span><br><span class="line"><span class="string">os.getcwd() 获取当前工作目录，即当前python脚本工作的目录路径</span></span><br><span class="line"><span class="string">os.chdir("</span>dirname<span class="string">")  改变当前脚本工作目录；相当于shell下cd</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">os.path</span></span><br><span class="line"><span class="string">os.path.abspath(path) 返回path规范化的绝对路径</span></span><br><span class="line"><span class="string">os.path.split(path) 将path分割成目录和文件名二元组返回 </span></span><br><span class="line"><span class="string">os.path.dirname(path) 返回path的目录。其实就是os.path.split(path)的第一个元素 </span></span><br><span class="line"><span class="string">os.path.basename(path) 返回path最后的文件名。如何path以／或\结尾，那么就会返回空值。即os.path.split(path)的第二个元素</span></span><br><span class="line"><span class="string">os.path.exists(path)  如果path存在，返回True；如果path不存在，返回False</span></span><br><span class="line"><span class="string">os.path.isabs(path)  如果path是绝对路径，返回True</span></span><br><span class="line"><span class="string">os.path.isfile(path)  如果path是一个存在的文件，返回True。否则返回False</span></span><br><span class="line"><span class="string">os.path.isdir(path)  如果path是一个存在的目录，则返回True。否则返回False</span></span><br><span class="line"><span class="string">os.path.join(path1[, path2[, ...]])  将多个路径组合后返回，第一个绝对路径之前的参数将被忽略</span></span><br><span class="line"><span class="string">os.path.getatime(path)  返回path所指向的文件或者目录的最后访问时间</span></span><br><span class="line"><span class="string">os.path.getmtime(path)  返回path所指向的文件或者目录的最后修改时间</span></span><br><span class="line"><span class="string">os.path.getsize(path) 返回path的大小</span></span><br></pre></td></tr></table></figure>

<p><strong>注意：</strong>os.stat(‘path/filename’)  获取文件/目录信息 的结构说明</p>
<p>stat结构：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">stat 结构:</span><br><span class="line"></span><br><span class="line">st_mode: inode 保护模式</span><br><span class="line">st_ino: inode 节点号。</span><br><span class="line">st_dev: inode 驻留的设备。</span><br><span class="line">st_nlink: inode 的链接数。</span><br><span class="line">st_uid: 所有者的用户ID。</span><br><span class="line">st_gid: 所有者的组ID。</span><br><span class="line">st_size: 普通文件以字节为单位的大小；包含等待某些特殊文件的数据。</span><br><span class="line">st_atime: 上次访问的时间。</span><br><span class="line">st_mtime: 最后一次修改的时间。</span><br><span class="line">st_ctime: 由操作系统报告的&quot;ctime&quot;。在某些系统上（如Unix）是最新的元数据更改的时间，在其它系统上（如Windows）是创建时间（详细信息参见平台的文档）。</span><br></pre></td></tr></table></figure>

<p>os模块的属性：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">os.sep    输出操作系统特定的路径分隔符，win下为&quot;\\&quot;,Linux下为&quot;/&quot;</span><br><span class="line">os.linesep    输出当前平台使用的行终止符，win下为&quot;\r\n&quot;,Linux下为&quot;\n&quot;</span><br><span class="line">os.pathsep    输出用于分割文件路径的字符串 win下为;,Linux下为:</span><br><span class="line">os.name    输出字符串指示当前使用平台。win-&gt;&apos;nt&apos;; Linux-&gt;&apos;posix&apos;</span><br></pre></td></tr></table></figure>

<h3 id="五、sys模块"><a href="#五、sys模块" class="headerlink" title="五、sys模块"></a>五、sys模块</h3><p>sys模块是与python解释器交互的一个接口</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">sys.argv           命令行参数List，第一个元素是程序本身路径</span><br><span class="line">sys.exit(n)        退出程序，正常退出时exit(0),错误退出sys.exit(1)</span><br><span class="line">sys.version        获取Python解释程序的版本信息</span><br><span class="line">sys.path           返回模块的搜索路径，初始化时使用PYTHONPATH环境变量的值</span><br><span class="line">sys.platform       返回操作系统平台名称</span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    sys.exit(<span class="number">1</span>)</span><br><span class="line"><span class="keyword">except</span> SystemExit <span class="keyword">as</span> e:</span><br><span class="line">    print(e)</span><br></pre></td></tr></table></figure>

<h3 id="六、序列化模块"><a href="#六、序列化模块" class="headerlink" title="六、序列化模块"></a>六、序列化模块</h3><p>什么叫序列化——将原本的字典、列表等内容转换成一个字符串的过程就叫做<strong>序列化</strong>。</p>
<p>为什么要有序列化模块：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">比如，我们在python代码中计算的一个数据需要给另外一段程序使用，那我们怎么给？</span><br><span class="line">现在我们能想到的方法就是存在文件里，然后另一个python程序再从文件里读出来。</span><br><span class="line">但是我们都知道，对于文件来说是没有字典这个概念的，所以我们只能将数据转换成字典放到文件中。</span><br><span class="line">你一定会问，将字典转换成一个字符串很简单，就是str(dic)就可以办到了，为什么我们还要学习序列化模块呢？</span><br><span class="line">没错序列化的过程就是从dic 变成str(dic)的过程。现在你可以通过str(dic)，将一个名为dic的字典转换成一个字符串，</span><br><span class="line">但是你要怎么把一个字符串转换成字典呢？</span><br><span class="line">聪明的你肯定想到了eval()，如果我们将一个字符串类型的字典str_dic传给eval，就会得到一个返回的字典类型了。</span><br><span class="line">eval()函数十分强大，但是eval是做什么的？e官方demo解释为：将字符串str当成有效的表达式来求值并返回计算结果。</span><br><span class="line">ＢＵＴ！强大的函数有代价。安全性是其最大的缺点。</span><br><span class="line">想象一下，如果我们从文件中读出的不是一个数据结构，而是一句&quot;删除文件&quot;类似的破坏性语句，那么后果实在不堪设设想。</span><br><span class="line">而使用eval就要担这个风险。</span><br><span class="line">所以，我们并不推荐用eval方法来进行反序列化操作(将str转换成python中的数据结构)</span><br></pre></td></tr></table></figure>

<p><strong>序列化的目的</strong></p>
<p>1、以某种存储形式使自定义<a href="https://baike.baidu.com/item/对象持久化" target="_blank" rel="noopener">对象持久化</a>；</p>
<p>2、将对象从一个地方传递到另一个地方。</p>
<p>3、使程序更具维护性。</p>
<p><img src="https://images2017.cnblogs.com/blog/827651/201708/827651-20170805234418803-1378181341.png" alt></p>
<p>用于序列化的两个模块</p>
<ul>
<li>json，用于字符串 和 python数据类型间进行转换</li>
<li>pickle，用于python特有的类型 和 python的数据类型间进行转换</li>
</ul>
<h4 id="1、json"><a href="#1、json" class="headerlink" title="1、json"></a>1、json</h4><p>Json模块提供了四个功能：dumps、dump、loads、load</p>
<p><strong>loads和dumps</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> json</span><br><span class="line">dic = &#123;<span class="string">'k1'</span>:<span class="string">'v1'</span>,<span class="string">'k2'</span>:<span class="string">'v2'</span>,<span class="string">'k3'</span>:<span class="string">'v3'</span>&#125;</span><br><span class="line">str_dic = json.dumps(dic)  <span class="comment">#序列化：将一个字典转换成一个字符串</span></span><br><span class="line">print(type(str_dic),str_dic)  <span class="comment">#&lt;class 'str'&gt; &#123;"k3": "v3", "k1": "v1", "k2": "v2"&#125;</span></span><br><span class="line"><span class="comment">#注意，json转换完的字符串类型的字典中的字符串是由""表示的</span></span><br><span class="line"></span><br><span class="line">dic2 = json.loads(str_dic)  <span class="comment">#反序列化：将一个字符串格式的字典转换成一个字典</span></span><br><span class="line"><span class="comment">#注意，要用json的loads功能处理的字符串类型的字典中的字符串必须由""表示</span></span><br><span class="line">print(type(dic2),dic2)  <span class="comment">#&lt;class 'dict'&gt; &#123;'k1': 'v1', 'k2': 'v2', 'k3': 'v3'&#125;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">list_dic = [<span class="number">1</span>,[<span class="string">'a'</span>,<span class="string">'b'</span>,<span class="string">'c'</span>],<span class="number">3</span>,&#123;<span class="string">'k1'</span>:<span class="string">'v1'</span>,<span class="string">'k2'</span>:<span class="string">'v2'</span>&#125;]</span><br><span class="line">str_dic = json.dumps(list_dic) <span class="comment">#也可以处理嵌套的数据类型 </span></span><br><span class="line">print(type(str_dic),str_dic) <span class="comment">#&lt;class 'str'&gt; [1, ["a", "b", "c"], 3, &#123;"k1": "v1", "k2": "v2"&#125;]</span></span><br><span class="line">list_dic2 = json.loads(str_dic)</span><br><span class="line">print(type(list_dic2),list_dic2) <span class="comment">#&lt;class 'list'&gt; [1, ['a', 'b', 'c'], 3, &#123;'k1': 'v1', 'k2': 'v2'&#125;]</span></span><br></pre></td></tr></table></figure>

<p><strong>load和dump</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> json</span><br><span class="line">f = open(<span class="string">'json_file'</span>,<span class="string">'w'</span>)</span><br><span class="line">dic = &#123;<span class="string">'k1'</span>:<span class="string">'v1'</span>,<span class="string">'k2'</span>:<span class="string">'v2'</span>,<span class="string">'k3'</span>:<span class="string">'v3'</span>&#125;</span><br><span class="line">json.dump(dic,f)  <span class="comment">#dump方法接收一个文件句柄，直接将字典转换成json字符串写入文件</span></span><br><span class="line">f.close()</span><br><span class="line"></span><br><span class="line">f = open(<span class="string">'json_file'</span>)</span><br><span class="line">dic2 = json.load(f)  <span class="comment">#load方法接收一个文件句柄，直接将文件中的json字符串转换成数据结构返回</span></span><br><span class="line">f.close()</span><br><span class="line">print(type(dic2),dic2)</span><br></pre></td></tr></table></figure>

<p><strong>ensure_ascii关键字参数</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> json</span><br><span class="line">f = open(<span class="string">'file'</span>,<span class="string">'w'</span>)</span><br><span class="line">json.dump(&#123;<span class="string">'国籍'</span>:<span class="string">'中国'</span>&#125;,f)</span><br><span class="line">ret = json.dumps(&#123;<span class="string">'国籍'</span>:<span class="string">'中国'</span>&#125;)</span><br><span class="line">f.write(ret+<span class="string">'\n'</span>)</span><br><span class="line">json.dump(&#123;<span class="string">'国籍'</span>:<span class="string">'美国'</span>&#125;,f,ensure_ascii=<span class="literal">False</span>)</span><br><span class="line">ret = json.dumps(&#123;<span class="string">'国籍'</span>:<span class="string">'美国'</span>&#125;,ensure_ascii=<span class="literal">False</span>)</span><br><span class="line">f.write(ret+<span class="string">'\n'</span>)</span><br><span class="line">f.close()</span><br></pre></td></tr></table></figure>

<p><strong>其他参数说明</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">Serialize obj to a JSON formatted str.(字符串表示的json对象) </span><br><span class="line">Skipkeys：默认值是False，如果dict的keys内的数据不是python的基本类型(str,unicode,int,long,float,bool,None)，设置为False时，就会报TypeError的错误。此时设置成True，则会跳过这类key </span><br><span class="line">ensure_ascii:，当它为True的时候，所有非ASCII码字符显示为\uXXXX序列，只需在dump时将ensure_ascii设置为False即可，此时存入json的中文即可正常显示。) </span><br><span class="line">If check_circular is false, then the circular reference check for container types will be skipped and a circular reference will result in an OverflowError (or worse). </span><br><span class="line">If allow_nan is false, then it will be a ValueError to serialize out of range float values (nan, inf, -inf) in strict compliance of the JSON specification, instead of using the JavaScript equivalents (NaN, Infinity, -Infinity). </span><br><span class="line">indent：应该是一个非负的整型，如果是0就是顶格分行显示，如果为空就是一行最紧凑显示，否则会换行且按照indent的数值显示前面的空白分行显示，这样打印出来的json数据也叫pretty-printed json </span><br><span class="line">separators：分隔符，实际上是(item_separator, dict_separator)的一个元组，默认的就是(‘,’,’:’)；这表示dictionary内keys之间用“,”隔开，而KEY和value之间用“：”隔开。 </span><br><span class="line">default(obj) is a function that should return a serializable version of obj or raise TypeError. The default simply raises TypeError. </span><br><span class="line">sort_keys：将数据根据keys的值进行排序。 </span><br><span class="line">To use a custom JSONEncoder subclass (e.g. one that overrides the .default() method to serialize additional types), specify it with the cls kwarg; otherwise JSONEncoder is used.</span><br></pre></td></tr></table></figure>

<p><strong>json的格式化输出</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> json</span><br><span class="line">data = &#123;<span class="string">'username'</span>:[<span class="string">'李华'</span>,<span class="string">'二愣子'</span>],<span class="string">'sex'</span>:<span class="string">'male'</span>,<span class="string">'age'</span>:<span class="number">16</span>&#125;</span><br><span class="line">json_dic2 = json.dumps(data,sort_keys=<span class="literal">True</span>,indent=<span class="number">2</span>,separators=(<span class="string">','</span>,<span class="string">':'</span>),ensure_ascii=<span class="literal">False</span>)</span><br><span class="line">print(json_dic2)</span><br></pre></td></tr></table></figure>

<h4 id="2、pickle"><a href="#2、pickle" class="headerlink" title="2、pickle"></a>2、pickle</h4><p>pickle模块提供了四个功能：dumps、dump(序列化，存）、loads（反序列化，读）、load  （不仅可以序列化字典，列表…<strong>可以把python中任意的数据类型序列化</strong>）</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pickle</span><br><span class="line">dic = &#123;<span class="string">'k1'</span>:<span class="string">'v1'</span>,<span class="string">'k2'</span>:<span class="string">'v2'</span>,<span class="string">'k3'</span>:<span class="string">'v3'</span>&#125;</span><br><span class="line">str_dic = pickle.dumps(dic)</span><br><span class="line">print(str_dic)  <span class="comment">#一串二进制内容</span></span><br><span class="line"></span><br><span class="line">dic2 = pickle.loads(str_dic)</span><br><span class="line">print(dic2)    <span class="comment">#字典</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line">struct_time  = time.localtime(<span class="number">1000000000</span>)</span><br><span class="line">print(struct_time)</span><br><span class="line">f = open(<span class="string">'pickle_file'</span>,<span class="string">'wb'</span>)</span><br><span class="line">pickle.dump(struct_time,f)</span><br><span class="line">f.close()</span><br><span class="line"></span><br><span class="line">f = open(<span class="string">'pickle_file'</span>,<span class="string">'rb'</span>)</span><br><span class="line">struct_time2 = pickle.load(f)</span><br><span class="line">print(struct_time2.tm_year)</span><br></pre></td></tr></table></figure>

<p>这时候机智的你又要说了，既然pickle如此强大，为什么还要学json呢？<br>这里我们要说明一下，json是一种所有的语言都可以识别的数据结构。<br>如果我们将一个字典或者序列化成了一个json存在文件里，那么java代码或者js代码也可以拿来用。<br>但是如果我们用pickle进行序列化，其他语言就不能读懂这是什么了～<br>所以，如果你序列化的内容是列表或者字典，我们非常推荐你使用json模块<br>但如果出于某种原因你不得不序列化其他的数据类型，而未来你还会用python对这个数据进行反序列化的话，那么就可以使用pickle</p>
<h3 id="七、re模块"><a href="#七、re模块" class="headerlink" title="七、re模块"></a>七、re模块</h3><p>讲正题之前我们先来看一个例子：<a href="https://reg.jd.com/reg/person?ReturnUrl=https%3A//www.jd.com/" target="_blank" rel="noopener">https://reg.jd.com/reg/person?ReturnUrl=https%3A//www.jd.com/</a></p>
<p>这是京东的注册页面，打开页面我们就看到这些要求输入个人信息的提示。<br>假如我们随意的在手机号码这一栏输入一个11111111111，它会提示我们格式有误。<br>这个功能是怎么实现的呢？<br>假如现在你用python写一段代码，类似：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">phone_number = input(<span class="string">'please input your phone number ： '</span>)</span><br></pre></td></tr></table></figure>

<p>你怎么判断这个phone_number是合法的呢？</p>
<p>根据手机号码一共11位并且是只以13、14、15、18开头的数字这些特点，我们用python写了如下代码：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    phone_number = input(<span class="string">'please input your phone number ： '</span>)</span><br><span class="line">    <span class="keyword">if</span> len(phone_number) == <span class="number">11</span> \</span><br><span class="line">            <span class="keyword">and</span> phone_number.isdigit()\</span><br><span class="line">            <span class="keyword">and</span> (phone_number.startswith(<span class="string">'13'</span>) \</span><br><span class="line">            <span class="keyword">or</span> phone_number.startswith(<span class="string">'14'</span>) \</span><br><span class="line">            <span class="keyword">or</span> phone_number.startswith(<span class="string">'15'</span>) \</span><br><span class="line">            <span class="keyword">or</span> phone_number.startswith(<span class="string">'18'</span>)):</span><br><span class="line">        print(<span class="string">'是合法的手机号码'</span>)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        print(<span class="string">'不是合法的手机号码'</span>)</span><br></pre></td></tr></table></figure>

<p>这是你的写法，现在我要展示一下我的写法：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line">phone_number = input(<span class="string">'please input your phone number ： '</span>)</span><br><span class="line"><span class="keyword">if</span> re.match(<span class="string">'^(13|14|15|18)[0-9]&#123;9&#125;$'</span>,phone_number):</span><br><span class="line">        print(<span class="string">'是合法的手机号码'</span>)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">        print(<span class="string">'不是合法的手机号码'</span>)</span><br></pre></td></tr></table></figure>

<p>对比上面的两种写法，此时此刻，我要问你你喜欢哪种方法呀？你肯定还是会说第一种，为什么呢？因为第一种不用学呀！<br>但是如果现在有一个文件，我让你从整个文件里匹配出所有的手机号码。你用python给我写个试试？<br>但是学了今天的技能之后，分分钟帮你搞定！</p>
<p>今天我们要学习python里的<strong>re模块和正则表达式</strong>，学会了这个就可以帮我们解决刚刚的疑问。正则表达式不仅在python领域，在整个编程届都占有举足轻重的地位。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">正则表达式和re模块:</span><br><span class="line">不管以后你是不是去做python开发，只要你是一个程序员就应该了解正则表达式的基本使用。如果未来你要在爬虫领域发展，你就更应该好好学习这方面的知识。</span><br><span class="line">但是你要知道，re模块本质上和正则表达式没有一毛钱的关系。re模块和正则表达式的关系 类似于 time模块和时间的关系</span><br><span class="line">你没有学习python之前，也不知道有一个time模块，但是你已经认识时间了 12:30就表示中午十二点半（这个时间可好，一般这会儿就该下课了）。</span><br><span class="line">时间有自己的格式，年月日时分秒，12个月，365天......已经成为了一种规则。你也早就牢记于心了。time模块只不过是python提供给我们的可以方便我们操作时间的一个工具而已</span><br></pre></td></tr></table></figure>

<p><strong>正则表达式</strong>本身也和python没有什么关系，就是<strong>匹配字符串内容的一种规则</strong>。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">官方定义：正则表达式是对字符串操作的一种逻辑公式，就是用事先定义好的一些特定字符、及这些特定字符的组合，组成一个“规则字符串”，这个“规则字符串”用来表达对字符串的一种过滤逻辑。</span><br></pre></td></tr></table></figure>

<h4 id="（1）正则表达式"><a href="#（1）正则表达式" class="headerlink" title="（1）正则表达式"></a>（1）正则表达式</h4><p>​        一说规则我已经知道你很晕了，现在就让我们先来看一些实际的应用。<em>在线测试工具 <a href="http://tool.chinaz.com/regex/" target="_blank" rel="noopener">http://tool.chinaz.com/regex/</a></em></p>
<p>​        首先你要知道的是，谈到正则，就只和字符串相关了。在我给你提供的工具中，你输入的每一个字都是一个字符串。<br>其次，如果在一个位置的一个值，不会出现什么变化，那么是不需要规则的。<br>　　比如你要用”1”去匹配”1”，或者用”2”去匹配”2”，直接就可以匹配上。这连python的字符串操作都可以轻松做到。<br>那么在之后我们更多要考虑的是在<strong>同一个位置上</strong>可以出现的字符的范围。</p>
 <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">字符组 ： [字符组]</span><br><span class="line">在同一个位置可能出现的各种字符组成了一个字符组，在正则表达式中用[]表示</span><br><span class="line">字符分为很多类，比如数字、字母、标点等等。</span><br><span class="line">假如你现在要求一个位置&quot;只能出现一个数字&quot;,那么这个位置上的字符只能是0、1、2...9这10个数之一。</span><br></pre></td></tr></table></figure>

<table>
<thead>
<tr>
<th><code>正则</code></th>
<th><code>待匹配字符</code></th>
<th><code>匹配结果</code></th>
<th><code>说明</code></th>
</tr>
</thead>
<tbody><tr>
<td><code>[0123456789]</code></td>
<td><code>8</code></td>
<td><code>True</code></td>
<td><code>在一个字符组里枚举合法的所有字符，字符组里的任意一个字符和&quot;待匹配字符&quot;相同都视为可以匹配</code></td>
</tr>
<tr>
<td><code>[0123456789]</code></td>
<td><code>a</code></td>
<td><code>False</code></td>
<td><code>由于字符组中没有&quot;a&quot;字符，所以不能匹配</code></td>
</tr>
<tr>
<td><code>[0-9]</code></td>
<td><code>7</code></td>
<td><code>True</code></td>
<td><code>也可以用-表示范围,[0-9]就和[0123456789]是一个意思</code></td>
</tr>
<tr>
<td><code>[a-z]</code></td>
<td><code>s</code></td>
<td><code>True</code></td>
<td><code>同样的如果要匹配所有的小写字母，直接用[a-z]就可以表示</code></td>
</tr>
<tr>
<td><code>[A-Z]</code></td>
<td><code>B</code></td>
<td><code>True</code></td>
<td><code>[A-Z]就表示所有的大写字母</code></td>
</tr>
<tr>
<td><code>[0-9a-fA-F]</code></td>
<td><code>e</code></td>
<td><code>True</code></td>
<td><code>可以匹配数字，大小写形式的a～f，用来验证十六进制字符</code></td>
</tr>
</tbody></table>
<p><strong><em>字符：</em></strong></p>
<table>
<thead>
<tr>
<th><code>元字符</code></th>
<th><code>匹配内容</code></th>
</tr>
</thead>
<tbody><tr>
<td>.</td>
<td>匹配除换行符以外的任意字符</td>
</tr>
<tr>
<td>\w</td>
<td>匹配字母或数字或下划线</td>
</tr>
<tr>
<td>\s</td>
<td>匹配任意的空白符</td>
</tr>
<tr>
<td>\d</td>
<td>匹配数字</td>
</tr>
<tr>
<td>\n</td>
<td>匹配一个换行符</td>
</tr>
<tr>
<td>\t</td>
<td>匹配一个制表符</td>
</tr>
<tr>
<td>\b</td>
<td>匹配一个单词的结尾</td>
</tr>
<tr>
<td>^</td>
<td>匹配字符串的开始</td>
</tr>
<tr>
<td>$</td>
<td>匹配字符串的结尾</td>
</tr>
<tr>
<td>\W</td>
<td><code>匹配非字母或数字或下划线</code></td>
</tr>
<tr>
<td>\D</td>
<td><code>匹配非数字</code></td>
</tr>
<tr>
<td>\S</td>
<td><code>匹配非空白符</code></td>
</tr>
<tr>
<td>a|b</td>
<td><code>匹配字符a或字符b</code></td>
</tr>
<tr>
<td>()</td>
<td><code>匹配括号内的表达式，也表示一个组</code></td>
</tr>
<tr>
<td>[…]</td>
<td><code>匹配字符组中的字符</code></td>
</tr>
<tr>
<td>[^…]</td>
<td><code>匹配除了字符组中字符的所有字符</code></td>
</tr>
</tbody></table>
<p><strong><em>量词：</em></strong></p>
<table>
<thead>
<tr>
<th><code>量词</code></th>
<th><code>用法说明</code></th>
</tr>
</thead>
<tbody><tr>
<td>*</td>
<td>重复零次或更多次</td>
</tr>
<tr>
<td>+</td>
<td>重复一次或更多次</td>
</tr>
<tr>
<td>?</td>
<td>重复零次或一次</td>
</tr>
<tr>
<td>{n}</td>
<td>重复n次</td>
</tr>
<tr>
<td>{n,}</td>
<td>重复n次或更多次</td>
</tr>
<tr>
<td>{n,m}</td>
<td>重复n到m次</td>
</tr>
</tbody></table>
<h5 id="1、"><a href="#1、" class="headerlink" title="1、. ^ $"></a>1、. ^ $</h5><table>
<thead>
<tr>
<th>正则</th>
<th>待匹配字符</th>
<th>匹配 结果</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>海.</td>
<td>海燕海娇海东</td>
<td>海燕海娇海东</td>
<td>匹配所有”海.”的字符</td>
</tr>
<tr>
<td>^海.</td>
<td>海燕海娇海东</td>
<td>海燕</td>
<td>只从开头匹配”海.”</td>
</tr>
<tr>
<td>海.$</td>
<td>海燕海娇海东</td>
<td>海东</td>
<td>只匹配结尾的”海.$”</td>
</tr>
</tbody></table>
<h5 id="2、"><a href="#2、" class="headerlink" title="2、* + ? { }"></a>2、* + ? { }</h5><table>
<thead>
<tr>
<th>正则</th>
<th>待匹配字符</th>
<th>匹配 结果</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>李.?</td>
<td>李杰和李莲英和李二棍子</td>
<td>李杰 李莲 李二</td>
<td><code>?表示重复零次或一次，即只匹配&quot;李&quot;后面一个任意字符</code></td>
</tr>
<tr>
<td>李.*</td>
<td>李杰和李莲英和李二棍子</td>
<td>李杰和李莲英和李二棍子</td>
<td><code>*表示重复零次或多次，即匹配&quot;李&quot;后面0或多个任意字符</code></td>
</tr>
<tr>
<td>李.+</td>
<td>李杰和李莲英和李二棍子</td>
<td>李杰和李莲英和李二棍子</td>
<td><code>+表示重复一次或多次，即只匹配&quot;李&quot;后面1个或多个任意字符</code></td>
</tr>
<tr>
<td>李.{1,2}</td>
<td>李杰和李莲英和李二棍子</td>
<td>李杰和 李莲英 李二棍</td>
<td><code>{1,2}匹配1到2次任意字符</code></td>
</tr>
</tbody></table>
<p><strong><em>注意：</em></strong></p>
<p>前面的*,+,?等都是贪婪匹配，也就是尽可能匹配，后面加?号使其变成惰性匹配</p>
<table>
<thead>
<tr>
<th>正则</th>
<th>待匹配字符</th>
<th>匹配 结果</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>李.*?</td>
<td>李杰和李莲英和李二棍子</td>
<td>李 李 李</td>
<td>惰性匹配</td>
</tr>
</tbody></table>
<h5 id="3、字符集［］［-］"><a href="#3、字符集［］［-］" class="headerlink" title="3、字符集［］［^］"></a>3、字符集［］［^］</h5><table>
<thead>
<tr>
<th>正则</th>
<th>待匹配字符</th>
<th>匹配 结果</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>李[杰莲英二棍子]*</td>
<td>李杰和李莲英和李二棍子</td>
<td>李杰 李莲英 李二棍子</td>
<td><code>表示匹配&quot;李&quot;字后面[杰莲英二棍子]的字符任意次</code></td>
</tr>
<tr>
<td>李[^和]*</td>
<td>李杰和李莲英和李二棍子</td>
<td>李杰 李莲英 李二棍子</td>
<td><code>表示匹配一个不是&quot;和&quot;的字符任意次</code></td>
</tr>
<tr>
<td>[\d]</td>
<td>456bdha3</td>
<td>4 5 6 3</td>
<td><code>表示匹配任意一个数字，匹配到4个结果</code></td>
</tr>
<tr>
<td>[\d]+</td>
<td>456bdha3</td>
<td>456 3</td>
<td><code>表示匹配任意个数字，匹配到2个结果</code></td>
</tr>
</tbody></table>
<h5 id="4、分组-与-或-｜［-］"><a href="#4、分组-与-或-｜［-］" class="headerlink" title="4、分组 ()与 或 ｜［^］"></a>4、分组 ()与 或 ｜［^］</h5><p>身份证号码是一个长度为15或18个字符的字符串，如果是15位则全部由数字组成，首位不能为0；如果是18位，则前17位全部是数字，末位可能是数字或x，下面我们尝试用正则来表示：</p>
<table>
<thead>
<tr>
<th>正则</th>
<th>待匹配字符</th>
<th>匹配 结果</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>^[1-9]\d{13,16}[0-9x]$</td>
<td>110101198001017032</td>
<td>110101198001017032</td>
<td>表示可以匹配一个正确的身份证号</td>
</tr>
<tr>
<td>^[1-9]\d{13,16}[0-9x]$</td>
<td>1101011980010170</td>
<td>1101011980010170</td>
<td><code>表示也可以匹配这串数字，但这并不是一个正确的身份证号码，它是一个16位的数字</code></td>
</tr>
<tr>
<td>^[1-9]\d{14}(\d{2}[0-9x])?$</td>
<td>1101011980010170</td>
<td>False</td>
<td><code>现在不会匹配错误的身份证号了()表示分组，将\d{2}[0-9x]分成一组，就可以整体约束他们出现的次数为0-1次</code></td>
</tr>
<tr>
<td>^([1-9]\d{16}[0-9x]|[1-9]\d{14})$</td>
<td>110105199812067023</td>
<td>110105199812067023</td>
<td><code>表示先匹配[1-9]\d{16}[0-9x]如果没有匹配上就匹配[1-9]\d{14}</code></td>
</tr>
</tbody></table>
<h5 id="5、转义符"><a href="#5、转义符" class="headerlink" title="5、转义符 \"></a>5、转义符 \</h5><p>在正则表达式中，有很多有特殊意义的是元字符，比如\n和\s等，如果要在正则中匹配正常的”\n”而不是”换行符”就需要对”\“进行转义，变成’\\‘。</p>
<p>在python中，无论是正则表达式，还是待匹配的内容，都是以字符串的形式出现的，在字符串中\也有特殊的含义，本身还需要转义。所以如果匹配一次”\n”,字符串中要写成’\\n’，那么正则里就要写成”\\\\n”,这样就太麻烦了。这个时候我们就用到了r’\n’这个概念，此时的正则是r’\\n’就可以了。</p>
<table>
<thead>
<tr>
<th>正则</th>
<th>待匹配字符</th>
<th>匹配 结果</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>\n</td>
<td>\n</td>
<td>False</td>
<td><code>因为在正则表达式中\是有特殊意义的字符，所以要匹配\n本身，用表达式\n无法匹配</code></td>
</tr>
<tr>
<td>\\n</td>
<td>\n</td>
<td>True</td>
<td><code>转义\之后变成\\，即可匹配</code></td>
</tr>
<tr>
<td>“\\\\n”</td>
<td>‘\\n’</td>
<td>True</td>
<td><code>如果在python中，字符串中的&#39;\&#39;也需要转义，所以每一个字符串&#39;\&#39;又需要转义一次</code></td>
</tr>
<tr>
<td>r’\\n’</td>
<td>r’\n’</td>
<td>True</td>
<td><code>在字符串之前加r，让整个字符串不转义</code></td>
</tr>
</tbody></table>
<h5 id="6、贪婪匹配"><a href="#6、贪婪匹配" class="headerlink" title="6、贪婪匹配"></a>6、贪婪匹配</h5><p>贪婪匹配：在满足匹配时，匹配尽可能长的字符串，默认情况下，采用贪婪匹配</p>
<table>
<thead>
<tr>
<th>正则</th>
<th>待匹配字符</th>
<th>匹配 结果</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>&lt;.*&gt;</td>
<td><script>...<script></td>
<td><script>...<script></td>
<td><code>默认为贪婪匹配模式，会匹配尽量长的字符串</code></td>
</tr>
<tr>
<td><.*?></td>
<td>r'\d'</td>
<td><script> <script></td>
<td><code>加上？为将贪婪匹配模式转为非贪婪匹配模式，会匹配尽量短的字符串</code></td>
</tr>
</tbody></table>
<p>几个常用的非贪婪匹配Pattern：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">*? 重复任意次，但尽可能少重复</span><br><span class="line">+? 重复1次或更多次，但尽可能少重复</span><br><span class="line">?? 重复0次或1次，但尽可能少重复</span><br><span class="line">&#123;n,m&#125;? 重复n到m次，但尽可能少重复</span><br><span class="line">&#123;n,&#125;? 重复n次以上，但尽可能少重复</span><br></pre></td></tr></table></figure>

<p>. * ? 的用法：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">. 是任意字符</span><br><span class="line">* 是取 0 至 无限长度</span><br><span class="line">? 是非贪婪模式。</span><br><span class="line">  何在一起就是 取尽量少的任意字符，一般不会这么单独写，他大多用在：</span><br><span class="line">  .*?x</span><br><span class="line"></span><br><span class="line">就是取前面任意长度的字符，直到一个x出现</span><br></pre></td></tr></table></figure>

<h4 id="（2）re模块下的常用方法"><a href="#（2）re模块下的常用方法" class="headerlink" title="（2）re模块下的常用方法"></a>（2）re模块下的常用方法</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line"></span><br><span class="line">ret = re.findall(<span class="string">'a'</span>, <span class="string">'eva egon yuan'</span>)  <span class="comment"># 返回所有满足匹配条件的结果,放在列表里</span></span><br><span class="line">print(ret) <span class="comment">#结果 : ['a', 'a']</span></span><br><span class="line"></span><br><span class="line">ret = re.search(<span class="string">'a'</span>, <span class="string">'eva egon yuan'</span>).group()</span><br><span class="line">print(ret) <span class="comment">#结果 : 'a'</span></span><br><span class="line"><span class="comment"># 函数会在字符串内查找模式匹配,只到找到第一个匹配然后返回一个包含匹配信息的对象,该对象可以</span></span><br><span class="line"><span class="comment"># 通过调用group()方法得到匹配的字符串,如果字符串没有匹配，则返回None。</span></span><br><span class="line"></span><br><span class="line">ret = re.match(<span class="string">'a'</span>, <span class="string">'abc'</span>).group()  <span class="comment"># 同search,不过尽在字符串开始处进行匹配</span></span><br><span class="line">print(ret)</span><br><span class="line"><span class="comment">#结果 : 'a'</span></span><br><span class="line"></span><br><span class="line">ret = re.split(<span class="string">'[ab]'</span>, <span class="string">'abcd'</span>)  <span class="comment"># 先按'a'分割得到''和'bcd',在对''和'bcd'分别按'b'分割</span></span><br><span class="line">print(ret)  <span class="comment"># ['', '', 'cd']</span></span><br><span class="line"></span><br><span class="line">ret = re.sub(<span class="string">'\d'</span>, <span class="string">'H'</span>, <span class="string">'eva3egon4yuan4'</span>, <span class="number">1</span>)<span class="comment">#将数字替换成'H'，参数1表示只替换1个</span></span><br><span class="line">print(ret) <span class="comment">#evaHegon4yuan4</span></span><br><span class="line"></span><br><span class="line">ret = re.subn(<span class="string">'\d'</span>, <span class="string">'H'</span>, <span class="string">'eva3egon4yuan4'</span>)<span class="comment">#将数字替换成'H'，返回元组(替换的结果,替换了多少次)</span></span><br><span class="line">print(ret)</span><br><span class="line"></span><br><span class="line">obj = re.compile(<span class="string">'\d&#123;3&#125;'</span>)  <span class="comment">#将正则表达式编译成为一个 正则表达式对象，规则要匹配的是3个数字</span></span><br><span class="line">ret = obj.search(<span class="string">'abc123eeee'</span>) <span class="comment">#正则表达式对象调用search，参数为待匹配的字符串</span></span><br><span class="line">print(ret.group())  <span class="comment">#结果 ： 123</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> re</span><br><span class="line">ret = re.finditer(<span class="string">'\d'</span>, <span class="string">'ds3sy4784a'</span>)   <span class="comment">#finditer返回一个存放匹配结果的迭代器</span></span><br><span class="line">print(ret)  <span class="comment"># &lt;callable_iterator object at 0x10195f940&gt;</span></span><br><span class="line">print(next(ret).group())  <span class="comment">#查看第一个结果</span></span><br><span class="line">print(next(ret).group())  <span class="comment">#查看第二个结果</span></span><br><span class="line">print([i.group() <span class="keyword">for</span> i <span class="keyword">in</span> ret])  <span class="comment">#查看剩余的左右结果</span></span><br></pre></td></tr></table></figure>

<p><strong><em>注意：</em></strong></p>
<ol>
<li><p>findall的优先级查询：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">import re</span><br><span class="line"></span><br><span class="line">ret = re.findall(&apos;www.(baidu|oldboy).com&apos;, &apos;www.oldboy.com&apos;)</span><br><span class="line">print(ret)  # [&apos;oldboy&apos;]     这是因为findall会优先把匹配结果组里内容返回,如果想要匹配结果,取消权限即可</span><br><span class="line"></span><br><span class="line">ret = re.findall(&apos;www.(?:baidu|oldboy).com&apos;, &apos;www.oldboy.com&apos;)</span><br><span class="line">print(ret)  # [&apos;www.oldboy.com&apos;]</span><br></pre></td></tr></table></figure>
</li>
<li><p>split的优先级查询</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">ret=re.split(&quot;\d+&quot;,&quot;eva3egon4yuan&quot;)</span><br><span class="line">print(ret) #结果 ： [&apos;eva&apos;, &apos;egon&apos;, &apos;yuan&apos;]</span><br><span class="line"></span><br><span class="line">ret=re.split(&quot;(\d+)&quot;,&quot;eva3egon4yuan&quot;)</span><br><span class="line">print(ret) #结果 ： [&apos;eva&apos;, &apos;3&apos;, &apos;egon&apos;, &apos;4&apos;, &apos;yuan&apos;]</span><br><span class="line"></span><br><span class="line">#在匹配部分加上（）之后所切出的结果是不同的，</span><br><span class="line">#没有（）的没有保留所匹配的项，但是有（）的却能够保留了匹配的项，</span><br><span class="line">#这个在某些需要保留匹配部分的使用过程是非常重要的。</span><br></pre></td></tr></table></figure>

</li>
</ol>
<h4 id="（3）综合练习与扩展"><a href="#（3）综合练习与扩展" class="headerlink" title="（3）综合练习与扩展"></a>（3）综合练习与扩展</h4><h5 id="1、匹配标签"><a href="#1、匹配标签" class="headerlink" title="1、匹配标签"></a>1、匹配标签</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">ret = re.search(<span class="string">"&lt;(?P&lt;tag_name&gt;\w+)&gt;\w+&lt;/(?P=tag_name)&gt;"</span>,<span class="string">"&lt;h1&gt;hello&lt;/h1&gt;"</span>)</span><br><span class="line"><span class="comment">#还可以在分组中利用?&lt;name&gt;的形式给分组起名字</span></span><br><span class="line"><span class="comment">#获取的匹配结果可以直接用group('名字')拿到对应的值</span></span><br><span class="line">print(ret.group(<span class="string">'tag_name'</span>))  <span class="comment">#结果 ：h1</span></span><br><span class="line">print(ret.group())  <span class="comment">#结果 ：&lt;h1&gt;hello&lt;/h1&gt;</span></span><br><span class="line"></span><br><span class="line">ret = re.search(<span class="string">r"&lt;(\w+)&gt;\w+&lt;/\1&gt;"</span>,<span class="string">"&lt;h1&gt;hello&lt;/h1&gt;"</span>)</span><br><span class="line"><span class="comment">#如果不给组起名字，也可以用\序号来找到对应的组，表示要找的内容和前面的组内容一致</span></span><br><span class="line"><span class="comment">#获取的匹配结果可以直接用group(序号)拿到对应的值</span></span><br><span class="line">print(ret.group(<span class="number">1</span>))</span><br><span class="line">print(ret.group())  <span class="comment">#结果 ：&lt;h1&gt;hello&lt;/h1&gt;</span></span><br></pre></td></tr></table></figure>

<h5 id="2、匹配整数"><a href="#2、匹配整数" class="headerlink" title="2、匹配整数"></a>2、匹配整数</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line"></span><br><span class="line">ret=re.findall(<span class="string">r"\d+"</span>,<span class="string">"1-2*(60+(-40.35/5)-(-4*3))"</span>)</span><br><span class="line">print(ret) <span class="comment">#['1', '2', '60', '40', '35', '5', '4', '3']</span></span><br><span class="line">ret=re.findall(<span class="string">r"-?\d+\.\d*|(-?\d+)"</span>,<span class="string">"1-2*(60+(-40.35/5)-(-4*3))"</span>)</span><br><span class="line">print(ret) <span class="comment">#['1', '-2', '60', '', '5', '-4', '3']</span></span><br><span class="line">ret.remove(<span class="string">""</span>)</span><br><span class="line">print(ret) <span class="comment">#['1', '-2', '60', '5', '-4', '3']</span></span><br></pre></td></tr></table></figure>

<h5 id="3、数字匹配"><a href="#3、数字匹配" class="headerlink" title="3、数字匹配"></a>3、数字匹配</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">1、 匹配一段文本中的每行的邮箱</span><br><span class="line">      http://blog.csdn.net/make164492212/article/details/51656638</span><br><span class="line"></span><br><span class="line">2、 匹配一段文本中的每行的时间字符串，比如：‘1990-07-12’；</span><br><span class="line"></span><br><span class="line">   分别取出1年的12个月（^(0?[1-9]|1[0-2])$）、</span><br><span class="line">   一个月的31天：^((0?[1-9])|((1|2)[0-9])|30|31)$</span><br><span class="line"></span><br><span class="line">3、 匹配qq号。(腾讯QQ号从10000开始)  ［1,9］[0,9]&#123;4,&#125;</span><br><span class="line"></span><br><span class="line">4、 匹配一个浮点数。       ^(-?\d+)(\.\d+)?$   或者  -?\d+\.?\d*</span><br><span class="line"></span><br><span class="line">5、 匹配汉字。             ^[\u4e00-\u9fa5]&#123;0,&#125;$ </span><br><span class="line"></span><br><span class="line">6、 匹配出所有整数</span><br></pre></td></tr></table></figure>

<h5 id="4、爬虫练习"><a href="#4、爬虫练习" class="headerlink" title="4、爬虫练习"></a>4、爬虫练习</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> re</span><br><span class="line"><span class="keyword">import</span> json</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">getPage</span><span class="params">(url)</span>:</span></span><br><span class="line"></span><br><span class="line">    response=requests.get(url)</span><br><span class="line">    <span class="keyword">return</span> response.text</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">parsePage</span><span class="params">(s)</span>:</span></span><br><span class="line">    </span><br><span class="line">    com=re.compile(<span class="string">'&lt;div class="item"&gt;.*?&lt;div class="pic"&gt;.*?&lt;em .*?&gt;(?P&lt;id&gt;\d+).*?&lt;span class="title"&gt;(?P&lt;title&gt;.*?)&lt;/span&gt;'</span></span><br><span class="line">                   <span class="string">'.*?&lt;span class="rating_num" .*?&gt;(?P&lt;rating_num&gt;.*?)&lt;/span&gt;.*?&lt;span&gt;(?P&lt;comment_num&gt;.*?)评价&lt;/span&gt;'</span>,re.S)</span><br><span class="line"></span><br><span class="line">    ret=com.finditer(s)</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> ret:</span><br><span class="line">        <span class="keyword">yield</span> &#123;</span><br><span class="line">            <span class="string">"id"</span>:i.group(<span class="string">"id"</span>),</span><br><span class="line">            <span class="string">"title"</span>:i.group(<span class="string">"title"</span>),</span><br><span class="line">            <span class="string">"rating_num"</span>:i.group(<span class="string">"rating_num"</span>),</span><br><span class="line">            <span class="string">"comment_num"</span>:i.group(<span class="string">"comment_num"</span>),</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span><span class="params">(num)</span>:</span></span><br><span class="line"></span><br><span class="line">    url=<span class="string">'https://movie.douban.com/top250?start=%s&amp;filter='</span>%num</span><br><span class="line">    response_html=getPage(url)</span><br><span class="line">    ret=parsePage(response_html)</span><br><span class="line">    print(ret)</span><br><span class="line">    f=open(<span class="string">"move_info7"</span>,<span class="string">"a"</span>,encoding=<span class="string">"utf8"</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> obj <span class="keyword">in</span> ret:</span><br><span class="line">        print(obj)</span><br><span class="line">        data=json.dumps(obj,ensure_ascii=<span class="literal">False</span>)</span><br><span class="line">        f.write(data+<span class="string">"\n"</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    count=<span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">10</span>):</span><br><span class="line">        main(count)</span><br><span class="line">        count+=<span class="number">25</span></span><br></pre></td></tr></table></figure>

<p>简化版：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line"><span class="keyword">import</span> json</span><br><span class="line"><span class="keyword">from</span> urllib.request <span class="keyword">import</span> urlopen</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">getPage</span><span class="params">(url)</span>:</span></span><br><span class="line">    response = urlopen(url)</span><br><span class="line">    <span class="keyword">return</span> response.read().decode(<span class="string">'utf-8'</span>)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">parsePage</span><span class="params">(s)</span>:</span></span><br><span class="line">    com = re.compile(</span><br><span class="line">        <span class="string">'&lt;div class="item"&gt;.*?&lt;div class="pic"&gt;.*?&lt;em .*?&gt;(?P&lt;id&gt;\d+).*?&lt;span class="title"&gt;(?P&lt;title&gt;.*?)&lt;/span&gt;'</span></span><br><span class="line">        <span class="string">'.*?&lt;span class="rating_num" .*?&gt;(?P&lt;rating_num&gt;.*?)&lt;/span&gt;.*?&lt;span&gt;(?P&lt;comment_num&gt;.*?)评价&lt;/span&gt;'</span>, re.S)</span><br><span class="line"></span><br><span class="line">    ret = com.finditer(s)</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> ret:</span><br><span class="line">        <span class="keyword">yield</span> &#123;</span><br><span class="line">            <span class="string">"id"</span>: i.group(<span class="string">"id"</span>),</span><br><span class="line">            <span class="string">"title"</span>: i.group(<span class="string">"title"</span>),</span><br><span class="line">            <span class="string">"rating_num"</span>: i.group(<span class="string">"rating_num"</span>),</span><br><span class="line">            <span class="string">"comment_num"</span>: i.group(<span class="string">"comment_num"</span>),</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span><span class="params">(num)</span>:</span></span><br><span class="line">    url = <span class="string">'https://movie.douban.com/top250?start=%s&amp;filter='</span> % num</span><br><span class="line">    response_html = getPage(url)</span><br><span class="line">    ret = parsePage(response_html)</span><br><span class="line">    print(ret)</span><br><span class="line">    f = open(<span class="string">"move_info7"</span>, <span class="string">"a"</span>, encoding=<span class="string">"utf8"</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> obj <span class="keyword">in</span> ret:</span><br><span class="line">        print(obj)</span><br><span class="line">        data = str(obj)</span><br><span class="line">        f.write(data + <span class="string">"\n"</span>)</span><br><span class="line"></span><br><span class="line">count = <span class="number">0</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">10</span>):</span><br><span class="line">    main(count)</span><br><span class="line">    count += <span class="number">25</span></span><br></pre></td></tr></table></figure>

<p>flags：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">flags有很多可选值：</span><br><span class="line"></span><br><span class="line">re.I(IGNORECASE)忽略大小写，括号内是完整的写法</span><br><span class="line">re.M(MULTILINE)多行模式，改变^和$的行为</span><br><span class="line">re.S(DOTALL)点可以匹配任意字符，包括换行符</span><br><span class="line">re.L(LOCALE)做本地化识别的匹配，表示特殊字符集 \w, \W, \b, \B, \s, \S 依赖于当前环境，不推荐使用</span><br><span class="line">re.U(UNICODE) 使用\w \W \s \S \d \D使用取决于unicode定义的字符属性。在python3中默认使用该flag</span><br><span class="line">re.X(VERBOSE)冗长模式，该模式下pattern字符串可以是多行的，忽略空白字符，并可以添加注释</span><br></pre></td></tr></table></figure>

</script></td></tr></tbody></table>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/07/23/数据结构笔记/第一章-绪论/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="John Doe">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/07/23/数据结构笔记/第一章-绪论/" itemprop="url">第一章 绪论</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-07-23T16:21:57+08:00">
                2019-07-23
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/数据结构/" itemprop="url" rel="index">
                    <span itemprop="name">数据结构</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>[TOC]</p>
<h2 id="（一）-什么是数据结构"><a href="#（一）-什么是数据结构" class="headerlink" title="（一） 什么是数据结构"></a>（一） 什么是数据结构</h2><p>一、计算机解决一个具体的问题时，大致需要经过下列几个步骤：</p>
<ul>
<li>抽象出数学模型</li>
<li>设计解决模型的算法</li>
<li>编出程序</li>
<li>测试、调整，得到最终答案</li>
</ul>
<p><strong>寻求数学模型的实质：</strong></p>
<p>分析问题，从中提取操作的对象，并找出这些操作对象之间含有的关系。然后用数学的语言加以描述。</p>
<p>二、数据结构</p>
<p>数据结构是一门研究非数值计算的程序设计问题中计算机的操作对象以及它们之间的关系和操作等的学科。</p>
<p>三、程序设计的实质</p>
<p>对确定问题选择一种好的结构，加上设计一种好的算法。</p>
<h2 id="（二）基本概念和术语"><a href="#（二）基本概念和术语" class="headerlink" title="（二）基本概念和术语"></a>（二）基本概念和术语</h2><p><strong>1、数据</strong></p>
<p>数据是信息的载体，是描述客观事物属性的数。字符以及所有能够输入到计算机中并被计算机程序识别和处理的符号的集合。</p>
<p><strong>2、数据元素</strong></p>
<p>数据元素是数据的基本单位，通常作为一个整体进行考虑和处理。一个数据元素可由若干个数据项组成，数据项是构成数据元素的不可分割的最小单位。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">学生记录就是一个数据元素，它由学号、姓名、性别等数据项组成。</span><br></pre></td></tr></table></figure>

<p><strong>3、数据对象</strong></p>
<p>数据对象是具有相同性质的数据元素的集合，是数据的一个子集。</p>
<p>例如：整数数据对象是集合$$N = {0,  \pm 1,  \pm 2, …} $$。</p>
<p><strong>4、数据类型</strong></p>
<p>数据类型是一个值的集合和定义在此集合上一组操作的总称。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">例如：</span><br><span class="line"></span><br><span class="line">C语言中的整形变量，其值集为某个区间上的整数（区间大小依赖于不同的机器），定义在其上的操作为加、减、乘、除和取模等算数运算。</span><br></pre></td></tr></table></figure>

<ul>
<li>原子类型:其值不可再分的数据类型。<ul>
<li>如：C语言中的基本类型、指针类型和空类型。</li>
</ul>
</li>
<li>结构类型:其值可以再分解为若干成分(分量)的数据类型。<ul>
<li>如：数组</li>
</ul>
</li>
<li>抽象数据类型:抽象数据组织和与之相关的操作。</li>
</ul>
<p><strong>5、抽象数据类型</strong></p>
<p>抽象数据类型(ADT)是指一个数学模型以及定义在该模型上的一组操作。</p>
<p>抽象数据类型的定义仅取决于它的一组逻辑特性，而与其在计算机内部如何表示和实现无关。</p>
<p>通常用(数据对象、数据关系、基本操作集)这样的三元组来表示抽象数据类型。</p>
<p><strong>6.数据结构</strong><br>在任何问题中，数据元素都不是孤立存在的，而是在它们之间存在着某种关系，这种数据元素相互之间的关系称为结构(Structure)。</p>
<p>数据结构是相互之间存在一种或多种特定关系的数据元素的集合。数据结构包括三方面的内容:<strong>逻辑结构、存储结构和数据的运算</strong>。<br>数据的逻辑结构和存储结构是密不可分的两个方面，一个算法的设计取决于所选定的逻辑结构，而算法的实现依赖于所采用的存储结构。</p>
<p><strong>逻辑结构</strong></p>
<p>逻辑结构是指数据元素之间的逻辑关系，即从逻辑关系上描述数据。它与数据的存储无关，是独立于计算机的。</p>
<p>数据的逻辑结构分为线性结构和非线性结构</p>
<p>![逻辑结构](/Users/hhh/blog/source/_posts/数据结构笔记/图片/第一章 绪论/逻辑结构.png)</p>
<ul>
<li><p>集合 </p>
<ul>
<li>结构中的数据元素之间除了“同属于一个集合”的关系外，别无其他关系。 类似于数学上的集合</li>
</ul>
</li>
<li><p>线性结构 </p>
<ul>
<li>结构中的数据元素之间只存在一对一的关系。比如排队 </li>
</ul>
</li>
<li><p>树形结构</p>
<ul>
<li>结构中的数据元素之间存在一对多的关系。比如家族族谱 </li>
</ul>
</li>
<li><p>图状结构或网状结构 </p>
<ul>
<li>结构中的数据元素之间存在多对多的关系。 比如地图 </li>
</ul>
</li>
</ul>
<p>例如：</p>
<p>![逻辑结构2](./图片/第一章 绪论/逻辑结构2.png)</p>
<p><strong>物理结构</strong></p>
<p>存储结构是指数据结构在计算机中的表示(又称映像)，也称物理结构。它包括数据元素的表示和关系的表示。</p>
<p>数据的存储结构是逻辑结构用计算机语言的实现，它依赖于计算机语言。</p>
<p>数据的存储结构主要有:<strong>顺序存储、链式存储、索引存储和散列存储</strong>。</p>
<p>![物理结构1](./图片/第一章 绪论/物理结构1.png)</p>
<ul>
<li><p>顺序存储:</p>
<ul>
<li>存储的物理位置相邻(p.s. 物理位置即信息在计算机中的位置） </li>
</ul>
</li>
<li><p>链接存储:</p>
<ul>
<li>存储的物理位置未必相邻，通过 记录相邻元素的物理位置来找到相邻元素</li>
</ul>
</li>
<li><p>索引存储:</p>
<ul>
<li>类似于目录，以后可以联系操作系统的文件系统章节来理解</li>
</ul>
</li>
<li><p>散列存储:</p>
<ul>
<li>通过关键字直接计算出元素的物理地址(以后详解)</li>
</ul>
</li>
</ul>
<p>![物理结构2](./图片/第一章 绪论/物理结构2.png)</p>
<p><strong>数据的运算</strong></p>
<p>数据的运算包括运算的定义和实现。</p>
<ul>
<li><p>运算的定义是针对逻辑结构。</p>
</li>
<li><p>运算的实现是针对物理结构。 </p>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">示例:</span><br><span class="line">以人为例，假设有一个运算是计算人的颜值。</span><br><span class="line">颜值=五官的漂亮程度之和(运算的定义)  针对逻辑结构</span><br><span class="line">通过读取计算机中每个人 五官的信息，然后相加得到颜值。(运算的实现)   针对物理结构</span><br></pre></td></tr></table></figure>

<h2 id="（三）算法和算法分析"><a href="#（三）算法和算法分析" class="headerlink" title="（三）算法和算法分析"></a>（三）算法和算法分析</h2><h3 id="一、算法"><a href="#一、算法" class="headerlink" title="一、算法"></a>一、算法</h3><p><strong>算法是对问题求解步骤的描述，通过有限序列的指令来实现。</strong></p>
<p>五大特征 </p>
<ol>
<li><strong>有穷性</strong>:  有限步之后结束</li>
<li><strong>确定性</strong>:  不存在二义性，即没有歧义 </li>
<li><strong>可行性</strong>:  比如受限于计算机的计算能力，有些算法虽然理论上可行，但实际上无法完成。 </li>
<li><strong>输入</strong>:  能被计算机处理的各种类型数据，如数字，音频，图像等等。 </li>
<li><strong>输出</strong>:  一至多个程序输出结果。 </li>
</ol>
<p>![算法特性](./图片/第一章 绪论/算法特性.png)</p>
<h3 id="二、算法设计的要求"><a href="#二、算法设计的要求" class="headerlink" title="二、算法设计的要求"></a>二、算法设计的要求</h3><ol>
<li><strong>正确性</strong></li>
<li><strong>可读性</strong></li>
<li><strong>健壮性</strong></li>
<li><strong>效率与低存储量需求</strong></li>
</ol>
<h3 id="三、算法效率的度量"><a href="#三、算法效率的度量" class="headerlink" title="三、算法效率的度量"></a>三、算法效率的度量</h3><p>通过时间复杂度和空间复杂度。</p>
<h4 id="1、时间复杂度"><a href="#1、时间复杂度" class="headerlink" title="1、时间复杂度"></a>1、时间复杂度</h4><p>定义:<br>时间复杂度:</p>
<ul>
<li>它用来衡量算法随着问题规模增大，算法执行时间<strong>增长的快慢</strong>;</li>
<li>是问题规模的函数:T(n)是时间规模函数 时间复杂度主要分析T(n)的<strong>数量级</strong>；</li>
<li>T(n)=O(f(n)) f(n)是算法中基本运算的频度 一般我们考虑<strong>最坏情况</strong>下的时间复杂度</li>
</ul>
<p>计算方法：</p>
<p>取算法时间增长最快的那个函数项，忽略它的系数。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">如：有一次、二次、三次的函数项，应选择三次方的函数项，且令其系数为1.</span><br></pre></td></tr></table></figure>

<p>![时间复杂度1](./图片/第一章 绪论/时间复杂度1.png)</p>
<p>从图中，可以看到:</p>
<p>随着问题规模的增大(横坐标)，所需时间的增长率(斜率)差别很大。</p>
<p>而且，这种差距随着问题规模的增大而显著地增大。</p>
<p><strong><em>我们关心的就是算法的这个增长规模速度。</em></strong></p>
<p>常用的时间复杂度大小关系:</p>
<p>Ο(1) &lt; Ο(log2n) &lt; Ο(n) &lt; Ο(nlog2n) &lt; Ο(n2) &lt; Ο(n3) &lt; Ο(2n)  </p>
<p>PS: log2n更多写成logn</p>
<p>从左至右，时间性能依次降低。</p>
<h4 id="2、时间复杂度的计算"><a href="#2、时间复杂度的计算" class="headerlink" title="2、时间复杂度的计算"></a>2、时间复杂度的计算</h4><p>​    <strong>（1）原始算法</strong></p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> sum=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span> ( <span class="keyword">int</span> i = <span class="number">0</span> ; i &lt;= n ; i++)</span><br><span class="line">&#123;</span><br><span class="line">	sum=sum+i; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>int sum=0;        执行1次<br>int i = 0      执行1次，   i&lt;=n     执行n+2次，   i++     执行n+1次<br>sum=sum+i;     执行n+1次</p>
<p><strong>时间分析:</strong></p>
<p>该算法执行了3n+6个语句。 假设每个语句执行时间一致，均为常数t。则总时间T =(3n+6)*t。 随着问题规模n的增大，总时间的增长率与n的增长率一致，所以复杂度为O(n)。 </p>
<p><strong>结论:</strong><br> • 复杂度是关于增长率的，所以可以直接忽视常数项。<br> • 一般可以直接关注循环段基本操作语句(示例中的sum=sum+i)的执行次数。 </p>
<p><strong>（2）单个循环体</strong></p>
<p>直接关注循环体的执行次数，设为k。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> sum=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;=n;i++)&#123;</span><br><span class="line">	sum=sum+i; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>i 为1 执行了1次</p>
<p>i 为2 执行了2</p>
<p> …..</p>
<p>i为n 执行了n次 此时仍然满足条件 </p>
<p>i=n+1时，跳出循环 </p>
<p>所以循环体执行次数:  k=n+1 </p>
<p>故时间复杂度为O(n). </p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> sum=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i=<span class="number">2</span>*i)&#123;</span><br><span class="line">	sum=sum+i; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>i 取值:1, 2, 4, 8 … </p>
<p>满足条件:  $$2^{k}  \leq n $$</p>
<p>$$K &gt;  \log_{2}{n} $$ 时， 跳出循环 </p>
<p>所以循环体执行次数:  $$ [ \log_{2}{n} ]$$</p>
<p>故时间复杂度为O(logn). </p>
<p><strong>（3）多个循环体</strong></p>
<p>两个运算规则:乘法规则，加法规则。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (i=<span class="number">1</span>; i&lt;=n; i++) </span><br><span class="line">	x++;</span><br><span class="line">	</span><br><span class="line"><span class="keyword">for</span> (i=<span class="number">1</span>; i&lt;=n; i++) </span><br><span class="line">	<span class="keyword">for</span> (j=<span class="number">1</span>; j&lt;=n; j++)</span><br><span class="line">		x++;</span><br></pre></td></tr></table></figure>

<p>两个循环体是独立的，采用加法规则：</p>
<p>T(n) = T1(n) + T2(n) = max{ T1(n) , T2(n) }</p>
<p>​        = O(n^2)</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)&#123; </span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>;j&lt;=n; j=<span class="number">2</span>*j)&#123;</span><br><span class="line">		sum=sum+j; &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>两个循环体是嵌套的，采用乘法规则：</p>
<p>T(n) = T1(n) * T2(n)</p>
<p>​        = O(nlogn)</p>
<h4 id="3、空间复杂度"><a href="#3、空间复杂度" class="headerlink" title="3、空间复杂度"></a>3、空间复杂度</h4><p>空间复杂度:</p>
<ul>
<li>它用来衡量算法随着问题规模增大，算法所需空间的快慢;</li>
<li>是问题规模的函数:S(n)=O(g(n)) ;   算法所需空间的增长率和g(n)的增长率相同。</li>
</ul>
<h4 id="4、空间复杂度的计算"><a href="#4、空间复杂度的计算" class="headerlink" title="4、空间复杂度的计算"></a>4、空间复杂度的计算</h4><p>空间复杂度S(n)指算法运行过程中所使用的辅助空间的大小。</p>
<p>记为: </p>
<p>​                                S(n)=O(f(n)) </p>
<ul>
<li>辅助空间:除了存储算法本身的指令、常数、变量和输入数据外，还需要存储对数据操作的存储单元。 </li>
<li>算法原地工作是指算法所需的辅助空间是常量，即O(1)。<ul>
<li>固定大小，不随代码的复杂度改变而改变。 </li>
</ul>
</li>
<li>考研中出现O(1)，O(n)较多。 </li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/07/23/python全栈/第01部分：基础+模块+面向对象+网络编程/网络编程/网络编程/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="John Doe">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/07/23/python全栈/第01部分：基础+模块+面向对象+网络编程/网络编程/网络编程/" itemprop="url">网络编程</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-07-23T09:03:20+08:00">
                2019-07-23
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/python全栈-01部分-网络编程/" itemprop="url" rel="index">
                    <span itemprop="name">python全栈 -01部分 -网络编程</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>[TOC]</p>
<h2 id="（一）楔子"><a href="#（一）楔子" class="headerlink" title="（一）楔子"></a>（一）楔子</h2><p>​       你现在已经学会了写python代码，假如你写了两个python文件a.py和b.py，分别去运行，你就会发现，这两个python的文件分别运行的很好。但是如果这两个程序之间想要传递一个数据，你要怎么做呢？</p>
<p>​       这个问题以你现在的知识就可以解决了，我们可以创建一个文件，把a.py想要传递的内容写到文件中，然后b.py从这个文件中读取内容就可以了。</p>
<p><img src="https://raw.githubusercontent.com/suliangxu/MyHexoPicture/master/python%E5%85%A8%E6%A0%88/%E7%AC%AC01%E9%83%A8%E5%88%86%EF%BC%9A%E5%9F%BA%E7%A1%80%2B%E6%A8%A1%E5%9D%97%2B%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%2B%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B/%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B/1.png" alt></p>
<p>​        但是当你的a.py和b.py分别在不同电脑上的时候，你要怎么办呢？</p>
<p>​      类似的机制有计算机网盘，qq等等。我们可以在我们的电脑上和别人聊天，可以在自己的电脑上向网盘中上传、下载内容。这些都是两个程序在通信。</p>
<h2 id="（二）软件开发的架构"><a href="#（二）软件开发的架构" class="headerlink" title="（二）软件开发的架构"></a>（二）软件开发的架构</h2><p>我们了解的涉及到两个程序之间通讯的应用大致可以分为两种：</p>
<p>第一种是应用类：qq、微信、网盘、优酷这一类是属于需要安装的桌面应用</p>
<p>第二种是web类：比如百度、知乎、博客园等使用浏览器访问就可以直接使用的应用</p>
<p>这些应用的本质其实都是两个程序之间的通讯。而这两个分类又对应了两个软件开发的架构～</p>
<h3 id="一、C-S架构"><a href="#一、C-S架构" class="headerlink" title="一、C/S架构"></a>一、C/S架构</h3><p>​      C/S即：<strong>Client与Server</strong> ，中文意思：客户端与服务器端架构，这种架构也是从用户层面（也可以是物理层面）来划分的。</p>
<p>​        服务端是要一直运行，等待服务别人的</p>
<p>​        客户端是当人们有需求时，才请求服务</p>
<p>​       这里的客户端一般泛指客户端应用程序EXE，程序需要先安装后，才能运行在用户的电脑上，对用户的电脑操作系统环境依赖较大。</p>
<p><img src="https://raw.githubusercontent.com/suliangxu/MyHexoPicture/master/python%E5%85%A8%E6%A0%88/%E7%AC%AC01%E9%83%A8%E5%88%86%EF%BC%9A%E5%9F%BA%E7%A1%80%2B%E6%A8%A1%E5%9D%97%2B%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%2B%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B/%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B/2.png" alt></p>
<h3 id="二、B-S架构"><a href="#二、B-S架构" class="headerlink" title="二、B/S架构"></a>二、B/S架构</h3><p>​        B/S即：<strong>Browser与Server</strong>,中文意思：浏览器端与服务器端架构，这种架构是从用户层面来划分的。</p>
<p>​        Browser浏览器，其实也是一种Client客户端，只是这个客户端不需要大家去安装什么应用程序，只需在浏览器上通过HTTP请求服务器端相关的资源（网页资源），客户端Browser浏览器就能进行增删改查。</p>
<p>​        <strong>B/S架构其实也是一种C/S架构。</strong></p>
<p><img src="https://raw.githubusercontent.com/suliangxu/MyHexoPicture/master/python%E5%85%A8%E6%A0%88/%E7%AC%AC01%E9%83%A8%E5%88%86%EF%BC%9A%E5%9F%BA%E7%A1%80%2B%E6%A8%A1%E5%9D%97%2B%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%2B%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B/%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B/3.png" alt></p>
<h2 id="（三）网络基础"><a href="#（三）网络基础" class="headerlink" title="（三）网络基础"></a>（三）网络基础</h2><h3 id="一、一个程序如何在网络上找到另一个程序？"><a href="#一、一个程序如何在网络上找到另一个程序？" class="headerlink" title="一、一个程序如何在网络上找到另一个程序？"></a>一、一个程序如何在网络上找到另一个程序？</h3><p>​        首先，程序必须要启动，其次，必须有这台机器的地址，我们都知道我们人的地址大概就是国家\省\市\区\街道\楼\门牌号这样字。那么每一台联网的机器在网络上也有自己的地址，它的地址是怎么表示的呢？</p>
<p>​       就是使用一串数字来表示的，例如：100.4.5.6</p>
<p><strong>1、什么是ip地址</strong></p>
<figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">IP地址是指互联网协议地址（英语：Internet Protocol Address，又译为网际协议地址），是IP Address的缩写。IP地址是IP协议提供的一种统一的地址格式，它为互联网上的每一个网络和每一台主机分配一个逻辑地址，以此来屏蔽物理地址的差异。</span><br><span class="line"></span><br><span class="line">IP地址是一个32位的二进制数，通常被分割为4个“8位二进制数”（也就是4个字节）。IP地址通常用“点分十进制”表示成（a.b.c.d）的形式，其中，a,b,c,d都是0~255之间的十进制整数。例：点分十进IP地址（100.4.5.6），实际上是32位二进制数（01100100.00000100.00000101.00000110）。</span><br></pre></td></tr></table></figure>

<p>本地回环地址：127.0.0.1</p>
<p><strong>2、什么是端口</strong></p>
<figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">"端口"是英文port的意译，可以认为是设备与外界通讯交流的出口。</span><br></pre></td></tr></table></figure>

<p><strong>3、在windows上查看端口占用情况</strong></p>
<figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">netstat -aon|findstr "49157"</span><br></pre></td></tr></table></figure>

<p>因此ip地址精确到具体的一台电脑，而端口精确到具体的程序。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">我们找寻一台机器 : ip地址</span><br><span class="line">    如何判断 要找的机器在不在同一个局域网内:</span><br><span class="line">        用自己的ip地址和子网掩码按位与运算</span><br><span class="line">        192.168.21.36 11000000.10101000.00010101.00100100</span><br><span class="line">        255.255.255.0 11111111.11111111.11111111.00000000</span><br><span class="line">        192.168.21.0  11000000.10101000.00010101.00000000  # ---网段</span><br><span class="line">        用要找的机器ip和子网掩码按位与运算</span><br><span class="line">        192.168.21.21</span><br><span class="line">        如果上面的两个结果相同说明两台机器在同一个网段</span><br><span class="line">        子网掩码</span><br><span class="line">            2进制 8进制 10进制 16进制</span><br><span class="line"></span><br><span class="line">            16 8 4 2 1 (填位法)</span><br><span class="line">            1  0 1 0 0</span><br><span class="line">    要找的机器和你在同一个局域网内:</span><br><span class="line">        通过交换机</span><br><span class="line">            广播</span><br><span class="line">            和要找机器ip地址相同的服务器做出响应,将自己的ip地址返回给交换机</span><br><span class="line">            单播 : 把返回的信息再传递给要找机器的服务器</span><br><span class="line">    要找的机器和你不在同一个局域网内</span><br><span class="line">            先走交换机</span><br><span class="line">            交换机直接将消息传递给&quot;网关ip&quot;,通过ip找到对应机器所在的局域网</span><br><span class="line">            路由表 :网段 网关ip</span><br><span class="line">            通过对方局域网中的交换机进行广播</span><br><span class="line">            把信息回传给交换机</span><br><span class="line">            ......</span><br></pre></td></tr></table></figure>

<h3 id="二、osi七层模型"><a href="#二、osi七层模型" class="headerlink" title="二、osi七层模型"></a>二、osi七层模型</h3><h4 id="1、引子"><a href="#1、引子" class="headerlink" title="1、引子"></a>1、引子</h4><p>​        须知一个完整的计算机系统是由硬件、操作系统、应用软件三者组成,具备了这三个条件，一台计算机系统就可以自己跟自己玩了（打个单机游戏，玩个扫雷啥的）</p>
<p>​        如果你要跟别人一起玩，那你就需要上网了，什么是互联网？</p>
<p>​        互联网的核心就是由一堆协议组成，协议就是标准，比如全世界人通信的标准是英语，如果把计算机比作人，互联网协议就是计算机界的英语。所有的计算机都学会了互联网协议，那所有的计算机都就可以按照统一的标准去收发信息从而完成通信了。</p>
<h4 id="2、osi七层模型"><a href="#2、osi七层模型" class="headerlink" title="2、osi七层模型"></a>2、osi七层模型</h4><p>人们按照分工不同把互联网协议从逻辑上划分了层级：</p>
<p><img src="https://raw.githubusercontent.com/suliangxu/MyHexoPicture/master/python%E5%85%A8%E6%A0%88/%E7%AC%AC01%E9%83%A8%E5%88%86%EF%BC%9A%E5%9F%BA%E7%A1%80%2B%E6%A8%A1%E5%9D%97%2B%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%2B%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B/%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B/4.png" alt></p>
<h3 id="三、socket概念"><a href="#三、socket概念" class="headerlink" title="三、socket概念"></a>三、socket概念</h3><h4 id="1、socket层"><a href="#1、socket层" class="headerlink" title="1、socket层"></a>1、socket层</h4><p><img src="https://raw.githubusercontent.com/suliangxu/MyHexoPicture/master/python%E5%85%A8%E6%A0%88/%E7%AC%AC01%E9%83%A8%E5%88%86%EF%BC%9A%E5%9F%BA%E7%A1%80%2B%E6%A8%A1%E5%9D%97%2B%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%2B%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B/%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B/5.png" alt></p>
<h4 id="2、理解socket"><a href="#2、理解socket" class="headerlink" title="2、理解socket"></a>2、理解socket</h4><p>​       Socket是应用层与TCP/IP协议族通信的中间软件抽象层，它是一组接口。在设计模式中，Socket其实就是一个门面模式，它把复杂的TCP/IP协议族隐藏在Socket接口后面，对用户来说，一组简单的接口就是全部，让Socket去组织数据，以符合指定的协议。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">其实站在你的角度上看，socket就是一个模块。我们通过调用模块中已经实现的方法建立两个进程之间的连接和通信。</span><br><span class="line">也有人将socket说成ip+port，因为ip是用来标识互联网中的一台主机的位置，而port（端口）是用来标识这台机器上的一个应用程序。</span><br><span class="line">所以我们只要确立了ip和port就能找到一个应用程序，并且使用socket模块来与之通信。</span><br></pre></td></tr></table></figure>

<h3 id="四、套接字（socket）的发展史"><a href="#四、套接字（socket）的发展史" class="headerlink" title="四、套接字（socket）的发展史"></a>四、套接字（socket）的发展史</h3><p>​       套接字起源于 20 世纪 70 年代加利福尼亚大学伯克利分校版本的 Unix,即人们所说的 BSD Unix。 因此,有时人们也把套接字称为“伯克利套接字”或“BSD 套接字”。一开始,套接字被设计<strong>用在同 一台主机上多个应用程序之间的通讯</strong>。这也被称进程间通讯,或 IPC。套接字有两种（或者称为有两个种族）,分别是基于文件型的和基于网络型的。 </p>
<h4 id="1、基于文件类型的套接字家族"><a href="#1、基于文件类型的套接字家族" class="headerlink" title="1、基于文件类型的套接字家族"></a>1、基于文件类型的套接字家族</h4><p>套接字家族的名字：AF_UNIX</p>
<p>unix一切皆文件，基于文件的套接字调用的就是底层的文件系统来取数据，两个套接字进程运行在同一机器，可以通过访问同一个文件系统间接完成通信。</p>
<h4 id="2、基于网络类型的套接字家族"><a href="#2、基于网络类型的套接字家族" class="headerlink" title="2、基于网络类型的套接字家族"></a>2、基于网络类型的套接字家族</h4><p>套接字家族的名字：AF_INET（用于ipv4）</p>
<p>(还有AF_INET6被用于ipv6，还有一些其他的地址家族，不过，他们要么是只用于某个平台，要么就是已经被废弃，或者是很少被使用，或者是根本没有实现，所有地址家族中，AF_INET是使用最广泛的一个，python支持很多种地址家族，但是由于我们只关心网络编程，所以大部分时候我么只使用AF_INET)</p>
<h3 id="五、tcp协议和udp协议"><a href="#五、tcp协议和udp协议" class="headerlink" title="五、tcp协议和udp协议"></a>五、tcp协议和udp协议</h3><p><strong>TCP</strong>（Transmission Control Protocol）可靠的、面向连接的协议（eg:打电话）、传输效率低全双工通信（发送缓存&amp;接收缓存）、面向字节流。使用TCP的应用：Web浏览器；电子邮件、文件传输程序。</p>
<p><strong>UDP</strong>（User Datagram Protocol）不可靠的、无连接的服务，传输效率高（发送前时延小），一对一、一对多、多对一、多对多、面向报文，尽最大努力服务，无拥塞控制。使用UDP的应用：域名系统 (DNS)；视频流；IP语音(VoIP)。</p>
<p><img src="https://raw.githubusercontent.com/suliangxu/MyHexoPicture/master/python%E5%85%A8%E6%A0%88/%E7%AC%AC01%E9%83%A8%E5%88%86%EF%BC%9A%E5%9F%BA%E7%A1%80%2B%E6%A8%A1%E5%9D%97%2B%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%2B%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B/%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B/6.jpg" alt></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">TCP协议属于 : 传输层</span><br><span class="line">    面向连接 可靠的 字节流传输  长连接（一对一）</span><br><span class="line">UDP协议属于 : 传输层</span><br><span class="line">    面向数据包的 无连接的 不可靠的 速度快 不占用连接</span><br></pre></td></tr></table></figure>

<h2 id="（四）套接字（socket）初使用"><a href="#（四）套接字（socket）初使用" class="headerlink" title="（四）套接字（socket）初使用"></a>（四）套接字（socket）初使用</h2><h3 id="一、基于TCP协议的socket"><a href="#一、基于TCP协议的socket" class="headerlink" title="一、基于TCP协议的socket"></a>一、基于TCP协议的socket</h3><p><strong>tcp是基于链接的，必须先启动服务端，然后再启动客户端去链接服务端</strong></p>
<p><strong>（1）</strong></p>
<p><strong>server端</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> socket</span><br><span class="line">sk = socket.socket()</span><br><span class="line">sk.bind((<span class="string">'127.0.0.1'</span>,<span class="number">8898</span>))  <span class="comment">#把地址绑定到套接字</span></span><br><span class="line">sk.listen()          <span class="comment">#监听链接</span></span><br><span class="line">conn,addr = sk.accept() <span class="comment">#接受客户端链接</span></span><br><span class="line">ret = conn.recv(<span class="number">1024</span>)  <span class="comment">#接收客户端信息</span></span><br><span class="line">print(ret)       <span class="comment">#打印客户端信息</span></span><br><span class="line">conn.send(<span class="string">b'hi'</span>)        <span class="comment">#向客户端发送信息</span></span><br><span class="line">conn.close()       <span class="comment">#关闭客户端套接字</span></span><br><span class="line">sk.close()        <span class="comment">#关闭服务器套接字(可选)</span></span><br></pre></td></tr></table></figure>

<p><strong>client端</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> socket</span><br><span class="line">sk = socket.socket()           <span class="comment"># 创建客户套接字</span></span><br><span class="line">sk.connect((<span class="string">'127.0.0.1'</span>,<span class="number">8898</span>))    <span class="comment"># 尝试连接服务器</span></span><br><span class="line">sk.send(<span class="string">b'hello!'</span>)</span><br><span class="line">ret = sk.recv(<span class="number">1024</span>)         <span class="comment"># 对话(发送/接收)</span></span><br><span class="line">print(ret)</span><br><span class="line">sk.close()            <span class="comment"># 关闭客户套接字</span></span><br></pre></td></tr></table></figure>

<p><strong>问题：重启服务端时遇到</strong></p>
<p><img src="https://raw.githubusercontent.com/suliangxu/MyHexoPicture/master/python%E5%85%A8%E6%A0%88/%E7%AC%AC01%E9%83%A8%E5%88%86%EF%BC%9A%E5%9F%BA%E7%A1%80%2B%E6%A8%A1%E5%9D%97%2B%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%2B%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B/%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B/7.png" alt></p>
<p>解决方法：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#加入一条socket配置，重用ip和端口</span></span><br><span class="line"><span class="keyword">import</span> socket</span><br><span class="line"><span class="keyword">from</span> socket <span class="keyword">import</span> SOL_SOCKET,SO_REUSEADDR</span><br><span class="line">sk = socket.socket()</span><br><span class="line">sk.setsockopt(SOL_SOCKET,SO_REUSEADDR,<span class="number">1</span>) <span class="comment">#就是它，在bind前加,避免重启服务端时，出现OSError</span></span><br><span class="line">sk.bind((<span class="string">'127.0.0.1'</span>,<span class="number">8898</span>))  <span class="comment">#把地址绑定到套接字</span></span><br><span class="line">sk.listen()          <span class="comment">#监听链接</span></span><br><span class="line">conn,addr = sk.accept() <span class="comment">#接受客户端链接</span></span><br><span class="line">ret = conn.recv(<span class="number">1024</span>)   <span class="comment">#接收客户端信息</span></span><br><span class="line">print(ret)              <span class="comment">#打印客户端信息</span></span><br><span class="line">conn.send(<span class="string">b'hi'</span>)        <span class="comment">#向客户端发送信息</span></span><br><span class="line">conn.close()       <span class="comment">#关闭客户端套接字</span></span><br><span class="line">sk.close()        <span class="comment">#关闭服务器套接字(可选)</span></span><br></pre></td></tr></table></figure>

<p><strong>（2）</strong></p>
<p><strong>server端</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> socket</span><br><span class="line">sk = socket.socket()</span><br><span class="line">sk.setsockopt(socket.SOL_SOCKET,socket.SO_REUSEADDR,<span class="number">1</span>)</span><br><span class="line">sk.bind((<span class="string">'192.168.21.36'</span>,<span class="number">9000</span>))</span><br><span class="line">sk.listen()</span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    conn,addr = sk.accept()  <span class="comment"># 接收连接 三次握手conn</span></span><br><span class="line">    <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">        inp = input(<span class="string">'&gt;&gt;&gt;'</span>)</span><br><span class="line">        <span class="keyword">if</span> inp == <span class="string">'q'</span>:</span><br><span class="line">            conn.send(inp.encode(<span class="string">'utf-8'</span>))</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line">        conn.send(inp.encode(<span class="string">'utf-8'</span>))</span><br><span class="line">        msg = conn.recv(<span class="number">1024</span>)</span><br><span class="line">        <span class="keyword">if</span> msg == <span class="string">b'q'</span>:<span class="keyword">break</span></span><br><span class="line">        print(msg.decode(<span class="string">'utf-8'</span>))</span><br><span class="line">    conn.close()    <span class="comment"># 四次挥手</span></span><br><span class="line">sk.close()</span><br></pre></td></tr></table></figure>

<p><strong>client端</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> socket</span><br><span class="line">sk = socket.socket()</span><br><span class="line">sk.connect((<span class="string">'127.0.0.1'</span>,<span class="number">9000</span>))</span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    msg = sk.recv(<span class="number">1024</span>)</span><br><span class="line">    print(msg.decode(<span class="string">'utf-8'</span>))</span><br><span class="line">    <span class="keyword">if</span> msg == <span class="string">b'q'</span>:<span class="keyword">break</span></span><br><span class="line">    inp = input(<span class="string">'&gt;&gt;&gt;'</span>)</span><br><span class="line">    <span class="keyword">if</span> inp == <span class="string">'q'</span>:</span><br><span class="line">        sk.send(inp.encode(<span class="string">'utf-8'</span>))</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">    sk.send(inp.encode(<span class="string">'utf-8'</span>))</span><br><span class="line">sk.close()</span><br></pre></td></tr></table></figure>

<h3 id="二、基于UDP协议的socket"><a href="#二、基于UDP协议的socket" class="headerlink" title="二、基于UDP协议的socket"></a>二、基于UDP协议的socket</h3><p><strong>udp是无链接的，启动服务之后可以直接接受消息，不需要提前建立链接</strong></p>
<h4 id="1、简单使用"><a href="#1、简单使用" class="headerlink" title="1、简单使用"></a>1、简单使用</h4><p><strong>server端</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> socket</span><br><span class="line">udp_sk = socket.socket(type=socket.SOCK_DGRAM)   <span class="comment">#创建一个服务器的套接字</span></span><br><span class="line">udp_sk.bind((<span class="string">'127.0.0.1'</span>,<span class="number">9000</span>))        <span class="comment">#绑定服务器套接字</span></span><br><span class="line">msg,addr = udp_sk.recvfrom(<span class="number">1024</span>)</span><br><span class="line">print(msg)</span><br><span class="line">udp_sk.sendto(<span class="string">b'hi'</span>,addr)                 <span class="comment"># 对话(接收与发送)</span></span><br><span class="line">udp_sk.close()                         <span class="comment"># 关闭服务器套接字</span></span><br></pre></td></tr></table></figure>

<p><strong>client端</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> socket</span><br><span class="line">ip_port=(<span class="string">'127.0.0.1'</span>,<span class="number">9000</span>)</span><br><span class="line">udp_sk=socket.socket(type=socket.SOCK_DGRAM)</span><br><span class="line">udp_sk.sendto(<span class="string">b'hello'</span>,ip_port)</span><br><span class="line">back_msg,addr=udp_sk.recvfrom(<span class="number">1024</span>)</span><br><span class="line">print(back_msg.decode(<span class="string">'utf-8'</span>),addr)</span><br></pre></td></tr></table></figure>

<h4 id="2、qq聊天"><a href="#2、qq聊天" class="headerlink" title="2、qq聊天"></a>2、qq聊天</h4><p><strong>server</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#_*_coding:utf-8_*_</span></span><br><span class="line"><span class="keyword">import</span> socket</span><br><span class="line">ip_port=(<span class="string">'127.0.0.1'</span>,<span class="number">8081</span>)</span><br><span class="line">udp_server_sock=socket.socket(socket.AF_INET,socket.SOCK_DGRAM)</span><br><span class="line">udp_server_sock.bind(ip_port)</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    qq_msg,addr=udp_server_sock.recvfrom(<span class="number">1024</span>)</span><br><span class="line">    print(<span class="string">'来自[%s:%s]的一条消息:\033[1;44m%s\033[0m'</span> %(addr[<span class="number">0</span>],addr[<span class="number">1</span>],qq_msg.decode(<span class="string">'utf-8'</span>)))</span><br><span class="line">    back_msg=input(<span class="string">'回复消息: '</span>).strip()</span><br><span class="line"></span><br><span class="line">    udp_server_sock.sendto(back_msg.encode(<span class="string">'utf-8'</span>),addr)</span><br></pre></td></tr></table></figure>

<p><strong>client</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#_*_coding:utf-8_*_</span></span><br><span class="line"><span class="keyword">import</span> socket</span><br><span class="line">BUFSIZE=<span class="number">1024</span></span><br><span class="line">udp_client_socket=socket.socket(socket.AF_INET,socket.SOCK_DGRAM)</span><br><span class="line"></span><br><span class="line">qq_name_dic=&#123;</span><br><span class="line">    <span class="string">'金老板'</span>:(<span class="string">'127.0.0.1'</span>,<span class="number">8081</span>),</span><br><span class="line">    <span class="string">'哪吒'</span>:(<span class="string">'127.0.0.1'</span>,<span class="number">8081</span>),</span><br><span class="line">    <span class="string">'egg'</span>:(<span class="string">'127.0.0.1'</span>,<span class="number">8081</span>),</span><br><span class="line">    <span class="string">'yuan'</span>:(<span class="string">'127.0.0.1'</span>,<span class="number">8081</span>),</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    qq_name=input(<span class="string">'请选择聊天对象: '</span>).strip()</span><br><span class="line">    <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">        msg=input(<span class="string">'请输入消息,回车发送,输入q结束和他的聊天: '</span>).strip()</span><br><span class="line">        <span class="keyword">if</span> msg == <span class="string">'q'</span>:<span class="keyword">break</span></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> msg <span class="keyword">or</span> <span class="keyword">not</span> qq_name <span class="keyword">or</span> qq_name <span class="keyword">not</span> <span class="keyword">in</span> qq_name_dic:<span class="keyword">continue</span></span><br><span class="line">        udp_client_socket.sendto(msg.encode(<span class="string">'utf-8'</span>),qq_name_dic[qq_name])</span><br><span class="line"></span><br><span class="line">        back_msg,addr=udp_client_socket.recvfrom(BUFSIZE)</span><br><span class="line">        print(<span class="string">'来自[%s:%s]的一条消息:\033[1;44m%s\033[0m'</span> %(addr[<span class="number">0</span>],addr[<span class="number">1</span>],back_msg.decode(<span class="string">'utf-8'</span>)))</span><br><span class="line"></span><br><span class="line">udp_client_socket.close()</span><br></pre></td></tr></table></figure>

<h4 id="3、时间服务器"><a href="#3、时间服务器" class="headerlink" title="3、时间服务器"></a>3、时间服务器</h4><p><strong>server</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># _*_coding:utf-8_*_</span></span><br><span class="line"><span class="keyword">from</span> socket <span class="keyword">import</span> *</span><br><span class="line"><span class="keyword">from</span> time <span class="keyword">import</span> strftime</span><br><span class="line"></span><br><span class="line">ip_port = (<span class="string">'127.0.0.1'</span>, <span class="number">9000</span>)</span><br><span class="line">bufsize = <span class="number">1024</span></span><br><span class="line"></span><br><span class="line">tcp_server = socket(AF_INET, SOCK_DGRAM)</span><br><span class="line">tcp_server.setsockopt(SOL_SOCKET,SO_REUSEADDR,<span class="number">1</span>)</span><br><span class="line">tcp_server.bind(ip_port)</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    msg, addr = tcp_server.recvfrom(bufsize)</span><br><span class="line">    print(<span class="string">'===&gt;'</span>, msg)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> msg:</span><br><span class="line">        time_fmt = <span class="string">'%Y-%m-%d %X'</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        time_fmt = msg.decode(<span class="string">'utf-8'</span>)</span><br><span class="line">    back_msg = strftime(time_fmt)</span><br><span class="line"></span><br><span class="line">    tcp_server.sendto(back_msg.encode(<span class="string">'utf-8'</span>), addr)</span><br><span class="line"></span><br><span class="line">tcp_server.close()</span><br></pre></td></tr></table></figure>

<p><strong>client</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#_*_coding:utf-8_*_</span></span><br><span class="line"><span class="keyword">from</span> socket <span class="keyword">import</span> *</span><br><span class="line">ip_port=(<span class="string">'127.0.0.1'</span>,<span class="number">9000</span>)</span><br><span class="line">bufsize=<span class="number">1024</span></span><br><span class="line"></span><br><span class="line">tcp_client=socket(AF_INET,SOCK_DGRAM)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    msg=input(<span class="string">'请输入时间格式(例%Y %m %d)&gt;&gt;: '</span>).strip()</span><br><span class="line">    tcp_client.sendto(msg.encode(<span class="string">'utf-8'</span>),ip_port)</span><br><span class="line"></span><br><span class="line">    data=tcp_client.recv(bufsize)</span><br></pre></td></tr></table></figure>

<h3 id="三、socket参数的详解"><a href="#三、socket参数的详解" class="headerlink" title="三、socket参数的详解"></a>三、socket参数的详解</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">socket.socket(family=AF_INET,type=SOCK_STREAM,proto=<span class="number">0</span>,fileno=<span class="literal">None</span>)</span><br></pre></td></tr></table></figure>

<p>创建socket对象的参数说明：</p>
<table>
<thead>
<tr>
<th><strong>family</strong></th>
<th>地址系列应为AF_INET(默认值),AF_INET6,AF_UNIX,AF_CAN或AF_RDS。 （AF_UNIX 域实际上是使用本地 socket 文件来通信）</th>
</tr>
</thead>
<tbody><tr>
<td><strong>type</strong></td>
<td>套接字类型应为SOCK_STREAM(默认值),SOCK_DGRAM,SOCK_RAW或其他SOCK_常量之一。 <strong>SOCK_STREAM</strong> 是基于TCP的，有保障的（即能保证数据正确传送到对方）面向连接的SOCKET，多用于资料传送。  <strong>SOCK_DGRAM</strong> 是基于UDP的，无保障的面向消息的socket，多用于在网络上发广播信息。</td>
</tr>
<tr>
<td><strong>proto</strong></td>
<td>协议号通常为零,可以省略,或者在地址族为AF_CAN的情况下,协议应为CAN_RAW或CAN_BCM之一。</td>
</tr>
<tr>
<td><strong>fileno</strong></td>
<td>如果指定了fileno,则其他参数将被忽略,导致带有指定文件描述符的套接字返回。 与socket.fromfd()不同,fileno将返回相同的套接字,而不是重复的。 这可能有助于使用socket.close()关闭一个独立的插座。</td>
</tr>
</tbody></table>
<h2 id="（五）黏包"><a href="#（五）黏包" class="headerlink" title="（五）黏包"></a>（五）黏包</h2><h3 id="一、黏包现象"><a href="#一、黏包现象" class="headerlink" title="一、黏包现象"></a>一、黏包现象</h3><p>让我们基于tcp先制作一个远程执行命令的程序（命令ls -l ; lllllll ; pwd）</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># server 下发命令</span></span><br><span class="line"><span class="comment"># client 执行命令</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ssh协议</span></span><br><span class="line"><span class="comment"># import os</span></span><br><span class="line"><span class="comment"># ret = os.popen('ls').read()</span></span><br><span class="line"><span class="comment"># print(ret)</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> subprocess</span><br><span class="line"><span class="comment"># 内置模块 和os模块的功能有相似之处</span></span><br><span class="line"><span class="comment"># 能执行操作系统的命令的功能</span></span><br><span class="line">ret = subprocess.Popen(<span class="string">'dir'</span>,    <span class="comment"># 要执行的命令</span></span><br><span class="line">                       shell=<span class="literal">True</span>,  <span class="comment"># 表示要执行的是一条系统命令</span></span><br><span class="line">                       stdout=subprocess.PIPE, <span class="comment"># 存储执行结果的正常信息</span></span><br><span class="line">                       stderr=subprocess.PIPE) <span class="comment"># 存储执行结果的错误信息</span></span><br><span class="line">print(<span class="string">'stdout : '</span>,ret.stdout.read().decode(<span class="string">'gbk'</span>))</span><br><span class="line">print(<span class="string">'stderr : '</span>,ret.stderr.read().decode(<span class="string">'gbk'</span>))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 的结果的编码是以当前所在的系统为准的，如果是windows，那么res.stdout.read()读出的就是GBK编码的，在接收端需要用GBK解码</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 且只能从管道里读一次结果</span></span><br></pre></td></tr></table></figure>

<p>同时执行多条命令之后，得到的结果很可能只有一部分，在执行其他命令的时候又接收到之前执行的另外一部分结果，这种显现就是黏包。</p>
<h4 id="1、基于tcp协议实现的黏包"><a href="#1、基于tcp协议实现的黏包" class="headerlink" title="1、基于tcp协议实现的黏包"></a>1、基于tcp协议实现的黏包</h4><p><strong>tcp - server</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#_*_coding:utf-8_*_</span></span><br><span class="line"><span class="keyword">from</span> socket <span class="keyword">import</span> *</span><br><span class="line"><span class="keyword">import</span> subprocess</span><br><span class="line"></span><br><span class="line">ip_port=(<span class="string">'127.0.0.1'</span>,<span class="number">8888</span>)</span><br><span class="line">BUFSIZE=<span class="number">1024</span></span><br><span class="line"></span><br><span class="line">tcp_socket_server=socket(AF_INET,SOCK_STREAM)</span><br><span class="line">tcp_socket_server.setsockopt(SOL_SOCKET,SO_REUSEADDR,<span class="number">1</span>)</span><br><span class="line">tcp_socket_server.bind(ip_port)</span><br><span class="line">tcp_socket_server.listen(<span class="number">5</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    conn,addr=tcp_socket_server.accept()</span><br><span class="line">    print(<span class="string">'客户端'</span>,addr)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">        cmd=conn.recv(BUFSIZE)</span><br><span class="line">        <span class="keyword">if</span> len(cmd) == <span class="number">0</span>:<span class="keyword">break</span></span><br><span class="line"></span><br><span class="line">        res=subprocess.Popen(cmd.decode(<span class="string">'utf-8'</span>),shell=<span class="literal">True</span>,</span><br><span class="line">                         stdout=subprocess.PIPE,</span><br><span class="line">                         stdin=subprocess.PIPE,</span><br><span class="line">                         stderr=subprocess.PIPE)</span><br><span class="line"></span><br><span class="line">        stderr=res.stderr.read()</span><br><span class="line">        stdout=res.stdout.read()</span><br><span class="line">        conn.send(stderr)</span><br><span class="line">        conn.send(stdout)</span><br></pre></td></tr></table></figure>

<p><strong>tcp - client</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#_*_coding:utf-8_*_</span></span><br><span class="line"><span class="keyword">import</span> socket</span><br><span class="line">BUFSIZE=<span class="number">1024</span></span><br><span class="line">ip_port=(<span class="string">'127.0.0.1'</span>,<span class="number">8888</span>)</span><br><span class="line"></span><br><span class="line">s=socket.socket(socket.AF_INET,socket.SOCK_STREAM)</span><br><span class="line">res=s.connect_ex(ip_port)</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    msg=input(<span class="string">'&gt;&gt;: '</span>).strip()</span><br><span class="line">    <span class="keyword">if</span> len(msg) == <span class="number">0</span>:<span class="keyword">continue</span></span><br><span class="line">    <span class="keyword">if</span> msg == <span class="string">'quit'</span>:<span class="keyword">break</span></span><br><span class="line"></span><br><span class="line">    s.send(msg.encode(<span class="string">'utf-8'</span>))</span><br><span class="line">    act_res=s.recv(BUFSIZE)</span><br><span class="line"></span><br><span class="line">    print(act_res.decode(<span class="string">'utf-8'</span>),end=<span class="string">''</span>)</span><br></pre></td></tr></table></figure>

<h4 id="2、基于udp协议实现的黏包"><a href="#2、基于udp协议实现的黏包" class="headerlink" title="2、基于udp协议实现的黏包"></a>2、基于udp协议实现的黏包</h4><p><strong>udp - server</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#_*_coding:utf-8_*_</span></span><br><span class="line"><span class="keyword">from</span> socket <span class="keyword">import</span> *</span><br><span class="line"><span class="keyword">import</span> subprocess</span><br><span class="line"></span><br><span class="line">ip_port=(<span class="string">'127.0.0.1'</span>,<span class="number">9000</span>)</span><br><span class="line">bufsize=<span class="number">1024</span></span><br><span class="line"></span><br><span class="line">udp_server=socket(AF_INET,SOCK_DGRAM)</span><br><span class="line">udp_server.setsockopt(SOL_SOCKET,SO_REUSEADDR,<span class="number">1</span>)</span><br><span class="line">udp_server.bind(ip_port)</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    <span class="comment">#收消息</span></span><br><span class="line">    cmd,addr=udp_server.recvfrom(bufsize)</span><br><span class="line">    print(<span class="string">'用户命令-----&gt;'</span>,cmd)</span><br><span class="line"></span><br><span class="line">    <span class="comment">#逻辑处理</span></span><br><span class="line">    res=subprocess.Popen(cmd.decode(<span class="string">'utf-8'</span>),shell=<span class="literal">True</span>,stderr=subprocess.PIPE,stdin=subprocess.PIPE,stdout=subprocess.PIPE)</span><br><span class="line">    stderr=res.stderr.read()</span><br><span class="line">    stdout=res.stdout.read()</span><br><span class="line"></span><br><span class="line">    <span class="comment">#发消息</span></span><br><span class="line">    udp_server.sendto(stderr,addr)</span><br><span class="line">    udp_server.sendto(stdout,addr)</span><br><span class="line">udp_server.close()</span><br></pre></td></tr></table></figure>

<p><strong>udp - client</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> socket <span class="keyword">import</span> *</span><br><span class="line">ip_port=(<span class="string">'127.0.0.1'</span>,<span class="number">9000</span>)</span><br><span class="line">bufsize=<span class="number">1024</span></span><br><span class="line"></span><br><span class="line">udp_client=socket(AF_INET,SOCK_DGRAM)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    msg=input(<span class="string">'&gt;&gt;: '</span>).strip()</span><br><span class="line">    udp_client.sendto(msg.encode(<span class="string">'utf-8'</span>),ip_port)</span><br><span class="line">    err,addr=udp_client.recvfrom(bufsize)</span><br><span class="line">    out,addr=udp_client.recvfrom(bufsize)</span><br><span class="line">    <span class="keyword">if</span> err:</span><br><span class="line">        print(<span class="string">'error : %s'</span>%err.decode(<span class="string">'utf-8'</span>),end=<span class="string">''</span>)</span><br><span class="line">    <span class="keyword">if</span> out:</span><br><span class="line">        print(out.decode(<span class="string">'utf-8'</span>), end=<span class="string">''</span>)</span><br></pre></td></tr></table></figure>

<p><strong>注意：只有TCP有粘包现象，UDP永远不会粘包</strong></p>
<h3 id="二、黏包成因"><a href="#二、黏包成因" class="headerlink" title="二、黏包成因"></a>二、黏包成因</h3><h4 id="1、TCP协议中的数据传递"><a href="#1、TCP协议中的数据传递" class="headerlink" title="1、TCP协议中的数据传递"></a>1、TCP协议中的数据传递</h4><p><strong>（1）tcp协议的拆包机制</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">当发送端缓冲区的长度大于网卡的MTU时，tcp会将这次发送的数据拆成几个数据包发送出去。 </span><br><span class="line">MTU是Maximum Transmission Unit的缩写。意思是网络上传送的最大数据包。MTU的单位是字节。 大部分网络设备的MTU都是1500。如果本机的MTU比网关的MTU大，大的数据包就会被拆开来传送，这样会产生很多数据包碎片，增加丢包率，降低网络速度。</span><br></pre></td></tr></table></figure>

<p><strong>（2）面向流的通信特点和Nagle算法</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">TCP（transport control protocol，传输控制协议）是面向连接的，面向流的，提供高可靠性服务。</span><br><span class="line">收发两端（客户端和服务器端）都要有一一成对的socket，因此，发送端为了将多个发往接收端的包，更有效的发到对方，使用了优化方法（Nagle算法），将多次间隔较小且数据量小的数据，合并成一个大的数据块，然后进行封包。</span><br><span class="line">这样，接收端，就难于分辨出来了，必须提供科学的拆包机制。 即面向流的通信是无消息保护边界的。 </span><br><span class="line">对于空消息：tcp是基于数据流的，于是收发的消息不能为空，这就需要在客户端和服务端都添加空消息的处理机制，防止程序卡住，而udp是基于数据报的，即便是你输入的是空内容（直接回车），也可以被发送，udp协议会帮你封装上消息头发送过去。 </span><br><span class="line">可靠黏包的tcp协议：tcp的协议数据不会丢，没有收完包，下次接收，会继续上次继续接收，己端总是在收到ack时才会清除缓冲区内容。数据是可靠的，但是会粘包。</span><br></pre></td></tr></table></figure>

<p><strong>（3）基于tcp协议特点的黏包现象成因</strong></p>
<p><img src="https://raw.githubusercontent.com/suliangxu/MyHexoPicture/master/python%E5%85%A8%E6%A0%88/%E7%AC%AC01%E9%83%A8%E5%88%86%EF%BC%9A%E5%9F%BA%E7%A1%80%2B%E6%A8%A1%E5%9D%97%2B%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%2B%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B/%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B/8.png" alt></p>
<p>​        例如基于tcp的套接字客户端往服务端上传文件，发送时文件内容是按照一段一段的字节流发送的，在接收方看了，根本不知道该文件的字节流从何处开始，在何处结束</p>
<p>​        此外，发送方引起的粘包是由TCP协议本身造成的，TCP为提高传输效率，发送方往往要收集到足够多的数据后才发送一个TCP段。若连续几次需要send的数据都很少，通常TCP会根据优化算法把这些数据合成一个TCP段后一次发送出去，这样接收方就收到了粘包数据。</p>
<h4 id="2、UDP不会发生黏包"><a href="#2、UDP不会发生黏包" class="headerlink" title="2、UDP不会发生黏包"></a>2、UDP不会发生黏包</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">UDP（user datagram protocol，用户数据报协议）是无连接的，面向消息的，提供高效率服务。 </span><br><span class="line">不会使用块的合并优化算法，, 由于UDP支持的是一对多的模式，所以接收端的skbuff(套接字缓冲区）采用了链式结构来记录每一个到达的UDP包，在每个UDP包中就有了消息头（消息来源地址，端口等信息），这样，对于接收端来说，就容易进行区分处理了。 即面向消息的通信是有消息保护边界的。 </span><br><span class="line">对于空消息：tcp是基于数据流的，于是收发的消息不能为空，这就需要在客户端和服务端都添加空消息的处理机制，防止程序卡住，而udp是基于数据报的，即便是你输入的是空内容（直接回车），也可以被发送，udp协议会帮你封装上消息头发送过去。 </span><br><span class="line">不可靠不黏包的udp协议：udp的recvfrom是阻塞的，一个recvfrom(x)必须对唯一一个sendinto(y),收完了x个字节的数据就算完成,若是y;x数据就丢失，这意味着udp根本不会粘包，但是会丢数据，不可靠。</span><br></pre></td></tr></table></figure>

<p><strong><em>补充：udp和tcp一次发送数据长度的限制</em></strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">用UDP协议发送时，用sendto函数最大能发送数据的长度为：65535- IP头(20) – UDP头(8)＝65507字节。用sendto函数发送数据时，如果发送数据长度大于该值，则函数会返回错误。（丢弃这个包，不进行发送） </span><br><span class="line"></span><br><span class="line"> 用TCP协议发送时，由于TCP是数据流协议，因此不存在包大小的限制（暂不考虑缓冲区的大小），这是指在用send函数时，数据长度参数不受限制。而实际上，所指定的这段数据并不一定会一次性发送出去，如果这段数据比较长，会被分段发送，如果比较短，可能会等待和下一次数据一起发送。</span><br></pre></td></tr></table></figure>

<h4 id="3、会发生黏包的两种情况"><a href="#3、会发生黏包的两种情况" class="headerlink" title="3、会发生黏包的两种情况"></a>3、会发生黏包的两种情况</h4><p><strong>（1）情况一：发送方的缓存机制</strong></p>
<p>发送端需要等缓冲区满才发送出去，造成黏包（发送数据时间间隔很短，数据很小，会合到一起，产生黏包）</p>
<p>服务端：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#_*_coding:utf-8_*_</span></span><br><span class="line"><span class="keyword">from</span> socket <span class="keyword">import</span> *</span><br><span class="line">ip_port=(<span class="string">'127.0.0.1'</span>,<span class="number">8080</span>)</span><br><span class="line"></span><br><span class="line">tcp_socket_server=socket(AF_INET,SOCK_STREAM)</span><br><span class="line">tcp_socket_server.bind(ip_port)</span><br><span class="line">tcp_socket_server.listen(<span class="number">5</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">conn,addr=tcp_socket_server.accept()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">data1=conn.recv(<span class="number">10</span>)</span><br><span class="line">data2=conn.recv(<span class="number">10</span>)</span><br><span class="line"></span><br><span class="line">print(<span class="string">'-----&gt;'</span>,data1.decode(<span class="string">'utf-8'</span>))</span><br><span class="line">print(<span class="string">'-----&gt;'</span>,data2.decode(<span class="string">'utf-8'</span>))</span><br><span class="line"></span><br><span class="line">conn.close()</span><br></pre></td></tr></table></figure>

<p>客户端：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#_*_coding:utf-8_*_</span></span><br><span class="line"><span class="keyword">import</span> socket</span><br><span class="line">BUFSIZE=<span class="number">1024</span></span><br><span class="line">ip_port=(<span class="string">'127.0.0.1'</span>,<span class="number">8080</span>)</span><br><span class="line"></span><br><span class="line">s=socket.socket(socket.AF_INET,socket.SOCK_STREAM)</span><br><span class="line">res=s.connect_ex(ip_port)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">s.send(<span class="string">'hello'</span>.encode(<span class="string">'utf-8'</span>))</span><br><span class="line">s.send(<span class="string">'egg'</span>.encode(<span class="string">'utf-8'</span>))</span><br></pre></td></tr></table></figure>

<p><strong>（2）情况二：接收方的缓存机制</strong></p>
<p>接收方不及时接收缓冲区的包，造成多个包接收（客户端发送了一段数据，服务端只收了一小部分，服务端下次再收的时候还是从缓冲区拿上次遗留的数据，产生粘包） </p>
<p>服务端：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#_*_coding:utf-8_*_</span></span><br><span class="line"><span class="keyword">from</span> socket <span class="keyword">import</span> *</span><br><span class="line">ip_port=(<span class="string">'127.0.0.1'</span>,<span class="number">8080</span>)</span><br><span class="line"></span><br><span class="line">tcp_socket_server=socket(AF_INET,SOCK_STREAM)</span><br><span class="line">tcp_socket_server.bind(ip_port)</span><br><span class="line">tcp_socket_server.listen(<span class="number">5</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">conn,addr=tcp_socket_server.accept()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">data1=conn.recv(<span class="number">2</span>) <span class="comment">#一次没有收完整</span></span><br><span class="line">data2=conn.recv(<span class="number">10</span>)<span class="comment">#下次收的时候,会先取旧的数据,然后取新的</span></span><br><span class="line"></span><br><span class="line">print(<span class="string">'-----&gt;'</span>,data1.decode(<span class="string">'utf-8'</span>))</span><br><span class="line">print(<span class="string">'-----&gt;'</span>,data2.decode(<span class="string">'utf-8'</span>))</span><br><span class="line"></span><br><span class="line">conn.close()</span><br></pre></td></tr></table></figure>

<p>客户端：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#_*_coding:utf-8_*_</span></span><br><span class="line"><span class="keyword">import</span> socket</span><br><span class="line">BUFSIZE=<span class="number">1024</span></span><br><span class="line">ip_port=(<span class="string">'127.0.0.1'</span>,<span class="number">8080</span>)</span><br><span class="line"></span><br><span class="line">s=socket.socket(socket.AF_INET,socket.SOCK_STREAM)</span><br><span class="line">res=s.connect_ex(ip_port)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">s.send(<span class="string">'hello egg'</span>.encode(<span class="string">'utf-8'</span>))</span><br></pre></td></tr></table></figure>

<h4 id="4、总结"><a href="#4、总结" class="headerlink" title="4、总结"></a>4、总结</h4><p>黏包现象只发生在tcp协议中：</p>
<p>1.从表面上看，黏包问题主要是因为发送方和接收方的缓存机制、tcp协议面向流通信的特点。</p>
<p>2.实际上，<strong>主要还是因为接收方不知道消息之间的界限，不知道一次性提取多少字节的数据所造成的</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">为什么会出现黏包现象？</span><br><span class="line">首先只有在TCP协议中才会出现黏包现象</span><br><span class="line">是因为TCP协议是面向流的协议</span><br><span class="line">在发送的数据传输的过程中还有缓存机制来避免数据流失</span><br><span class="line">因此 在连续发送小数据的时候 以及接收大小不符的时候都容易出现黏包现象</span><br><span class="line">本质还是因为我们在接受数据的时候不知道发送的数据的长短</span><br><span class="line"></span><br><span class="line">解决黏包问题：</span><br><span class="line">1、在传输大量数据之前先告诉接收端要发送的数据的大小</span><br><span class="line">2、如果想要更漂亮地解决问题，可以通过struct模块来实现</span><br></pre></td></tr></table></figure>

<h3 id="三、黏包的解决方案"><a href="#三、黏包的解决方案" class="headerlink" title="三、黏包的解决方案"></a>三、黏包的解决方案</h3><h4 id="1、解决方案一"><a href="#1、解决方案一" class="headerlink" title="1、解决方案一"></a>1、解决方案一</h4><p>​        问题的根源在于，接收端不知道发送端将要传送的字节流的长度，所以解决粘包的方法就是围绕，如何让发送端在发送数据前，把自己将要发送的字节流总大小让接收端知晓，然后接收端来一个死循环接收完所有数据。</p>
<p><img src="https://raw.githubusercontent.com/suliangxu/MyHexoPicture/master/python%E5%85%A8%E6%A0%88/%E7%AC%AC01%E9%83%A8%E5%88%86%EF%BC%9A%E5%9F%BA%E7%A1%80%2B%E6%A8%A1%E5%9D%97%2B%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%2B%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B/%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B/9.png" alt></p>
<p>服务端：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> socket</span><br><span class="line"><span class="keyword">import</span> subprocess</span><br><span class="line"></span><br><span class="line">sk = socket.socket()</span><br><span class="line">sk.bind((<span class="string">'127.0.0.1'</span>, <span class="number">8080</span>))</span><br><span class="line">sk.listen()</span><br><span class="line">conn, addr = sk.accept()</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    cmd = input(<span class="string">'&gt;&gt;&gt;'</span>)</span><br><span class="line">    <span class="keyword">if</span> cmd == <span class="string">'q'</span>:</span><br><span class="line">        conn.send(<span class="string">b'q'</span>)</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">    conn.send(cmd.encode(<span class="string">'utf-8'</span>))  <span class="comment">#</span></span><br><span class="line">    num = conn.recv(<span class="number">1024</span>).decode(<span class="string">'utf-8'</span>)</span><br><span class="line">    conn.send(<span class="string">b'ok'</span>)</span><br><span class="line">    res = conn.recv(int(num)).decode(<span class="string">'utf-8'</span>)   <span class="comment">#</span></span><br><span class="line">    print(res)</span><br><span class="line"></span><br><span class="line">conn.close()</span><br><span class="line">sk.close()</span><br></pre></td></tr></table></figure>

<p>客户端：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> socket</span><br><span class="line"><span class="keyword">import</span> subprocess</span><br><span class="line"></span><br><span class="line">sk = socket.socket()</span><br><span class="line">sk.connect((<span class="string">'127.0.0.1'</span>, <span class="number">8080</span>))</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    cmd = sk.recv(<span class="number">1024</span>).decode(<span class="string">'utf-8'</span>) <span class="comment">#</span></span><br><span class="line">    <span class="keyword">if</span> cmd == <span class="string">'q'</span>:</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line"></span><br><span class="line">    res = subprocess.Popen(cmd, shell=<span class="literal">True</span>,</span><br><span class="line">                           stdout=subprocess.PIPE,</span><br><span class="line">                           stderr=subprocess.PIPE)</span><br><span class="line">    std_out = res.stdout.read()</span><br><span class="line">    std_err = res.stderr.read()</span><br><span class="line"></span><br><span class="line">    sk.send(str(len(std_out) + len(std_err)).encode(<span class="string">'utf-8'</span>))</span><br><span class="line">    sk.recv(<span class="number">1024</span>)   <span class="comment"># ok</span></span><br><span class="line">    sk.send(std_out)</span><br><span class="line">    sk.send(std_err)</span><br><span class="line"></span><br><span class="line">sk.close()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 好处：确定了我到底要接收多大的数据</span></span><br><span class="line">        <span class="comment"># 要在文件中配置一个配置项：就是每一次recv的大小  buffer = 4096</span></span><br><span class="line">        <span class="comment"># 当我们要发送大数据的时候，要明确的告诉接收方要发送多大的数据，以便接收方能够准确的接收到所有的数据</span></span><br><span class="line">        <span class="comment"># 多用在文件传输的过程中</span></span><br><span class="line">            <span class="comment"># 大文件的传输 一定是按照字节读，每一次读固定的字节</span></span><br><span class="line">            <span class="comment"># 传输的过程中 一边读一边传， 接收端一边收一边写</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 缺点：多了一次交互，会产生额外的网络延迟</span></span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">存在的问题：</span><br><span class="line">程序的运行速度远快于网络传输速度，所以在发送一段字节前，先用send去发送该字节流长度，这种方式会放大网络延迟带来的性能损耗</span><br></pre></td></tr></table></figure>

<h4 id="2、解决方案进阶"><a href="#2、解决方案进阶" class="headerlink" title="2、解决方案进阶"></a>2、解决方案进阶</h4><p>刚刚的方法，问题在于我们我们在发送</p>
<p>我们可以借助一个模块，这个模块可以把要发送的数据长度转换成固定长度的字节。这样客户端每次接收消息之前只要先接受这个固定长度字节的内容看一看接下来要接收的信息大小，那么最终接受的数据只要达到这个值就停止，就能刚好不多不少的接收完整的数据了。</p>
<h5 id="（1）struct模块"><a href="#（1）struct模块" class="headerlink" title="（1）struct模块"></a>（1）struct模块</h5><p>该模块可以把一个类型，如数字，转成固定长度的bytes</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; struct.pack(&apos;i&apos;,1111111111111)</span><br><span class="line"></span><br><span class="line">struct.error: &apos;i&apos; format requires -2147483648 &lt;= number &lt;= 2147483647 #这个是范围</span><br></pre></td></tr></table></figure>

<p><img src="https://raw.githubusercontent.com/suliangxu/MyHexoPicture/master/python%E5%85%A8%E6%A0%88/%E7%AC%AC01%E9%83%A8%E5%88%86%EF%BC%9A%E5%9F%BA%E7%A1%80%2B%E6%A8%A1%E5%9D%97%2B%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%2B%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B/%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B/10.png" alt></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">我们在网络上传输的所有数据都叫做 数据包</span><br><span class="line">数据包里所有的数据都叫 报文</span><br><span class="line">报文里不止有数据， 还有ip地址 mac地址 端口号</span><br><span class="line">所有报文都有报头</span><br><span class="line">一般所有协议都有报头：接收多少个字节...</span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> json,struct</span><br><span class="line"><span class="comment">#假设通过客户端上传1T:1073741824000的文件a.txt</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#为避免粘包,必须自定制报头</span></span><br><span class="line">header=&#123;<span class="string">'file_size'</span>:<span class="number">1073741824000</span>,<span class="string">'file_name'</span>:<span class="string">'/a/b/c/d/e/a.txt'</span>,<span class="string">'md5'</span>:<span class="string">'8f6fbf8347faa4924a76856701edb0f3'</span>&#125; <span class="comment">#1T数据,文件路径和md5值</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#为了该报头能传送,需要序列化并且转为bytes</span></span><br><span class="line">head_bytes=bytes(json.dumps(header),encoding=<span class="string">'utf-8'</span>) <span class="comment">#序列化并转成bytes,用于传输</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#为了让客户端知道报头的长度,用struck将报头长度这个数字转成固定长度:4个字节</span></span><br><span class="line">head_len_bytes=struct.pack(<span class="string">'i'</span>,len(head_bytes)) <span class="comment">#这4个字节里只包含了一个数字,该数字是报头的长度</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#客户端开始发送</span></span><br><span class="line">conn.send(head_len_bytes) <span class="comment">#先发报头的长度,4个bytes</span></span><br><span class="line">conn.send(head_bytes) <span class="comment">#再发报头的字节格式</span></span><br><span class="line">conn.sendall(文件内容) <span class="comment">#然后发真实内容的字节格式</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#服务端开始接收</span></span><br><span class="line">head_len_bytes=s.recv(<span class="number">4</span>) <span class="comment">#先收报头4个bytes,得到报头长度的字节格式</span></span><br><span class="line">x=struct.unpack(<span class="string">'i'</span>,head_len_bytes)[<span class="number">0</span>] <span class="comment">#提取报头的长度</span></span><br><span class="line"></span><br><span class="line">head_bytes=s.recv(x) <span class="comment">#按照报头长度x,收取报头的bytes格式</span></span><br><span class="line">header=json.loads(json.dumps(header)) <span class="comment">#提取报头</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#最后根据报头的内容提取真实的数据,比如</span></span><br><span class="line">real_data_len=s.recv(header[<span class="string">'file_size'</span>])</span><br><span class="line">s.recv(real_data_len)</span><br></pre></td></tr></table></figure>

<p>关于struct的详细用法：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#_*_coding:utf-8_*_</span></span><br><span class="line"><span class="comment">#http://www.cnblogs.com/coser/archive/2011/12/17/2291160.html</span></span><br><span class="line">__author__ = <span class="string">'Linhaifeng'</span></span><br><span class="line"><span class="keyword">import</span> struct</span><br><span class="line"><span class="keyword">import</span> binascii</span><br><span class="line"><span class="keyword">import</span> ctypes</span><br><span class="line"></span><br><span class="line">values1 = (<span class="number">1</span>, <span class="string">'abc'</span>.encode(<span class="string">'utf-8'</span>), <span class="number">2.7</span>)</span><br><span class="line">values2 = (<span class="string">'defg'</span>.encode(<span class="string">'utf-8'</span>),<span class="number">101</span>)</span><br><span class="line">s1 = struct.Struct(<span class="string">'I3sf'</span>)</span><br><span class="line">s2 = struct.Struct(<span class="string">'4sI'</span>)</span><br><span class="line"></span><br><span class="line">print(s1.size,s2.size)</span><br><span class="line">prebuffer=ctypes.create_string_buffer(s1.size+s2.size)</span><br><span class="line">print(<span class="string">'Before : '</span>,binascii.hexlify(prebuffer))</span><br><span class="line"><span class="comment"># t=binascii.hexlify('asdfaf'.encode('utf-8'))</span></span><br><span class="line"><span class="comment"># print(t)</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">s1.pack_into(prebuffer,<span class="number">0</span>,*values1)</span><br><span class="line">s2.pack_into(prebuffer,s1.size,*values2)</span><br><span class="line"></span><br><span class="line">print(<span class="string">'After pack'</span>,binascii.hexlify(prebuffer))</span><br><span class="line">print(s1.unpack_from(prebuffer,<span class="number">0</span>))</span><br><span class="line">print(s2.unpack_from(prebuffer,s1.size))</span><br><span class="line"></span><br><span class="line">s3=struct.Struct(<span class="string">'ii'</span>)</span><br><span class="line">s3.pack_into(prebuffer,<span class="number">0</span>,<span class="number">123</span>,<span class="number">123</span>)</span><br><span class="line">print(<span class="string">'After pack'</span>,binascii.hexlify(prebuffer))</span><br><span class="line">print(s3.unpack_from(prebuffer,<span class="number">0</span>))</span><br></pre></td></tr></table></figure>

<h5 id="（2）使用struct解决黏包"><a href="#（2）使用struct解决黏包" class="headerlink" title="（2）使用struct解决黏包"></a>（2）使用struct解决黏包</h5><p>借助struct模块，我们知道长度数字可以被转换成一个标准大小的4字节数字。因此可以利用这个特点来预先发送数据长度。</p>
<table>
<thead>
<tr>
<th>发送时</th>
<th>接收时</th>
</tr>
</thead>
<tbody><tr>
<td>先发送struct转换好的数据长度4字节</td>
<td>先接受4个字节使用struct转换成数字来获取要接收的数据长度</td>
</tr>
<tr>
<td>再发送数据</td>
<td>再按照长度接收数据</td>
</tr>
</tbody></table>
<h6 id="a-简单版："><a href="#a-简单版：" class="headerlink" title="(a)简单版："></a>(a)简单版：</h6><p>server</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> socket</span><br><span class="line"><span class="keyword">import</span> struct</span><br><span class="line"></span><br><span class="line">sk = socket.socket()</span><br><span class="line">sk.bind((<span class="string">'127.0.0.1'</span>, <span class="number">8080</span>))</span><br><span class="line">sk.listen()</span><br><span class="line">conn, addr = sk.accept()</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    cmd = input(<span class="string">'&gt;&gt;&gt;'</span>)</span><br><span class="line">    <span class="keyword">if</span> cmd == <span class="string">'q'</span>:</span><br><span class="line">        conn.send(<span class="string">b'q'</span>)</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">    conn.send(cmd.encode(<span class="string">'utf-8'</span>))  <span class="comment">#</span></span><br><span class="line">    num = conn.recv(<span class="number">4</span>)</span><br><span class="line">    num = struct.unpack(<span class="string">'i'</span>, num)[<span class="number">0</span>]</span><br><span class="line">    res = conn.recv(int(num)).decode(<span class="string">'utf-8'</span>)   <span class="comment">#</span></span><br><span class="line">    print(res)</span><br><span class="line"></span><br><span class="line">conn.close()</span><br><span class="line">sk.close()</span><br></pre></td></tr></table></figure>

<p>client</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> socket</span><br><span class="line"><span class="keyword">import</span> subprocess</span><br><span class="line"><span class="keyword">import</span> struct</span><br><span class="line"></span><br><span class="line">sk = socket.socket()</span><br><span class="line">sk.connect((<span class="string">'127.0.0.1'</span>, <span class="number">8080</span>))</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    cmd = sk.recv(<span class="number">1024</span>).decode(<span class="string">'utf-8'</span>) <span class="comment">#</span></span><br><span class="line">    <span class="keyword">if</span> cmd == <span class="string">'q'</span>:</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line"></span><br><span class="line">    res = subprocess.Popen(cmd, shell=<span class="literal">True</span>,</span><br><span class="line">                           stdout=subprocess.PIPE,</span><br><span class="line">                           stderr=subprocess.PIPE)</span><br><span class="line">    std_out = res.stdout.read()</span><br><span class="line">    std_err = res.stderr.read()</span><br><span class="line"></span><br><span class="line">    len_num = len(std_out) + len(std_err)</span><br><span class="line">    num_by = struct.pack(<span class="string">'i'</span>, len_num)</span><br><span class="line">    sk.send(num_by)</span><br><span class="line">    sk.send(std_out)</span><br><span class="line">    sk.send(std_err)</span><br><span class="line"></span><br><span class="line">sk.close()</span><br></pre></td></tr></table></figure>

<h6 id="b-复杂版："><a href="#b-复杂版：" class="headerlink" title="(b)复杂版："></a>(b)复杂版：</h6><p>服务端（自定制报头）：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> socket,struct,json</span><br><span class="line"><span class="keyword">import</span> subprocess</span><br><span class="line">phone=socket.socket(socket.AF_INET,socket.SOCK_STREAM)</span><br><span class="line">phone.setsockopt(socket.SOL_SOCKET,socket.SO_REUSEADDR,<span class="number">1</span>) <span class="comment">#就是它，在bind前加</span></span><br><span class="line"></span><br><span class="line">phone.bind((<span class="string">'127.0.0.1'</span>,<span class="number">8080</span>))</span><br><span class="line"></span><br><span class="line">phone.listen(<span class="number">5</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    conn,addr=phone.accept()</span><br><span class="line">    <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">        cmd=conn.recv(<span class="number">1024</span>)</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> cmd:<span class="keyword">break</span></span><br><span class="line">        print(<span class="string">'cmd: %s'</span> %cmd)</span><br><span class="line"></span><br><span class="line">        res=subprocess.Popen(cmd.decode(<span class="string">'utf-8'</span>),</span><br><span class="line">                             shell=<span class="literal">True</span>,</span><br><span class="line">                             stdout=subprocess.PIPE,</span><br><span class="line">                             stderr=subprocess.PIPE)</span><br><span class="line">        err=res.stderr.read()</span><br><span class="line">        print(err)</span><br><span class="line">        <span class="keyword">if</span> err:</span><br><span class="line">            back_msg=err</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            back_msg=res.stdout.read()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        conn.send(struct.pack(<span class="string">'i'</span>,len(back_msg))) <span class="comment">#先发back_msg的长度</span></span><br><span class="line">        conn.sendall(back_msg) <span class="comment">#在发真实的内容</span></span><br><span class="line"></span><br><span class="line">    conn.close()</span><br></pre></td></tr></table></figure>

<p>客户端（自定制报头）：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#_*_coding:utf-8_*_</span></span><br><span class="line"><span class="keyword">import</span> socket,time,struct</span><br><span class="line"></span><br><span class="line">s=socket.socket(socket.AF_INET,socket.SOCK_STREAM)</span><br><span class="line">res=s.connect_ex((<span class="string">'127.0.0.1'</span>,<span class="number">8080</span>))</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    msg=input(<span class="string">'&gt;&gt;: '</span>).strip()</span><br><span class="line">    <span class="keyword">if</span> len(msg) == <span class="number">0</span>:<span class="keyword">continue</span></span><br><span class="line">    <span class="keyword">if</span> msg == <span class="string">'quit'</span>:<span class="keyword">break</span></span><br><span class="line"></span><br><span class="line">    s.send(msg.encode(<span class="string">'utf-8'</span>))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    l=s.recv(<span class="number">4</span>)</span><br><span class="line">    x=struct.unpack(<span class="string">'i'</span>,l)[<span class="number">0</span>]</span><br><span class="line">    print(type(x),x)</span><br><span class="line">    <span class="comment"># print(struct.unpack('I',l))</span></span><br><span class="line">    r_s=<span class="number">0</span></span><br><span class="line">    data=<span class="string">b''</span></span><br><span class="line">    <span class="keyword">while</span> r_s &lt; x:</span><br><span class="line">        r_d=s.recv(<span class="number">1024</span>)</span><br><span class="line">        data+=r_d</span><br><span class="line">        r_s+=len(r_d)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># print(data.decode('utf-8'))</span></span><br><span class="line">    print(data.decode(<span class="string">'gbk'</span>)) <span class="comment">#windows默认gbk编码</span></span><br></pre></td></tr></table></figure>

<h6 id="c-更复杂版"><a href="#c-更复杂版" class="headerlink" title="(c)更复杂版"></a>(c)更复杂版</h6><p>我们还可以把报头做成字典，字典里包含将要发送的真实数据的详细信息，然后json序列化，然后用struck将序列化后的数据长度打包成4个字节（4个自己足够用了）</p>
<table>
<thead>
<tr>
<th>发送时</th>
<th>接收时</th>
</tr>
</thead>
<tbody><tr>
<td>先发报头长度</td>
<td>先收报头长度，用struct取出来</td>
</tr>
<tr>
<td>再编码报头内容然后发送</td>
<td>根据取出的长度收取报头内容，然后解码，反序列化</td>
</tr>
<tr>
<td>最后发真实内容</td>
<td>从反序列化的结果中取出待取数据的详细信息，然后去取真实的数据内容</td>
</tr>
</tbody></table>
<p>服务端（定制稍微复杂一点的报头）：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> socket,struct,json</span><br><span class="line"><span class="keyword">import</span> subprocess</span><br><span class="line">phone=socket.socket(socket.AF_INET,socket.SOCK_STREAM)</span><br><span class="line">phone.setsockopt(socket.SOL_SOCKET,socket.SO_REUSEADDR,<span class="number">1</span>) <span class="comment">#就是它，在bind前加</span></span><br><span class="line"></span><br><span class="line">phone.bind((<span class="string">'127.0.0.1'</span>,<span class="number">8080</span>))</span><br><span class="line"></span><br><span class="line">phone.listen(<span class="number">5</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    conn,addr=phone.accept()</span><br><span class="line">    <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">        cmd=conn.recv(<span class="number">1024</span>)</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> cmd:<span class="keyword">break</span></span><br><span class="line">        print(<span class="string">'cmd: %s'</span> %cmd)</span><br><span class="line"></span><br><span class="line">        res=subprocess.Popen(cmd.decode(<span class="string">'utf-8'</span>),</span><br><span class="line">                             shell=<span class="literal">True</span>,</span><br><span class="line">                             stdout=subprocess.PIPE,</span><br><span class="line">                             stderr=subprocess.PIPE)</span><br><span class="line">        err=res.stderr.read()</span><br><span class="line">        print(err)</span><br><span class="line">        <span class="keyword">if</span> err:</span><br><span class="line">            back_msg=err</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            back_msg=res.stdout.read()</span><br><span class="line"></span><br><span class="line">        headers=&#123;<span class="string">'data_size'</span>:len(back_msg)&#125;</span><br><span class="line">        head_json=json.dumps(headers)</span><br><span class="line">        head_json_bytes=bytes(head_json,encoding=<span class="string">'utf-8'</span>)</span><br><span class="line"></span><br><span class="line">        conn.send(struct.pack(<span class="string">'i'</span>,len(head_json_bytes))) <span class="comment">#先发报头的长度</span></span><br><span class="line">        conn.send(head_json_bytes) <span class="comment">#再发报头</span></span><br><span class="line">        conn.sendall(back_msg) <span class="comment">#在发真实的内容</span></span><br><span class="line"></span><br><span class="line">    conn.close()</span><br></pre></td></tr></table></figure>

<p>客户端：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> socket <span class="keyword">import</span> *</span><br><span class="line"><span class="keyword">import</span> struct,json</span><br><span class="line"></span><br><span class="line">ip_port=(<span class="string">'127.0.0.1'</span>,<span class="number">8080</span>)</span><br><span class="line">client=socket(AF_INET,SOCK_STREAM)</span><br><span class="line">client.connect(ip_port)</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    cmd=input(<span class="string">'&gt;&gt;: '</span>)</span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> cmd:<span class="keyword">continue</span></span><br><span class="line">    client.send(bytes(cmd,encoding=<span class="string">'utf-8'</span>))</span><br><span class="line"></span><br><span class="line">    head=client.recv(<span class="number">4</span>)</span><br><span class="line">    head_json_len=struct.unpack(<span class="string">'i'</span>,head)[<span class="number">0</span>]</span><br><span class="line">    head_json=json.loads(client.recv(head_json_len).decode(<span class="string">'utf-8'</span>))</span><br><span class="line">    data_len=head_json[<span class="string">'data_size'</span>]</span><br><span class="line"></span><br><span class="line">    recv_size=<span class="number">0</span></span><br><span class="line">    recv_data=<span class="string">b''</span></span><br><span class="line">    <span class="keyword">while</span> recv_size &lt; data_len:</span><br><span class="line">        recv_data+=client.recv(<span class="number">1024</span>)</span><br><span class="line">        recv_size+=len(recv_data)</span><br><span class="line"></span><br><span class="line">    print(recv_data.decode(<span class="string">'utf-8'</span>))</span><br><span class="line">    <span class="comment">#print(recv_data.decode('gbk')) #windows默认gbk编码</span></span><br></pre></td></tr></table></figure>

<h4 id="3、FTP作业：上传下载文件"><a href="#3、FTP作业：上传下载文件" class="headerlink" title="3、FTP作业：上传下载文件"></a>3、FTP作业：上传下载文件</h4><p>服务端：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> socket</span><br><span class="line"><span class="keyword">import</span> struct</span><br><span class="line"><span class="keyword">import</span> json</span><br><span class="line"></span><br><span class="line">sk = socket.socket()</span><br><span class="line">sk.bind((<span class="string">'127.0.0.1'</span>, <span class="number">8090</span>))</span><br><span class="line">buffer = <span class="number">1024</span></span><br><span class="line">sk.listen()</span><br><span class="line"></span><br><span class="line">conn, addr = sk.accept()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 接收端</span></span><br><span class="line">head_len = conn.recv(<span class="number">4</span>)</span><br><span class="line">head_len = struct.unpack(<span class="string">'i'</span>, head_len)[<span class="number">0</span>]</span><br><span class="line">json_head = conn.recv(head_len).decode(<span class="string">'utf-8'</span>)</span><br><span class="line">head = json.loads(json_head)</span><br><span class="line"></span><br><span class="line">filesize = head[<span class="string">'filesize'</span>]</span><br><span class="line"><span class="keyword">with</span> open(head[<span class="string">'filename'</span>], <span class="string">'wb'</span>) <span class="keyword">as</span> f:</span><br><span class="line">    <span class="keyword">while</span> filesize:</span><br><span class="line">        <span class="keyword">if</span> filesize &gt;= buffer:</span><br><span class="line">            content = conn.recv(buffer)</span><br><span class="line">            f.write(content)</span><br><span class="line">            filesize -= buffer</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            content = conn.recv(filesize)</span><br><span class="line">            f.write(content)</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">conn.close()</span><br><span class="line">sk.close()</span><br></pre></td></tr></table></figure>

<p>客户端：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 发送端</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> socket</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> json</span><br><span class="line"><span class="keyword">import</span> struct</span><br><span class="line"></span><br><span class="line">sk = socket.socket()</span><br><span class="line">sk.connect((<span class="string">'127.0.0.1'</span>, <span class="number">8090</span>))</span><br><span class="line"></span><br><span class="line">buffer = <span class="number">1024</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 发送文件</span></span><br><span class="line">head = &#123;<span class="string">'filepath'</span>: <span class="string">r'D:\视频存放位置\day18'</span>,</span><br><span class="line">        <span class="string">'filename'</span>: <span class="string">r'04 python fullstack s9 day18 re模块。mp4'</span>,</span><br><span class="line">        <span class="string">'filesize'</span>: <span class="literal">None</span>&#125;</span><br><span class="line">file_path = os.path.join(head[<span class="string">'filepath'</span>], head[<span class="string">'filename'</span>])</span><br><span class="line">filesize = os.path.getsize(file_path)</span><br><span class="line">head[<span class="string">'filesize'</span>] = filesize</span><br><span class="line"></span><br><span class="line">json_head = json.dump(head)     <span class="comment"># 字典转成了字符串</span></span><br><span class="line">bytes_head = json_head.encode(<span class="string">'utf-8'</span>)      <span class="comment"># 字符串转bytes</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 计算head的长度</span></span><br><span class="line">head_len = len(bytes_head)      <span class="comment"># 报头长度</span></span><br><span class="line">pack_len = struct.pack(<span class="string">'i'</span>, head_len)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">sk.send(pack_len)       <span class="comment"># 先发报头长度</span></span><br><span class="line">sk.send(bytes_head)     <span class="comment"># 再发送bytes类型的报头</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">with</span> open(file_path, <span class="string">'rb'</span>) <span class="keyword">as</span> f:</span><br><span class="line">    <span class="keyword">while</span> filesize:</span><br><span class="line">        <span class="keyword">if</span> filesize &gt;= buffer:</span><br><span class="line">            content = f.read(buffer)    <span class="comment"># 每次读出的内容</span></span><br><span class="line">            sk.send(content)</span><br><span class="line">            filesize -= buffer</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            content = f.read(filesize)</span><br><span class="line">            sk.send(content)</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line"></span><br><span class="line">sk.close()</span><br></pre></td></tr></table></figure>

<h2 id="（六）socket的更多方法介绍"><a href="#（六）socket的更多方法介绍" class="headerlink" title="（六）socket的更多方法介绍"></a>（六）socket的更多方法介绍</h2><h3 id="一、更多方法"><a href="#一、更多方法" class="headerlink" title="一、更多方法"></a>一、更多方法</h3><p><strong>服务端套接字函数</strong><br>s.bind()    绑定(主机,端口号)到套接字<br>s.listen()  开始TCP监听<br>s.accept()  被动接受TCP客户的连接,(阻塞式)等待连接的到来</p>
<p><strong>客户端套接字函数</strong><br>s.connect()     主动初始化TCP服务器连接<br>s.connect_ex()  connect()函数的扩展版本,出错时返回出错码,而不是抛出异常</p>
<p><strong>公共用途的套接字函数</strong><br>s.recv()            接收TCP数据<br>s.send()            发送TCP数据<br>s.sendall()         发送TCP数据<br>s.recvfrom()        接收UDP数据<br>s.sendto()          发送UDP数据<br>s.getpeername()     连接到当前套接字的远端的地址<br>s.getsockname()     当前套接字的地址<br>s.getsockopt()      返回指定套接字的参数<br>s.setsockopt()      设置指定套接字的参数<br>s.close()           关闭套接字</p>
<p><strong>面向锁的套接字方法</strong><br><strong>s.setblocking()     设置套接字的阻塞与非阻塞模式</strong></p>
<p>​        s.setblocking(False) 设置非阻塞模式 </p>
<p>s.settimeout()      设置阻塞套接字操作的超时时间<br>s.gettimeout()      得到阻塞套接字操作的超时时间</p>
<p><strong>面向文件的套接字的函数</strong><br>s.fileno()          套接字的文件描述符<br>s.makefile()        创建一个与该套接字相关的文件</p>
<h3 id="二、send和sendall方法"><a href="#二、send和sendall方法" class="headerlink" title="二、send和sendall方法"></a>二、send和sendall方法</h3><p>官方文档对socket模块下的socket.send()和socket.sendall()解释如下：</p>
<p>socket.send(string[, flags])<br>Send data to the socket. The socket must be connected to a remote socket. The optional flags argument has the same meaning as for recv() above. Returns the number of bytes sent. Applications are responsible for checking that all data has been sent; if only some of the data was transmitted, the application needs to attempt delivery of the remaining data.</p>
<p>send()的返回值是发送的字节数量，这个数量值可能小于要发送的string的字节数，也就是说可能无法发送string中所有的数据。如果有错误则会抛出异常。</p>
<p>–</p>
<p>socket.sendall(string[, flags])<br>Send data to the socket. The socket must be connected to a remote socket. The optional flags argument has the same meaning as for recv() above. Unlike send(), this method continues to send data from string until either all data has been sent or an error occurs. None is returned on success. On error, an exception is raised, and there is no way to determine how much data, if any, was successfully sent.</p>
<p>尝试发送string的所有数据，成功则返回None，失败则抛出异常。</p>
<p>故，下面两段代码是等价的：</p>
<p>sock.sendall(‘Hello world\n’)    # sandall 一次性发送所有数据，send 可能会有拆包现象</p>
<p>buffer = ‘Hello world\n’</p>
<p>while buffer:</p>
<p>​    bytes = sock.send(buffer)</p>
<p>​    buffer = buffer[bytes:]</p>
<h2 id="（七）验证客户端链接的合法性"><a href="#（七）验证客户端链接的合法性" class="headerlink" title="（七）验证客户端链接的合法性"></a>（七）验证客户端链接的合法性</h2><p>如果你想在分布式系统中实现一个简单的客户端链接认证功能，又不像SSL那么复杂，那么利用hmac+加盐的方式来实现</p>
<h3 id="1、服务端"><a href="#1、服务端" class="headerlink" title="1、服务端"></a>1、服务端</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> socket</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> hmac</span><br><span class="line"></span><br><span class="line">secret_key = <span class="string">b'egg'</span></span><br><span class="line"></span><br><span class="line">sk = socket.socket()</span><br><span class="line">sk.bind((<span class="string">'127.0.0.1'</span>, <span class="number">8080</span>))</span><br><span class="line">sk.listen()</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">check_conn</span><span class="params">(conn)</span>:</span></span><br><span class="line">    msg = os.urandom(<span class="number">32</span>)</span><br><span class="line">    conn.send(msg)</span><br><span class="line">    h = hmac.new(secret_key, msg)</span><br><span class="line">    digest = h.digest()</span><br><span class="line">    client_digest = conn.recv(<span class="number">1024</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> hmac.compare_digest(digest, client_digest)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">conn, addr = sk.accept()</span><br><span class="line">res = check_conn(conn)</span><br><span class="line"><span class="keyword">if</span> res:</span><br><span class="line">    print(<span class="string">'合法的客户端'</span>)</span><br><span class="line">    conn.close()</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    print(<span class="string">'不合法的客户端'</span>)</span><br><span class="line">    conn.close()</span><br><span class="line"></span><br><span class="line">sk.close()</span><br></pre></td></tr></table></figure>

<h3 id="2、客户端（合法）"><a href="#2、客户端（合法）" class="headerlink" title="2、客户端（合法）"></a>2、客户端（合法）</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> socket</span><br><span class="line"><span class="keyword">import</span> hmac</span><br><span class="line"></span><br><span class="line">secret_key = <span class="string">b'egg'</span></span><br><span class="line"></span><br><span class="line">sk = socket.socket()</span><br><span class="line">sk.connect((<span class="string">'127.0.0.1'</span>, <span class="number">8080</span>))</span><br><span class="line">msg = sk.recv(<span class="number">1024</span>)</span><br><span class="line"></span><br><span class="line">h = hmac.new(secret_key, msg)</span><br><span class="line">digest = h.digest()</span><br><span class="line"></span><br><span class="line">sk.send(digest)</span><br><span class="line"></span><br><span class="line">sk.close()</span><br></pre></td></tr></table></figure>

<h2 id="（八）socketserver"><a href="#（八）socketserver" class="headerlink" title="（八）socketserver"></a>（八）socketserver</h2><h3 id="1、server端"><a href="#1、server端" class="headerlink" title="1、server端"></a>1、server端</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> socketserver</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyServer</span><span class="params">(socketserver.BaseRequestHandler)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">handle</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">            msg = self.request.recv(<span class="number">1024</span>).decode(<span class="string">'utf-8'</span>)</span><br><span class="line">            <span class="keyword">if</span> msg == <span class="string">'q'</span>:</span><br><span class="line">                <span class="comment"># self.request.close()</span></span><br><span class="line">                <span class="keyword">break</span></span><br><span class="line"></span><br><span class="line">            print(msg)        <span class="comment"># self.request相当于一个conn</span></span><br><span class="line"></span><br><span class="line">            info = input(<span class="string">'&gt;&gt;&gt;'</span>)</span><br><span class="line">            self.request.send(info.encode(<span class="string">'utf-8'</span>))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    server = socketserver.ThreadingTCPServer((<span class="string">'127.0.0.1'</span>, <span class="number">8090</span>), MyServer)</span><br><span class="line"></span><br><span class="line">    server.serve_forever()</span><br></pre></td></tr></table></figure>

<h3 id="2、client"><a href="#2、client" class="headerlink" title="2、client"></a>2、client</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> socket</span><br><span class="line"></span><br><span class="line">sk = socket.socket()</span><br><span class="line">sk.connect((<span class="string">'127.0.0.1'</span>, <span class="number">8090</span>))</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    msg = input(<span class="string">'&gt;&gt;&gt;'</span>)</span><br><span class="line">    <span class="keyword">if</span> msg == <span class="string">'q'</span>:</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line"></span><br><span class="line">    sk.send((<span class="string">'user1:'</span> + msg).encode(<span class="string">'utf-8'</span>))</span><br><span class="line">    ret = sk.recv(<span class="number">1024</span>).decode(<span class="string">'utf-8'</span>)</span><br><span class="line">    print(ret)</span><br><span class="line"></span><br><span class="line">sk.close()</span><br></pre></td></tr></table></figure>


          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/06/21/python全栈/第01部分：基础+模块+面向对象+网络编程/面向对象/面向对象进阶/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="John Doe">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/06/21/python全栈/第01部分：基础+模块+面向对象+网络编程/面向对象/面向对象进阶/" itemprop="url">面向对象进阶</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-06-21T23:34:55+08:00">
                2019-06-21
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/python全栈-01部分-面向对象/" itemprop="url" rel="index">
                    <span itemprop="name">python全栈 -01部分 -面向对象</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>[TOC]</p>
<h2 id="（一）进阶"><a href="#（一）进阶" class="headerlink" title="（一）进阶"></a>（一）进阶</h2><h3 id="一、isinstance-和-issubclass"><a href="#一、isinstance-和-issubclass" class="headerlink" title="一、isinstance 和 issubclass(***)"></a>一、isinstance 和 issubclass(***)</h3><ul>
<li><strong>isinstance(obj, cls)检查是否obj是否是类 cls 的对象</strong></li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Foo</span><span class="params">(object)</span>:</span></span><br><span class="line">     <span class="keyword">pass</span></span><br><span class="line">  </span><br><span class="line">obj = Foo()</span><br><span class="line">  </span><br><span class="line">isinstance(obj, Foo)</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>issubclass(sub, super)检查sub类是否是 super 类的派生类</strong></li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Foo</span><span class="params">(object)</span>:</span></span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"> </span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Bar</span><span class="params">(Foo)</span>:</span></span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"> </span><br><span class="line">issubclass(Bar, Foo)</span><br></pre></td></tr></table></figure>

<h3 id="二、反射（-）"><a href="#二、反射（-）" class="headerlink" title="二、反射（******）"></a>二、反射（******）</h3><h4 id="1、什么是反射"><a href="#1、什么是反射" class="headerlink" title="1、什么是反射"></a>1、什么是反射</h4><p>​        反射的概念是由Smith在1982年首次提出的，主要是指程序可以访问、检测和修改它本身状态或行为的一种能力（自省）。这一概念的提出很快引发了计算机科学领域关于应用反射性的研究。它首先被程序语言的设计领域所采用,并在Lisp和面向对象方面取得了成绩。</p>
<h4 id="2、python面向对象中的反射"><a href="#2、python面向对象中的反射" class="headerlink" title="2、python面向对象中的反射"></a>2、python面向对象中的反射</h4><p>四个可以实现自省的函数：hasattr、getattr、setattr、delattr</p>
<p>下列方法适用于类和对象（一切皆对象，类本身也是一个对象）</p>
<p><strong>（1）hasattr</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 一个模块中的类能不能反射得到</span></span><br><span class="line"><span class="keyword">import</span> my</span><br><span class="line">print(getattr(my,<span class="string">'C'</span>)())</span><br><span class="line"><span class="keyword">if</span> hasattr(my,<span class="string">'name'</span>):</span><br><span class="line">    getattr(my,<span class="string">'name'</span>)</span><br></pre></td></tr></table></figure>

<p><strong>（2）getattr</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span>:</span></span><br><span class="line">    price = <span class="number">20</span></span><br><span class="line"><span class="meta">    @classmethod</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">func</span><span class="params">(cls)</span>:</span></span><br><span class="line">        print(<span class="string">'in func'</span>)</span><br><span class="line"><span class="comment"># 反射类的属性</span></span><br><span class="line"><span class="comment"># A.price</span></span><br><span class="line">print(getattr(A,<span class="string">'price'</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment"># 反射类的方法 ：classmethod staticmethod</span></span><br><span class="line"><span class="comment"># A.func()</span></span><br><span class="line"><span class="keyword">if</span> hasattr(A,<span class="string">'func'</span>):</span><br><span class="line">    getattr(A,<span class="string">'func'</span>)()</span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 模块</span></span><br><span class="line"><span class="keyword">import</span> my</span><br><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="string">my模块内容：</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">day = 'Monday'  # 周一</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">def wahaha():</span></span><br><span class="line"><span class="string">    print('wahahaha')</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">class C:</span></span><br><span class="line"><span class="string">    pass</span></span><br><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="comment"># 反射模块的属性</span></span><br><span class="line">print(my.day)</span><br><span class="line">print(getattr(my,<span class="string">'day'</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment"># 反射模块的方法</span></span><br><span class="line">getattr(my,<span class="string">'wahaha'</span>)()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 内置模块也能用</span></span><br><span class="line"><span class="comment"># time</span></span><br><span class="line"><span class="comment"># asctime</span></span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line">print(getattr(time,<span class="string">'time'</span>)())</span><br><span class="line">print(getattr(time,<span class="string">'asctime'</span>)())</span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">qqxing</span><span class="params">()</span>:</span></span><br><span class="line">    print(<span class="string">'qqxing'</span>)</span><br><span class="line">year = <span class="number">2018</span></span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line">print(sys.modules[<span class="string">'__main__'</span>].year)</span><br><span class="line"><span class="comment"># 反射自己模块中的变量</span></span><br><span class="line">print(getattr(sys.modules[<span class="string">'__main__'</span>],<span class="string">'year'</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment"># 反射自己模块中的函数</span></span><br><span class="line">getattr(sys.modules[<span class="string">'__main__'</span>],<span class="string">'qqxing'</span>)()</span><br><span class="line"></span><br><span class="line">变量名 = input(<span class="string">'&gt;&gt;&gt;'</span>)</span><br><span class="line">print(getattr(sys.modules[__name__],变量名))</span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 要反射的函数有参数怎么办?</span></span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line">print(time.strftime(<span class="string">'%Y-%m-%d %H:%M:S'</span>))</span><br><span class="line">print(getattr(time,<span class="string">'strftime'</span>)(<span class="string">'%Y-%m-%d %H:%M:S'</span>))</span><br></pre></td></tr></table></figure>

<p><strong>（3）setattr</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span>:</span></span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line">a = A()</span><br><span class="line"></span><br><span class="line"><span class="comment"># setattr  设置修改变量</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span>:</span></span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line">a = A()</span><br><span class="line">setattr(a,<span class="string">'name'</span>,<span class="string">'nezha'</span>)</span><br><span class="line">setattr(A,<span class="string">'name'</span>,<span class="string">'alex'</span>)</span><br><span class="line">print(A.name)</span><br><span class="line">print(a.name)</span><br></pre></td></tr></table></figure>

<p><strong>（4）delattr</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span>:</span></span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line">a = A()</span><br><span class="line"></span><br><span class="line"><span class="comment"># delattr 删除一个变量</span></span><br><span class="line">delattr(a,<span class="string">'name'</span>)</span><br><span class="line">print(a.name)</span><br><span class="line">delattr(A,<span class="string">'name'</span>)</span><br><span class="line">print(a.name)</span><br></pre></td></tr></table></figure>

<h3 id="三、-str-和-repr"><a href="#三、-str-和-repr" class="headerlink" title="三、__str__ 和 _repr_"></a>三、__str__ 和 _<em>repr_</em></h3><p>改变对象的字符串显示__str__,_<em>repr_</em></p>
<p>自定制格式化字符串_<em>format_</em></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="string">str函数或者print函数---&gt;obj.__str__()</span></span><br><span class="line"><span class="string">repr或者交互式解释器---&gt;obj.__repr__()</span></span><br><span class="line"><span class="string">如果__str__没有被定义,那么就会使用__repr__来代替输出</span></span><br><span class="line"><span class="string">注意:这俩方法的返回值必须是字符串,否则抛出异常</span></span><br><span class="line"><span class="string">'''</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span>:</span></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">__str__</span><span class="params">(self)</span>:</span></span><br><span class="line">    <span class="keyword">return</span> <span class="string">"A's object"</span></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">func</span><span class="params">(self)</span>:</span></span><br><span class="line">    <span class="keyword">return</span> <span class="string">"wahaha"</span></span><br><span class="line">  </span><br><span class="line">a = A()</span><br><span class="line">print(a)	<span class="comment"># 打印一个对象的时候，就是调用a.__str__</span></span><br><span class="line"><span class="comment"># object 里有一个__str__，一旦被调用，就返回调用这个方法对象的内存地址</span></span><br><span class="line"></span><br><span class="line">l = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>]</span><br><span class="line">print(l)</span><br><span class="line"></span><br><span class="line">print(<span class="string">'%s:%s'</span>%(<span class="string">'A'</span>, a))	<span class="comment"># %s str() 直接打印 实际上都是走的__str__</span></span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Teacher</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self,name,salary)</span>:</span></span><br><span class="line">        self.name = name</span><br><span class="line">        self.salary = salary</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__str__</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">"Teacher's object :%s"</span>%self.name</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__repr__</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> str(self.__dict__)</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">func</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">'wahaha'</span></span><br><span class="line">nezha = Teacher(<span class="string">'哪吒'</span>,<span class="number">250</span>)</span><br><span class="line">print(nezha) </span><br><span class="line">print(repr(nezha))</span><br><span class="line">print(<span class="string">'&gt;&gt;&gt; %r'</span>%nezha)</span><br><span class="line"></span><br><span class="line"><span class="comment"># a.__str__ --&gt; object</span></span><br><span class="line"><span class="comment"># object  里有一个__str__，一旦被调用，就返回调用这个方法的对象的内存地址</span></span><br><span class="line"><span class="comment"># %s str()  直接打印 实际上都是走的__str__</span></span><br><span class="line"><span class="comment"># %r repr()  实际上都是走的__repr__</span></span><br><span class="line"><span class="comment"># repr 是str的备胎，但str不能做repr的备胎</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># print(obj)/'%s'%obj/str(obj)的时候，实际上是内部调用了obj.__str__方法，如果str方法有，那么他返回的必定是一个字符串</span></span><br><span class="line"><span class="comment"># 如果没有__str__方法，会先找本类中的__repr__方法，再没有再找父类中的__str__。</span></span><br><span class="line"><span class="comment"># repr(),只会找__repr__,如果没有找父类的</span></span><br></pre></td></tr></table></figure>

<h3 id="四、item系列"><a href="#四、item系列" class="headerlink" title="四、item系列"></a>四、item系列</h3><h4 id="1、-getitem-、-setitem-、-delitem"><a href="#1、-getitem-、-setitem-、-delitem" class="headerlink" title="1、__getitem__、__setitem__、__delitem__"></a>1、__getitem__、__setitem__、__delitem__</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 就像字典一样的操作</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Foo</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self,name,age,sex)</span>:</span></span><br><span class="line">        self.name = name</span><br><span class="line">        self.age = age</span><br><span class="line">        self.sex = sex</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__getitem__</span><span class="params">(self, item)</span>:</span></span><br><span class="line">        <span class="keyword">if</span> hasattr(self,item):</span><br><span class="line">            <span class="keyword">return</span> self.__dict__[item]</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__setitem__</span><span class="params">(self, key, value)</span>:</span></span><br><span class="line">        self.__dict__[key] = value</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__delitem__</span><span class="params">(self, key)</span>:</span></span><br><span class="line">        <span class="keyword">del</span> self.__dict__[key]</span><br><span class="line"></span><br><span class="line">f = Foo(<span class="string">'egon'</span>,<span class="number">38</span>,<span class="string">'男'</span>)</span><br><span class="line">print(f[<span class="string">'name'</span>])</span><br><span class="line">f[<span class="string">'hobby'</span>] = <span class="string">'男'</span></span><br><span class="line">print(f.hobby,f[<span class="string">'hobby'</span>])</span><br><span class="line"><span class="keyword">del</span> f.hobby      <span class="comment"># object 原生支持  __delattr__</span></span><br><span class="line"><span class="keyword">del</span> f[<span class="string">'hobby'</span>]   <span class="comment"># 通过自己实现的</span></span><br><span class="line">print(f.__dict__)</span><br></pre></td></tr></table></figure>

<h3 id="五、-del"><a href="#五、-del" class="headerlink" title="五、_del_"></a>五、_<em>del_</em></h3><p>析构方法，当对象在内存中被释放时，自动触发执行。</p>
<p><strong>注：</strong></p>
<p>​        此方法一般无须定义，因为Python是一门高级语言，程序员在使用时无需关心内存的分配和释放，因为此工作都是交给Python解释器来执行，所以，析构函数的调用是由解释器在进行垃圾回收时自动触发执行的。</p>
<p>简单示范：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__del__</span><span class="params">(self)</span>:</span>   <span class="comment"># 析构函数: 在删除一个对象之前进行一些收尾工作</span></span><br><span class="line">        self.f.close()</span><br><span class="line">a = A()</span><br><span class="line">a.f = open()   <span class="comment"># 打开文件 第一 在操作系统中打开了一个文件 拿到了文件操作符存在了内存中</span></span><br><span class="line"><span class="keyword">del</span> a          <span class="comment"># a.f 拿到了文件操作符消失在了内存中</span></span><br><span class="line"><span class="keyword">del</span> a   <span class="comment"># del 既执行了这个方法，又删除了变量</span></span><br><span class="line"><span class="comment"># 引用计数</span></span><br></pre></td></tr></table></figure>

<h3 id="六、-new"><a href="#六、-new" class="headerlink" title="六、_new_"></a>六、_<em>new_</em></h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">        self.x = <span class="number">1</span></span><br><span class="line">        print(<span class="string">'in init function'</span>)</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__new__</span><span class="params">(cls, *args, **kwargs)</span>:</span></span><br><span class="line">        print(<span class="string">'in new function'</span>)</span><br><span class="line">        <span class="keyword">return</span> object.__new__(A)</span><br><span class="line"></span><br><span class="line">a = A()</span><br><span class="line">print(a.x)</span><br></pre></td></tr></table></figure>

<p>设计模式<br>23种</p>
<p>单例模式：<br>一个类 始终 只有 一个 实例<br>当你第一次实例化这个类的时候 就创建一个实例化的对象<br>当你之后再来实例化的时候 就用之前创建的对象</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span>:</span></span><br><span class="line">    __instance = <span class="literal">False</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self,name,age)</span>:</span></span><br><span class="line">        self.name = name</span><br><span class="line">        self.age = age</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__new__</span><span class="params">(cls, *args, **kwargs)</span>:</span></span><br><span class="line">        <span class="keyword">if</span> cls.__instance:</span><br><span class="line">            <span class="keyword">return</span> cls.__instance</span><br><span class="line">        cls.__instance = object.__new__(cls)</span><br><span class="line">        <span class="keyword">return</span> cls.__instance</span><br><span class="line"></span><br><span class="line">egon = A(<span class="string">'egg'</span>,<span class="number">38</span>)</span><br><span class="line">egon.cloth = <span class="string">'小花袄'</span></span><br><span class="line">nezha = A(<span class="string">'nazha'</span>,<span class="number">25</span>)</span><br><span class="line">print(nezha)</span><br><span class="line">print(egon)</span><br><span class="line">print(nezha.name)</span><br><span class="line">print(egon.name)</span><br><span class="line">print(nezha.cloth)</span><br></pre></td></tr></table></figure>

<h3 id="七、-call"><a href="#七、-call" class="headerlink" title="七、_call_"></a>七、_<em>call_</em></h3><p>对象后面加括号，触发执行。</p>
<p><strong>注：</strong></p>
<p>​        构造方法的执行是由创建对象触发的，即：对象 = 类名() ；而对于 _<em>call_</em> 方法的执行是由对象后加括号触发的，即：对象() 或者 类()()</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self,name)</span>:</span></span><br><span class="line">        self.name = name</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__call__</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="string">'''</span></span><br><span class="line"><span class="string">        打印这个对象中的所有属性</span></span><br><span class="line"><span class="string">        :return:</span></span><br><span class="line"><span class="string">        '''</span></span><br><span class="line">        <span class="keyword">for</span> k <span class="keyword">in</span> self.__dict__:</span><br><span class="line">            print(k,self.__dict__[k])</span><br><span class="line">a = A(<span class="string">'alex'</span>)()</span><br></pre></td></tr></table></figure>

<h3 id="八、with-和-enter-exit"><a href="#八、with-和-enter-exit" class="headerlink" title="八、with 和 __enter__, _exit_"></a>八、with 和 __enter__, _<em>exit_</em></h3><h4 id="1、with语句"><a href="#1、with语句" class="headerlink" title="1、with语句"></a>1、with语句</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__enter__</span><span class="params">(self)</span>:</span></span><br><span class="line">        print(<span class="string">'before'</span>)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__exit__</span><span class="params">(self, exc_type, exc_val, exc_tb)</span>:</span></span><br><span class="line">        print(<span class="string">'after'</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">with</span> A() <span class="keyword">as</span> a:</span><br><span class="line">    print(<span class="string">'123'</span>)</span><br></pre></td></tr></table></figure>

<h4 id="2、with语句和init"><a href="#2、with语句和init" class="headerlink" title="2、with语句和init"></a>2、with语句和init</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">        print(<span class="string">'init'</span>)</span><br><span class="line">        </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__enter__</span><span class="params">(self)</span>:</span></span><br><span class="line">        print(<span class="string">'before'</span>)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__exit__</span><span class="params">(self, exc_type, exc_val, exc_tb)</span>:</span></span><br><span class="line">        print(<span class="string">'after'</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">with</span> A() <span class="keyword">as</span> a:</span><br><span class="line">    print(<span class="string">'123'</span>)</span><br></pre></td></tr></table></figure>

<h4 id="3、with和文件操作"><a href="#3、with和文件操作" class="headerlink" title="3、with和文件操作"></a>3、with和文件操作</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Myfile</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self,path,mode=<span class="string">'r'</span>,encoding = <span class="string">'utf-8'</span>)</span>:</span></span><br><span class="line">        self.path = path</span><br><span class="line">        self.mode = mode</span><br><span class="line">        self.encoding = encoding</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__enter__</span><span class="params">(self)</span>:</span></span><br><span class="line">        self.f = open(self.path, mode=self.mode, encoding=self.encoding)</span><br><span class="line">        <span class="keyword">return</span> self.f</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__exit__</span><span class="params">(self, exc_type, exc_val, exc_tb)</span>:</span></span><br><span class="line">        self.f.close()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">with</span> Myfile(<span class="string">'file'</span>,mode=<span class="string">'w'</span>) <span class="keyword">as</span> f:</span><br><span class="line">    f.write(<span class="string">'wahaha'</span>)</span><br></pre></td></tr></table></figure>

<h4 id="4、with和pickle"><a href="#4、with和pickle" class="headerlink" title="4、with和pickle"></a>4、with和pickle</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span>  pickle</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyPickledump</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self,path)</span>:</span></span><br><span class="line">        self.path = path</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__enter__</span><span class="params">(self)</span>:</span></span><br><span class="line">        self.f = open(self.path, mode=<span class="string">'ab'</span>)</span><br><span class="line">        <span class="keyword">return</span> self</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">dump</span><span class="params">(self,content)</span>:</span></span><br><span class="line">        pickle.dump(content,self.f)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__exit__</span><span class="params">(self, exc_type, exc_val, exc_tb)</span>:</span></span><br><span class="line">        self.f.close()</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Mypickleload</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self,path)</span>:</span></span><br><span class="line">        self.path = path</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__enter__</span><span class="params">(self)</span>:</span></span><br><span class="line">        self.f = open(self.path, mode=<span class="string">'rb'</span>)</span><br><span class="line">        <span class="keyword">return</span> self</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__exit__</span><span class="params">(self, exc_type, exc_val, exc_tb)</span>:</span></span><br><span class="line">        self.f.close()</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">load</span><span class="params">(self)</span>:</span></span><br><span class="line">         <span class="keyword">return</span> pickle.load(self.f)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">loaditer</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">            <span class="keyword">try</span>:</span><br><span class="line">                <span class="keyword">yield</span>  self.load()</span><br><span class="line">            <span class="keyword">except</span> EOFError:</span><br><span class="line">                <span class="keyword">break</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># with MyPickledump('file') as f:</span></span><br><span class="line"><span class="comment">#      f.dump(&#123;1,2,3,4&#125;)</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">with</span> Mypickleload(<span class="string">'file'</span>) <span class="keyword">as</span> f:</span><br><span class="line">    <span class="keyword">for</span> item <span class="keyword">in</span> f.loaditer():</span><br><span class="line">        print(item)</span><br></pre></td></tr></table></figure>

<h4 id="5、with-和-pickle-和-iter"><a href="#5、with-和-pickle-和-iter" class="headerlink" title="5、with 和 pickle 和 iter"></a>5、with 和 pickle 和 iter</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span>  pickle</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyPickledump</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self,path)</span>:</span></span><br><span class="line">        self.path = path</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__enter__</span><span class="params">(self)</span>:</span></span><br><span class="line">        self.f = open(self.path, mode=<span class="string">'ab'</span>)</span><br><span class="line">        <span class="keyword">return</span> self</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">dump</span><span class="params">(self,content)</span>:</span></span><br><span class="line">        pickle.dump(content,self.f)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__exit__</span><span class="params">(self, exc_type, exc_val, exc_tb)</span>:</span></span><br><span class="line">        self.f.close()</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Mypickleload</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self,path)</span>:</span></span><br><span class="line">        self.path = path</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__enter__</span><span class="params">(self)</span>:</span></span><br><span class="line">        self.f = open(self.path, mode=<span class="string">'rb'</span>)</span><br><span class="line">        <span class="keyword">return</span> self</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__exit__</span><span class="params">(self, exc_type, exc_val, exc_tb)</span>:</span></span><br><span class="line">        self.f.close()</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__iter__</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">            <span class="keyword">try</span>:</span><br><span class="line">                <span class="keyword">yield</span>  pickle.load(self.f)</span><br><span class="line">            <span class="keyword">except</span> EOFError:</span><br><span class="line">                <span class="keyword">break</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># with MyPickledump('file') as f:</span></span><br><span class="line"><span class="comment">#      f.dump(&#123;1,2,3,4&#125;)</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">with</span> Mypickleload(<span class="string">'file'</span>) <span class="keyword">as</span> f:</span><br><span class="line">    <span class="keyword">for</span> item <span class="keyword">in</span> f:</span><br><span class="line">        print(item)</span><br></pre></td></tr></table></figure>

<h3 id="九、-len"><a href="#九、-len" class="headerlink" title="九、_len_"></a>九、_<em>len_</em></h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Classes</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self,name)</span>:</span></span><br><span class="line">        self.name = name</span><br><span class="line">        self.student = []</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__len__</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> len(self.student)</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__str__</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">'classes'</span></span><br><span class="line">      </span><br><span class="line">py_s9= Classes(<span class="string">'python全栈9期'</span>)</span><br><span class="line">py_s9.student.append(<span class="string">'二哥'</span>)</span><br><span class="line">py_s9.student.append(<span class="string">'泰哥'</span>)</span><br><span class="line">print(len(py_s9))</span><br><span class="line">print(py_s9)</span><br></pre></td></tr></table></figure>

<h3 id="十、-hash"><a href="#十、-hash" class="headerlink" title="十、_hash_"></a>十、_<em>hash_</em></h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self,name,sex)</span>:</span></span><br><span class="line">        self.name = name</span><br><span class="line">        self.sex = sex</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__hash__</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> hash(self.name+self.sex)</span><br><span class="line"></span><br><span class="line">a = A(<span class="string">'egon'</span>,<span class="string">'男'</span>)</span><br><span class="line">b = A(<span class="string">'egon'</span>,<span class="string">'nv'</span>)</span><br><span class="line">print(hash(a))</span><br><span class="line">print(hash(b))</span><br></pre></td></tr></table></figure>

<h3 id="十一、-eq"><a href="#十一、-eq" class="headerlink" title="十一、_eq_"></a>十一、_<em>eq_</em></h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self,name)</span>:</span></span><br><span class="line">        self.name = name</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__eq__</span><span class="params">(self, other)</span>:</span></span><br><span class="line">        <span class="keyword">if</span> self.__dict__ == other.__dict__:</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line"></span><br><span class="line">ob1 = A(<span class="string">'egon'</span>)</span><br><span class="line">ob2 = A(<span class="string">'egg'</span>)</span><br><span class="line">print(ob1 == ob2)</span><br></pre></td></tr></table></figure>

<h2 id="（二）小实例"><a href="#（二）小实例" class="headerlink" title="（二）小实例"></a>（二）小实例</h2><h3 id="一、纸牌游戏"><a href="#一、纸牌游戏" class="headerlink" title="一、纸牌游戏"></a>一、纸牌游戏</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> json</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">FranchDeck</span>:</span></span><br><span class="line">    ranks = [str(n) <span class="keyword">for</span> n <span class="keyword">in</span> range(<span class="number">2</span>,<span class="number">11</span>)] + list(<span class="string">'JQKA'</span>)	<span class="comment"># 2-A</span></span><br><span class="line">    suits = [<span class="string">'红心'</span>,<span class="string">'方板'</span>,<span class="string">'梅花'</span>,<span class="string">'黑桃'</span>]</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">        self._cards = [Card(rank,suit) <span class="keyword">for</span> rank <span class="keyword">in</span> FranchDeck.ranks</span><br><span class="line">                                        <span class="keyword">for</span> suit <span class="keyword">in</span> FranchDeck.suits]</span><br><span class="line">        <span class="string">'''</span></span><br><span class="line"><span class="string">        列表表达式</span></span><br><span class="line"><span class="string">        效果等价于：</span></span><br><span class="line"><span class="string">        	for suit in FranchDeck.suits:</span></span><br><span class="line"><span class="string">        		for rank in FranchDeck.ranks:</span></span><br><span class="line"><span class="string">        			将Card(rank,suit)添加到列表中</span></span><br><span class="line"><span class="string">        '''</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__len__</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> len(self._cards)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__getitem__</span><span class="params">(self, item)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> self._cards[item]</span><br><span class="line">      </span><br><span class="line">        <span class="function"><span class="keyword">def</span> <span class="title">__str__</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> json.dumps(self._cards,ensure_ascii=<span class="literal">False</span>)</span><br><span class="line"></span><br><span class="line">deck = FranchDeck()</span><br><span class="line">print(deck[<span class="number">0</span>])</span><br><span class="line"><span class="keyword">from</span> random <span class="keyword">import</span> choice</span><br><span class="line">print(choice(deck))		<span class="comment"># 抽牌 要用到__len__</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> random <span class="keyword">import</span> shuffle</span><br><span class="line">shuffle(deck)</span><br><span class="line">print(deck[<span class="number">10</span>])		<span class="comment"># 洗牌 要用到__getitem__</span></span><br><span class="line"></span><br><span class="line">print(deck)		<span class="comment"># 通过json模块输出所有当下顺序的牌</span></span><br><span class="line">print(deck[:<span class="number">5</span>])		<span class="comment"># 取前5张牌</span></span><br></pre></td></tr></table></figure>

<h3 id="二、一道面试题"><a href="#二、一道面试题" class="headerlink" title="二、一道面试题"></a>二、一道面试题</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self,name,age,sex)</span>:</span></span><br><span class="line">        self.name = name</span><br><span class="line">        self.age = age</span><br><span class="line">        self.sex = sex</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__hash__</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> hash(self.name+self.sex)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__eq__</span><span class="params">(self, other)</span>:</span></span><br><span class="line">        <span class="keyword">if</span> self.name == other.name <span class="keyword">and</span> self.sex == other.sex:<span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">p_lst = []</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">84</span>):</span><br><span class="line">    p_lst.append(Person(<span class="string">'egon'</span>,i,<span class="string">'male'</span>))</span><br><span class="line"></span><br><span class="line">print(p_lst)</span><br><span class="line">print(set(p_lst))</span><br><span class="line"></span><br><span class="line"><span class="comment"># set 依赖对象的 hash eq</span></span><br></pre></td></tr></table></figure>


          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/06/13/python全栈/第01部分：基础+模块+面向对象+网络编程/面向对象/初识面向对象/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="John Doe">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/06/13/python全栈/第01部分：基础+模块+面向对象+网络编程/面向对象/初识面向对象/" itemprop="url">初识面向对象</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-06-13T11:57:19+08:00">
                2019-06-13
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/python全栈-01部分-面向对象/" itemprop="url" rel="index">
                    <span itemprop="name">python全栈 -01部分 -面向对象</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>[TOC]</p>
<h2 id="（一）面向过程与面向对象"><a href="#（一）面向过程与面向对象" class="headerlink" title="（一）面向过程与面向对象"></a>（一）面向过程与面向对象</h2><h4 id="1、面向过程"><a href="#1、面向过程" class="headerlink" title="1、面向过程"></a>1、面向过程</h4><p>​       面向过程的程序设计的核心是过程（流水线式思维），过程即解决问题的步骤，面向过程的设计就好比精心设计好的一条流水线，考虑周全什么时候处理什么东西。</p>
<p><strong>优点：</strong>极大的降低了写程序的复杂度，只需要顺着要执行的步骤，堆叠代码即可。</p>
<p><strong>缺点：</strong>一套流水线或者流程就是用来解决一个问题，代码牵一发而动全身。</p>
<p><strong>应用场景：</strong>一旦完成基本很少改变的场景，著名的例子有Linux内核、git，以及Apache HTTP Server等。</p>
<h4 id="2、面向对象"><a href="#2、面向对象" class="headerlink" title="2、面向对象"></a>2、面向对象</h4><p>​        面向对象的程序设计的核心是对象（上帝式思维），要理解对象为何物，必须把自己当成上帝，上帝眼里世间存在的万物皆为对象，不存在的也可以创造出来。面向对象的程序设计好比如来设计西游记，如来要解决的问题是把经书传给东土大唐，如来想了想解决这个问题需要四个人：唐僧，沙和尚，猪八戒，孙悟空，每个人都有各自的特征和技能（这就是对象的概念，特征和技能分别对应对象的属性和方法），然而这并不好玩，于是如来又安排了一群妖魔鬼怪，为了防止师徒四人在取经路上被搞死，又安排了一群神仙保驾护航，这些都是对象。然后取经开始，师徒四人与妖魔鬼怪神仙互相缠斗着直到最后取得真经。如来根本不会管师徒四人按照什么流程去取。</p>
<p><strong>优点：</strong>解决了程序的扩展性。对某一个对象单独修改，会立刻反映到整个体系中，如对游戏中一个人物参数的特征和技能修改都很容易。</p>
<p><strong>缺点：</strong>可控性差，无法向面向过程的程序设计流水线式的可以很精准的预测问题的处理流程与结果，面向对象的程序一旦开始就由对象之间的交互解决问题<strong>，</strong>即便是上帝也无法预测最终结果。于是我们经常看到一个游戏人某一参数的修改极有可能导致阴霸的技能出现，一刀砍死3个人，这个游戏就失去平衡。</p>
<p><strong>应用场景：</strong>需求经常变化的软件，一般需求的变化都集中在用户层，互联网应用，企业内部软件，游戏等都是面向对象的程序设计大显身手的好地方。</p>
<p>在python 中面向对象的程序设计并不是全部。</p>
<p>​        面向对象编程可以使程序的维护和扩展变得更简单，并且可以大大提高程序开发效率 ，另外，基于面向对象的程序可以使它人更加容易理解你的代码逻辑，从而使团队开发变得更从容。</p>
<p>了解一些名词：类、对象、实例、实例化</p>
<p>类：具有相同特征的一类事物(人、狗、老虎)</p>
<p>对象／实例：具体的某一个事物（隔壁阿花、楼下旺财）</p>
<p>实例化：类——&gt;对象的过程（这在生活中表现的不明显，我们在后面再慢慢解释）</p>
<h2 id="（二）初识类和对象"><a href="#（二）初识类和对象" class="headerlink" title="（二）初识类和对象"></a>（二）初识类和对象</h2><p>python中一切皆为对象，类型的本质就是类，所以，不管你信不信，你已经使用了很长时间的类了。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>dict <span class="comment">#类型dict就是类dict</span></span><br><span class="line">&lt;<span class="class"><span class="keyword">class</span> '<span class="title">dict</span>'&gt;</span></span><br><span class="line">&gt;&gt;&gt; d=dict(name='eva') #实例化</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>d.pop(<span class="string">'name'</span>) <span class="comment">#向d发一条消息，执行d的方法pop</span></span><br><span class="line"><span class="string">'eva'</span></span><br></pre></td></tr></table></figure>

<p>​        从上面的例子来看，字典就是一类数据结构，我一说字典你就知道是那个用{ }表示，里面由k-v键值对的东西，它还具有一些增删改查的方法。但是我一说字典你能知道字典里具体存了哪些内容么？不能，所以我们说对于一个类来说，它具有相同的特征属性和方法。</p>
<p>​        而具体的{‘name’:’eva’}这个字典，它是一个字典，可以使用字典的所有方法，并且里面有了具体的值，它就是字典的一个对象。对象就是已经实实在在存在的某一个具体的个体。</p>
<p>​        再举一个其他的例子，通俗一点，比如你现在有一个动物园，你想描述这个动物园，那么动物园里的每一种动物就是一个类，老虎、天鹅、鳄鱼、熊。他们都有相同的属性，比如身高体重出生时间和品种，还有各种动作，比如鳄鱼会游泳，天鹅会飞，老虎会跑，熊会吃。</p>
<p>​        但是这些老虎熊啥的都不是具体的某一只，而是一类动物。虽然他们都有身高体重，但是你却没有办法确定这个值是多少。如果这个时候给你一只具体的老虎，而你还没死，那你就能给他量量身高称称体重，这些数值是不是就变成具体的了？那么具体的这一只老虎就是一个具体的实例，也是一个对象。不止这一只，其实每一只具体的老虎都有自己的身高体重，那么每一只老虎都是老虎类的一个对象。</p>
<p><strong>在python中，用变量表示特征，用函数表示技能，因而具有相同特征和技能的一类事物就是‘类’，对象是则是这一类事物中具体的一个。</strong></p>
<h3 id="一、类的相关知识"><a href="#一、类的相关知识" class="headerlink" title="一、类的相关知识"></a>一、类的相关知识</h3><h4 id="1、初识类"><a href="#1、初识类" class="headerlink" title="1、初识类"></a>1、初识类</h4><p><strong>声明</strong></p>
<p><strong>（1）声明函数</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">functionName</span><span class="params">(args)</span>:</span></span><br><span class="line">     <span class="string">'函数文档字符串'</span></span><br><span class="line">      函数体</span><br></pre></td></tr></table></figure>

<p><strong>（2）声明类</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="string">class 类名:</span></span><br><span class="line"><span class="string">    '类的文档字符串'</span></span><br><span class="line"><span class="string">    类体</span></span><br><span class="line"><span class="string">'''</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#我们创建一个类</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Data</span>:</span></span><br><span class="line">    <span class="keyword">pass</span></span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span>:</span>   <span class="comment">#定义一个人类</span></span><br><span class="line">    role = <span class="string">'person'</span>  <span class="comment">#人的角色属性都是人</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">walk</span><span class="params">(self)</span>:</span>  <span class="comment">#人都可以走路，也就是有一个走路方法，也叫动态属性</span></span><br><span class="line">        print(<span class="string">"person is walking..."</span>)</span><br></pre></td></tr></table></figure>

<h4 id="2、类的两种作用"><a href="#2、类的两种作用" class="headerlink" title="2、类的两种作用"></a>2、类的两种作用</h4><p><strong>类有两种作用：属性引用和实例化</strong></p>
<p><strong>（1）属性引用</strong></p>
<p>属性引用（类名 . 属性）</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span>:</span>   <span class="comment">#定义一个人类</span></span><br><span class="line">    role = <span class="string">'person'</span>  <span class="comment">#人的角色属性都是人</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">walk</span><span class="params">(self)</span>:</span>  <span class="comment">#人都可以走路，也就是有一个走路方法</span></span><br><span class="line">        print(<span class="string">"person is walking..."</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">print(Person.role)  <span class="comment">#查看人的role属性</span></span><br><span class="line">print(Person.walk)  <span class="comment">#引用人的走路方法，注意，这里不是在调用</span></span><br></pre></td></tr></table></figure>

<p><strong>（2）实例化</strong></p>
<p>实例化：类名加括号就是实例化，会自动触发<strong>init</strong>函数的运行，可以用它来为每个实例定制自己的特征</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span>:</span>   <span class="comment">#定义一个人类</span></span><br><span class="line">    role = <span class="string">'person'</span>  <span class="comment">#人的角色属性都是人</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self,name)</span>:</span></span><br><span class="line">        self.name = name  <span class="comment"># 每一个角色都有自己的昵称;</span></span><br><span class="line">        </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">walk</span><span class="params">(self)</span>:</span>  <span class="comment">#人都可以走路，也就是有一个走路方法</span></span><br><span class="line">        print(<span class="string">"person is walking..."</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">print(Person.role)  <span class="comment">#查看人的role属性</span></span><br><span class="line">print(Person.walk)  <span class="comment">#引用人的走路方法，注意，这里不是在调用</span></span><br></pre></td></tr></table></figure>

<p>例子：</p>
 <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span>:</span>                </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self,*args)</span>:</span> </span><br><span class="line">        self.name = args[<span class="number">0</span>]   </span><br><span class="line">        self.hp = args[<span class="number">1</span>]</span><br><span class="line">        self.aggr = args[<span class="number">2</span>]</span><br><span class="line">        self.sex = args[<span class="number">3</span>]</span><br><span class="line"> </span><br><span class="line">alex = Person(<span class="string">'狗剩儿'</span>, <span class="number">100</span>, <span class="number">1</span>, <span class="string">'不祥'</span>)    <span class="comment">#alex对象</span></span><br><span class="line">print(alex.name)</span><br><span class="line">print(alex.hp)</span><br><span class="line">print(alex.sex)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 对象 = 类名()</span></span><br><span class="line"><span class="comment"># 过程：</span></span><br><span class="line">    <span class="comment"># 类名() 首先 会创造出一个对象，创建了一个self变量（相当于一个空字典）</span></span><br><span class="line">    <span class="comment"># 调用init方法，类名括号里的参数会被这里接收</span></span><br><span class="line">    <span class="comment"># 执行init方法</span></span><br><span class="line">    <span class="comment"># 返回self 给alex</span></span><br></pre></td></tr></table></figure>

<p>实例化的过程就是类——&gt;对象的过程</p>
<p>原本我们只有一个Person类，在这个过程中，产生了一个egg对象，有自己具体的名字、攻击力和生命值。</p>
<p>语法：对象名 = 类名(参数)</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">egg = Person(<span class="string">'egon'</span>)  <span class="comment">#类名()就等于在执行Person.__init__()</span></span><br><span class="line"><span class="comment">#执行完__init__()就会返回一个对象。这个对象类似一个字典，存着属于这个人本身的一些属性和方法。</span></span><br></pre></td></tr></table></figure>

<p><strong>（3）查看属性&amp;调用方法</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">print(egg.name)     <span class="comment">#查看属性直接 对象名.属性名</span></span><br><span class="line">print(edd.__dict__)	<span class="comment">#查看所有</span></span><br><span class="line">print(egg.walk())   <span class="comment">#调用方法，对象名.方法名()</span></span><br><span class="line"><span class="comment"># egg.walk() == Person.walk(egg)</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 对象能做的事：</span></span><br><span class="line">    <span class="comment"># 查看属性</span></span><br><span class="line">    <span class="comment"># 调用方法</span></span><br><span class="line">    <span class="comment"># __dict__ 对于对象的增删改查操作都可以通过字典的语法进行</span></span><br><span class="line"><span class="comment"># 类名能做的事：</span></span><br><span class="line">    <span class="comment"># 实例化</span></span><br><span class="line">    <span class="comment"># 调用方法 : 只不过要自己传递self参数</span></span><br><span class="line">    <span class="comment"># 调用类中的属性,也就是调用静态属性</span></span><br><span class="line">    <span class="comment"># __dict__ 对于类中的名字只能看 不能操作</span></span><br></pre></td></tr></table></figure>

<p><strong>（4）关于self</strong></p>
<p>self：在实例化时自动将对象/实例本身传给<strong>init</strong>的第一个参数，你也可以给他起个别的名字，但是正常人都不会这么做。<br>因为你瞎改别人就不认识。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span>:</span>                 <span class="comment"># 类名</span></span><br><span class="line">     country = <span class="string">'China'</span>         <span class="comment"># 创造了一个只要是这个类就一定有的属性</span></span><br><span class="line">                                <span class="comment"># 类属性 静态属性</span></span><br><span class="line">     <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self,*args)</span>:</span>  <span class="comment"># 初始化方法，self是对象，是一个必须传的参数</span></span><br><span class="line">         <span class="comment"># self就是一个可以存储很多属性的大字典</span></span><br><span class="line">         self.name = args[<span class="number">0</span>]   <span class="comment"># 往字典里添加属性的方式发生了一些变化</span></span><br><span class="line">         self.hp = args[<span class="number">1</span>]</span><br><span class="line">         self.aggr = args[<span class="number">2</span>]</span><br><span class="line">         self.sex = args[<span class="number">3</span>]</span><br><span class="line"></span><br><span class="line">     <span class="function"><span class="keyword">def</span> <span class="title">walk</span><span class="params">(self,n)</span>:</span>         <span class="comment"># 方法，一般情况下必须传self参数，且必须写在第一个</span></span><br><span class="line">                               <span class="comment"># 后面还可以传其他参数，是自由的</span></span><br><span class="line">         print(<span class="string">'%s走走走,走了%s步'</span>%(self.name,n))</span><br><span class="line"></span><br><span class="line"> print(Person.country)        <span class="comment"># 类名 可以查看类中的属性，不需要实例化就可以查看</span></span><br><span class="line"> alex = Person(<span class="string">'狗剩儿'</span>,<span class="number">100</span>,<span class="number">1</span>,<span class="string">'不详'</span>)  <span class="comment"># 类名还可以实例化对象，alex对象   # 实例化</span></span><br><span class="line"> print(alex.__dict__) <span class="comment"># 查看所有属性</span></span><br><span class="line"> print(alex.name)  <span class="comment"># 查看属性值</span></span><br><span class="line"> print(alex.hp)  <span class="comment"># 查看属性值</span></span><br><span class="line"> alex.walk(<span class="number">5</span>)    <span class="comment"># Person.walk(alex，5)  # 调用方法 类名.方法名(对象名)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#通过dict来修改属性值</span></span><br><span class="line">print(Person.__dict__[<span class="string">'country'</span>]) Person.__dict__[<span class="string">'country'</span>] = <span class="string">'印度'</span>	<span class="comment">#error，类中的名字只能查看，不能操作</span></span><br><span class="line">print(alex.__dict__[<span class="string">'name'</span>])</span><br><span class="line">alex.__dict__[<span class="string">'name'</span>] = <span class="string">'二哥'</span>	<span class="comment">#对象中，能进行增删改查</span></span><br></pre></td></tr></table></figure>

<p><strong>（5）类属性的补充</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">一：我们定义的类的属性到底存到哪里了？有两种方式查看</span><br><span class="line">dir(类名)：查出的是一个名字列表</span><br><span class="line">类名.__dict__:查出的是一个字典，key为属性名，value为属性值</span><br><span class="line"></span><br><span class="line">二：特殊的类属性</span><br><span class="line">类名.__name__# 类的名字(字符串)</span><br><span class="line">类名.__doc__# 类的文档字符串</span><br><span class="line">类名.__base__# 类的第一个父类(在讲继承时会讲)</span><br><span class="line">类名.__bases__# 类所有父类构成的元组(在讲继承时会讲)</span><br><span class="line">类名.__dict__# 类的字典属性</span><br><span class="line">类名.__module__# 类定义所在的模块</span><br><span class="line">类名.__class__# 实例对应的类(仅新式类中)</span><br></pre></td></tr></table></figure>

<h3 id="二、对象的相关知识"><a href="#二、对象的相关知识" class="headerlink" title="二、对象的相关知识"></a>二、对象的相关知识</h3><h4 id="1、对象是关于类而实际存在的例子，即实例"><a href="#1、对象是关于类而实际存在的例子，即实例" class="headerlink" title="1、对象是关于类而实际存在的例子，即实例"></a>1、对象是关于类而实际存在的例子，即实例</h4><h4 id="2、对象-实例只有一种作用：属性引用"><a href="#2、对象-实例只有一种作用：属性引用" class="headerlink" title="2、对象/实例只有一种作用：属性引用"></a>2、对象/实例只有一种作用：属性引用</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">egg = Person(<span class="string">'egon'</span>,<span class="number">10</span>,<span class="number">1000</span>)</span><br><span class="line">print(egg.name)</span><br><span class="line">print(egg.aggressivity)</span><br><span class="line">print(egg.life_value)</span><br></pre></td></tr></table></figure>

<p>​        当然了，你也可以引用一个方法，因为方法也是一个属性，只不过是一个类似函数的属性，我们也管它叫<strong>动态属性</strong>。<br>引用动态属性并不是执行这个方法，要想调用方法和调用函数是一样的，都需要在后面加上括号。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">print(egg.attack)</span><br></pre></td></tr></table></figure>

<p>实例：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">Person</span><span class="params">(*args,**kwargs)</span>:</span></span><br><span class="line">    self = &#123;&#125;</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">attack</span><span class="params">(self,dog)</span>:</span></span><br><span class="line">        dog[<span class="string">'life_value'</span>] -= self[<span class="string">'aggressivity'</span>]</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(name,aggressivity,life_value)</span>:</span></span><br><span class="line">        self[<span class="string">'name'</span>] = name</span><br><span class="line">        self[<span class="string">'aggressivity'</span>] = aggressivity</span><br><span class="line">        self[<span class="string">'life_value'</span>] = life_value</span><br><span class="line">        self[<span class="string">'attack'</span>] = attack</span><br><span class="line"></span><br><span class="line">    __init__(*args,**kwargs)</span><br><span class="line">    <span class="keyword">return</span> self</span><br><span class="line"></span><br><span class="line">egg = Person(<span class="string">'egon'</span>,<span class="number">78</span>,<span class="number">10</span>)</span><br><span class="line">print(egg[<span class="string">'name'</span>])</span><br></pre></td></tr></table></figure>

<h4 id="3、面向对象小结"><a href="#3、面向对象小结" class="headerlink" title="3、面向对象小结"></a>3、面向对象小结</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">面向对象小结——定义及调用的固定模式</span><br><span class="line"></span><br><span class="line">class 类名:</span><br><span class="line">    def __init__(self,参数1,参数2):</span><br><span class="line">        self.对象的属性1 = 参数1</span><br><span class="line">        self.对象的属性2 = 参数2</span><br><span class="line"></span><br><span class="line">    def 方法名(self):pass</span><br><span class="line"></span><br><span class="line">    def 方法名2(self):pass</span><br><span class="line"></span><br><span class="line">对象名 = 类名(1,2)  #对象就是实例，代表一个具体的东西</span><br><span class="line">                  #类名() : 类名+括号就是实例化一个类，相当于调用了__init__方法</span><br><span class="line">                  #括号里传参数，参数不需要传self，其他与init中的形参一一对应</span><br><span class="line">                  #结果返回一个对象</span><br><span class="line">                  </span><br><span class="line">对象名.对象的属性1   #查看对象的属性，直接用 对象名.属性名 即可</span><br><span class="line"></span><br><span class="line">对象名.方法名()     #调用类中的方法，直接用 对象名.方法名() 即可</span><br></pre></td></tr></table></figure>

<h3 id="三、对象之间的交互"><a href="#三、对象之间的交互" class="headerlink" title="三、对象之间的交互"></a>三、对象之间的交互</h3><p>现在我们已经有一个人类了，通过给人类一些具体的属性我们就可以拿到一个实实在在的人。<br>现在我们要再创建一个狗类，狗就不能打人了，只能咬人，所以我们给狗一个bite方法。<br>有了狗类，我们还要实例化一只实实在在的狗出来。<br>然后人和狗就可以打架了。现在我们就来让他们打一架吧！</p>
<h4 id="1、创建一个狗类"><a href="#1、创建一个狗类" class="headerlink" title="1、创建一个狗类"></a>1、创建一个狗类</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Dog</span>:</span>  <span class="comment"># 定义一个狗类</span></span><br><span class="line">    role = <span class="string">'dog'</span>  <span class="comment"># 狗的角色属性都是狗</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, name, breed, aggressivity, life_value)</span>:</span></span><br><span class="line">        self.name = name  <span class="comment"># 每一只狗都有自己的昵称;</span></span><br><span class="line">        self.breed = breed  <span class="comment"># 每一只狗都有自己的品种;</span></span><br><span class="line">        self.aggressivity = aggressivity  <span class="comment"># 每一只狗都有自己的攻击力;</span></span><br><span class="line">        self.life_value = life_value  <span class="comment"># 每一只狗都有自己的生命值;</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">bite</span><span class="params">(self,people)</span>:</span></span><br><span class="line">        <span class="comment"># 狗可以咬人，这里的狗也是一个对象。</span></span><br><span class="line">        <span class="comment"># 狗咬人，那么人的生命值就会根据狗的攻击力而下降</span></span><br><span class="line">　　　　 dog.life_value -= self.aggressivit</span><br></pre></td></tr></table></figure>

<h4 id="2、实例化"><a href="#2、实例化" class="headerlink" title="2、实例化"></a>2、实例化</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ha2 = Dog(<span class="string">'二愣子'</span>,<span class="string">'哈士奇'</span>,<span class="number">10</span>,<span class="number">1000</span>)  <span class="comment">#创造了一只实实在在的狗ha2</span></span><br></pre></td></tr></table></figure>

<h4 id="3、交互"><a href="#3、交互" class="headerlink" title="3、交互"></a>3、交互</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># egon打ha2一下</span></span><br><span class="line">print(ha2.life_value)         <span class="comment">#看看ha2的生命值</span></span><br><span class="line">egg.attack(ha2)               <span class="comment">#egg打了ha2一下</span></span><br><span class="line">print(ha2.life_value)         <span class="comment">#ha2掉了10点血</span></span><br></pre></td></tr></table></figure>

<h4 id="4、完整的代码"><a href="#4、完整的代码" class="headerlink" title="4、完整的代码"></a>4、完整的代码</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># egon大战哈士奇</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span>:</span>  <span class="comment"># 定义一个人类</span></span><br><span class="line">    role = <span class="string">'person'</span>  <span class="comment"># 人的角色属性都是人</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, name, aggressivity, life_value)</span>:</span></span><br><span class="line">        self.name = name  <span class="comment"># 每一个角色都有自己的昵称;</span></span><br><span class="line">        self.aggressivity = aggressivity  <span class="comment"># 每一个角色都有自己的攻击力;</span></span><br><span class="line">        self.life_value = life_value  <span class="comment"># 每一个角色都有自己的生命值;</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">attack</span><span class="params">(self,dog)</span>:</span></span><br><span class="line">        <span class="comment"># 人可以攻击狗，这里的狗也是一个对象。</span></span><br><span class="line">        <span class="comment"># 人攻击狗，那么狗的生命值就会根据人的攻击力而下降</span></span><br><span class="line">        dog.life_value -= self.aggressivity</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Dog</span>:</span>  <span class="comment"># 定义一个狗类</span></span><br><span class="line">    role = <span class="string">'dog'</span>  <span class="comment"># 狗的角色属性都是狗</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, name, breed, aggressivity, life_value)</span>:</span></span><br><span class="line">        self.name = name  <span class="comment"># 每一只狗都有自己的昵称;</span></span><br><span class="line">        self.breed = breed  <span class="comment"># 每一只狗都有自己的品种;</span></span><br><span class="line">        self.aggressivity = aggressivity  <span class="comment"># 每一只狗都有自己的攻击力;</span></span><br><span class="line">        self.life_value = life_value  <span class="comment"># 每一只狗都有自己的生命值;</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">bite</span><span class="params">(self,people)</span>:</span></span><br><span class="line">        <span class="comment"># 狗可以咬人，这里的狗也是一个对象。</span></span><br><span class="line">        <span class="comment"># 狗咬人，那么人的生命值就会根据狗的攻击力而下降</span></span><br><span class="line">        people.life_value -= self.aggressivity</span><br><span class="line"></span><br><span class="line">egg = Person(<span class="string">'egon'</span>,<span class="number">10</span>,<span class="number">1000</span>)  <span class="comment">#创造了一个实实在在的人egg</span></span><br><span class="line">ha2 = Dog(<span class="string">'二愣子'</span>,<span class="string">'哈士奇'</span>,<span class="number">10</span>,<span class="number">1000</span>)  <span class="comment">#创造了一只实实在在的狗ha2</span></span><br><span class="line">print(ha2.life_value)         <span class="comment">#看看ha2的生命值</span></span><br><span class="line">egg.attack(ha2)               <span class="comment">#egg打了ha2一下</span></span><br><span class="line">print(ha2.life_value)         <span class="comment">#ha2掉了10点血</span></span><br></pre></td></tr></table></figure>

<p>一个简单的例子帮你理解面向对象：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> math <span class="keyword">import</span> pi</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Circle</span>:</span></span><br><span class="line">    <span class="string">'''</span></span><br><span class="line"><span class="string">    定义了一个圆形类；</span></span><br><span class="line"><span class="string">    提供计算面积(area)和周长(perimeter)的方法</span></span><br><span class="line"><span class="string">    '''</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self,radius)</span>:</span></span><br><span class="line">        self.radius = radius</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">area</span><span class="params">(self)</span>:</span></span><br><span class="line">         <span class="keyword">return</span> pi * self.radius * self.radius</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">perimeter</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> <span class="number">2</span> * pi *self.radius</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">circle =  Circle(<span class="number">10</span>) <span class="comment">#实例化一个圆</span></span><br><span class="line">area1 = circle.area() <span class="comment">#计算圆面积</span></span><br><span class="line">per1 = circle.perimeter() <span class="comment">#计算圆周长</span></span><br><span class="line">print(area1,per1) <span class="comment">#打印圆面积和周长</span></span><br></pre></td></tr></table></figure>

<h3 id="四、类命名空间与对象、实例的命名空间"><a href="#四、类命名空间与对象、实例的命名空间" class="headerlink" title="四、类命名空间与对象、实例的命名空间"></a>四、类命名空间与对象、实例的命名空间</h3><p><strong>创建一个类就会创建一个类的名称空间，用来存储类中定义的所有名字，这些名字称为类的属性</strong></p>
<p>而类有两种属性：静态属性和动态属性</p>
<ul>
<li>静态属性就是直接在类中定义的变量</li>
<li>动态属性就是定义在类中的方法</li>
</ul>
<h4 id="1、其中类的数据属性是共享给所有对象的"><a href="#1、其中类的数据属性是共享给所有对象的" class="headerlink" title="1、其中类的数据属性是共享给所有对象的"></a>1、其中类的数据属性是共享给所有对象的</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt;id(egg.role)</span><br><span class="line"><span class="number">4341594072</span></span><br><span class="line">&gt;&gt;&gt;id(Person.role)</span><br><span class="line"><span class="number">4341594072</span></span><br></pre></td></tr></table></figure>

<h4 id="2、而类的动态属性是绑定到所有对象的"><a href="#2、而类的动态属性是绑定到所有对象的" class="headerlink" title="2、而类的动态属性是绑定到所有对象的"></a>2、而类的动态属性是绑定到所有对象的</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt;egg.attack</span><br><span class="line">&lt;bound method Person.attack of &lt;__main__.Person object at <span class="number">0x101285860</span>&gt;&gt;</span><br><span class="line">&gt;&gt;&gt;Person.attack</span><br><span class="line">&lt;function Person.attack at <span class="number">0x10127abf8</span>&gt;</span><br></pre></td></tr></table></figure>

<p>一个例子：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Course</span>:</span></span><br><span class="line">    language = [<span class="string">'Chinese'</span>]</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self,teacher,course_name,period,price)</span>:</span></span><br><span class="line">        self.teacher = teacher</span><br><span class="line">        self.name = course_name</span><br><span class="line">        self.period = period</span><br><span class="line">        self.price = price</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">func</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Course.language = 'English'  error</span></span><br><span class="line"></span><br><span class="line">python = Course(<span class="string">'egon'</span>,<span class="string">'python'</span>,<span class="string">'6 months'</span>,<span class="number">20000</span>)</span><br><span class="line">linux = Course(<span class="string">'oldboy'</span>,<span class="string">'linux'</span>,<span class="string">'6 months'</span>,<span class="number">20000</span>)</span><br><span class="line"></span><br><span class="line">print(python.language)</span><br><span class="line">print(linux.language)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 第一种：</span></span><br><span class="line">python.language[<span class="number">0</span>] = <span class="string">'English'</span></span><br><span class="line"></span><br><span class="line">print(python.language)	<span class="comment"># ['English']</span></span><br><span class="line">print(linux.language)		<span class="comment"># ['English']</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#	第二种：</span></span><br><span class="line">python.language = <span class="string">'English'</span></span><br><span class="line"></span><br><span class="line">print(python.language)	<span class="comment"># ['English']</span></span><br><span class="line">print(linux.language)		<span class="comment"># ['Chinese']</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 类中的静态变量 可以被对象和类调用</span></span><br><span class="line"><span class="comment"># 对于不可变数据类型来说，类变量最好用类名操作</span></span><br><span class="line"><span class="comment"># 对于可变数据类型来说，对象名的修改是共享的，重新赋值是独立的</span></span><br></pre></td></tr></table></figure>

<p>另一个例子：模拟人生</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span>:</span></span><br><span class="line">    money = <span class="number">0</span></span><br><span class="line"></span><br><span class="line">mother = Person()</span><br><span class="line">father = Person()</span><br><span class="line">mother.money += <span class="number">1000</span></span><br><span class="line">father.money += <span class="number">1000</span></span><br><span class="line">print(Person.money)		<span class="comment"># 0</span></span><br><span class="line"><span class="comment"># 在mother和father两个实例中，都在各自的内存空间中创建了money变量，相当于存私房钱，并没有加入到总收入中</span></span><br><span class="line"></span><br><span class="line"><span class="comment">###更正###</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span>:</span></span><br><span class="line">    money = <span class="number">0</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">work</span><span class="params">(self)</span>:</span></span><br><span class="line">        Person.money += <span class="number">1000</span></span><br><span class="line"></span><br><span class="line">mother = Person()</span><br><span class="line">father = Person()</span><br><span class="line">Person.money += <span class="number">1000</span></span><br><span class="line">Person.money += <span class="number">1000</span></span><br><span class="line">print(Person.money)		<span class="comment"># 2000</span></span><br><span class="line">mother.work()</span><br><span class="line">father.work()</span><br><span class="line">print(Person.money)		<span class="comment"># 4000</span></span><br></pre></td></tr></table></figure>

<p>还有一个例子：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#创建一个类，每实例化一个对象就计数</span></span><br><span class="line"><span class="comment">#最终所有的对象共享这个数据</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Foo</span>:</span></span><br><span class="line">    count = <span class="number">0</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">        Foo.count += <span class="number">1</span></span><br><span class="line"></span><br><span class="line">f1 = Foo()</span><br><span class="line">f2 = Foo()</span><br><span class="line">print(f1.count)		<span class="comment"># 2</span></span><br><span class="line">print(f2.count)		<span class="comment"># 2</span></span><br><span class="line">f3 = Foo()</span><br><span class="line">print(f1.count)		<span class="comment"># 3</span></span><br></pre></td></tr></table></figure>

<p><strong>创建一个对象/实例就会创建一个对象/实例的名称空间，存放对象/实例的名字，称为对象/实例的属性</strong></p>
<p>在obj.name会先从obj自己的名称空间里找name，找不到则去类中找，类也找不到就找父类…最后都找不到就抛出异常（只能找到最祖先的类，不能找到全局变量）。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 包 —— __init__   (python中一切皆对象)</span></span><br><span class="line"><span class="comment"># import package —— 类的实例化的过程，自动调用init</span></span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line">time.time()</span><br></pre></td></tr></table></figure>

<h3 id="五、面向对象的组合用法"><a href="#五、面向对象的组合用法" class="headerlink" title="五、面向对象的组合用法"></a>五、面向对象的组合用法</h3><p><strong>软件重用的重要方式除了继承之外还有另外一种方式，即：组合</strong></p>
<p><strong>组合指的是，在一个类中以另外一个类的对象作为数据属性，称为类的组合</strong></p>
<p>一个例子：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 人狗大战</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Dog</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self,name,aggr,hp,kind)</span>:</span></span><br><span class="line">        self.name = name</span><br><span class="line">        self.aggr = aggr</span><br><span class="line">        self.hp = hp</span><br><span class="line">        self.kind = kind</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">bite</span><span class="params">(self,person)</span>:</span></span><br><span class="line">        person.hp -= self.aggr</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self,name,aggr,hp,sex)</span>:</span></span><br><span class="line">        self.name = name</span><br><span class="line">        self.aggr = aggr</span><br><span class="line">        self.hp = hp</span><br><span class="line">        self.sex = sex</span><br><span class="line">        self.money = <span class="number">0</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">attack</span><span class="params">(self,dog)</span>:</span></span><br><span class="line">        dog.hp -= self.aggr</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">get_weapon</span><span class="params">(self,weapon)</span>:</span></span><br><span class="line">        <span class="keyword">if</span> self.money &gt;= weapon.price:</span><br><span class="line">            self.money -= weapon.price</span><br><span class="line">            self.weapon = weapon</span><br><span class="line">            self.aggr += weapon.aggr</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            print(<span class="string">"余额不足，请先充值"</span>)</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Weapon</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self,name,aggr,njd,price)</span>:</span></span><br><span class="line">        self.name = name</span><br><span class="line">        self.aggr = aggr</span><br><span class="line">        self.njd = njd</span><br><span class="line">        self.price = price</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">hand18</span><span class="params">(self,person)</span>:</span>    <span class="comment">#给武器设置一个名为hand18的技能</span></span><br><span class="line">        <span class="keyword">if</span> self.njd &gt; <span class="number">0</span>:</span><br><span class="line">            person.hp -= self.aggr * <span class="number">2</span></span><br><span class="line">            self.njd -= <span class="number">1</span></span><br><span class="line"></span><br><span class="line">alex = Person(<span class="string">'alex'</span>,<span class="number">0.5</span>,<span class="number">100</span>,<span class="string">'不详'</span>)</span><br><span class="line">jin = Dog(<span class="string">'金老板'</span>,<span class="number">100</span>,<span class="number">500</span>,<span class="string">'teddy'</span>)</span><br><span class="line">w = Weapon(<span class="string">'打狗棒'</span>,<span class="number">100</span>,<span class="number">3</span>,<span class="number">998</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># alex装备打狗棒</span></span><br><span class="line">alex.money += <span class="number">1000</span></span><br><span class="line">alex.get_weapon(w)</span><br><span class="line">print(alex.aggr)    <span class="comment"># 100.5</span></span><br><span class="line">alex.attack(jin)</span><br><span class="line">print(jin.hp)       <span class="comment"># 399.5</span></span><br><span class="line">alex.weapon.hand18(jin)</span><br><span class="line">print(jin.hp)       <span class="comment"># 199。5</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 组合 ：一个对象的属性值是另外一个类的对象</span></span><br><span class="line"><span class="comment">#        alex.weapon 是 Weapon类的对象</span></span><br></pre></td></tr></table></figure>

<p><strong>圆环是由两个圆组成的，圆环的面积是外面圆的面积减去内部圆的面积。圆环的周长是内部圆的周长加上外部圆的周长。</strong></p>
<p><strong>这个时候，我们就首先实现一个圆形类，计算一个圆的周长和面积。然后在”环形类”中组合圆形的实例作为自己的属性来用</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> math <span class="keyword">import</span> pi</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Circle</span>:</span></span><br><span class="line">    <span class="string">'''</span></span><br><span class="line"><span class="string">    定义了一个圆形类；</span></span><br><span class="line"><span class="string">    提供计算面积(area)和周长(perimeter)的方法</span></span><br><span class="line"><span class="string">    '''</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self,radius)</span>:</span></span><br><span class="line">        self.radius = radius</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">area</span><span class="params">(self)</span>:</span></span><br><span class="line">         <span class="keyword">return</span> pi * self.radius * self.radius</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">perimeter</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> <span class="number">2</span> * pi *self.radius</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">circle =  Circle(<span class="number">10</span>) <span class="comment">#实例化一个圆</span></span><br><span class="line">area1 = circle.area() <span class="comment">#计算圆面积</span></span><br><span class="line">per1 = circle.perimeter() <span class="comment">#计算圆周长</span></span><br><span class="line">print(area1,per1) <span class="comment">#打印圆面积和周长</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Ring</span>:</span></span><br><span class="line">    <span class="string">'''</span></span><br><span class="line"><span class="string">    定义了一个圆环类</span></span><br><span class="line"><span class="string">    提供圆环的面积和周长的方法</span></span><br><span class="line"><span class="string">    '''</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self,radius_outside,radius_inside)</span>:</span></span><br><span class="line">        self.outsid_circle = Circle(radius_outside)</span><br><span class="line">        self.inside_circle = Circle(radius_inside)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">area</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> self.outsid_circle.area() - self.inside_circle.area()</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">perimeter</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span>  self.outsid_circle.perimeter() + self.inside_circle.perimeter()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">ring = Ring(<span class="number">10</span>,<span class="number">5</span>) <span class="comment">#实例化一个环形</span></span><br><span class="line">print(ring.perimeter()) <span class="comment">#计算环形的周长</span></span><br><span class="line">print(ring.area()) <span class="comment">#计算环形的面积</span></span><br></pre></td></tr></table></figure>

<p><strong>用组合的方式建立了类与组合的类之间的关系，它是一种‘有’的关系,比如教授有生日，教授教python课程</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">BirthDate</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self,year,month,day)</span>:</span></span><br><span class="line">        self.year=year</span><br><span class="line">        self.month=month</span><br><span class="line">        self.day=day</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Couse</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self,name,price,period)</span>:</span></span><br><span class="line">        self.name=name</span><br><span class="line">        self.price=price</span><br><span class="line">        self.period=period</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Teacher</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self,name,gender,birth,course)</span>:</span></span><br><span class="line">        self.name=name </span><br><span class="line">        self.gender=gender</span><br><span class="line">        self.birth=birth</span><br><span class="line">        self.course=course</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">teach</span><span class="params">(self)</span>:</span> </span><br><span class="line">        print(<span class="string">'teaching'</span>)</span><br><span class="line"></span><br><span class="line">p1=Teacher(<span class="string">'egon'</span>,<span class="string">'male'</span>, </span><br><span class="line">            BirthDate(<span class="string">'1995'</span>,<span class="string">'1'</span>,<span class="string">'27'</span>), </span><br><span class="line">            Couse(<span class="string">'python'</span>,<span class="string">'28000'</span>,<span class="string">'4 months'</span>)</span><br><span class="line">           ) </span><br><span class="line"></span><br><span class="line">print(p1.birth.year,p1.birth.month,p1.birth.day) </span><br><span class="line"></span><br><span class="line">print(p1.course.name,p1.course.price,p1.course.period)</span><br><span class="line"><span class="string">''' </span></span><br><span class="line"><span class="string">运行结果: </span></span><br><span class="line"><span class="string">27 </span></span><br><span class="line"><span class="string">python 28000 4 months </span></span><br><span class="line"><span class="string">'''</span></span><br></pre></td></tr></table></figure>

<p><strong>当类之间有显著不同，并且较小的类是较大的类所需要的组件时，用组合比较好</strong></p>
<h3 id="六、初识面向对象小结"><a href="#六、初识面向对象小结" class="headerlink" title="六、初识面向对象小结"></a>六、初识面向对象小结</h3><h4 id="1、定义一个人类"><a href="#1、定义一个人类" class="headerlink" title="1、定义一个人类"></a>1、定义一个人类</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span>:</span>  <span class="comment"># 定义一个人类</span></span><br><span class="line">    role = <span class="string">'person'</span>  <span class="comment"># 人的角色属性都是人</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, name, aggressivity, life_value, money)</span>:</span></span><br><span class="line">        self.name = name  <span class="comment"># 每一个角色都有自己的昵称;</span></span><br><span class="line">        self.aggressivity = aggressivity  <span class="comment"># 每一个角色都有自己的攻击力;</span></span><br><span class="line">        self.life_value = life_value  <span class="comment"># 每一个角色都有自己的生命值;</span></span><br><span class="line">        self.money = money</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">attack</span><span class="params">(self,dog)</span>:</span></span><br><span class="line">        <span class="comment"># 人可以攻击狗，这里的狗也是一个对象。</span></span><br><span class="line">        <span class="comment"># 人攻击狗，那么狗的生命值就会根据人的攻击力而下降</span></span><br><span class="line">        dog.life_value -= self.aggressivity</span><br></pre></td></tr></table></figure>

<h4 id="2、定义一个狗类"><a href="#2、定义一个狗类" class="headerlink" title="2、定义一个狗类"></a>2、定义一个狗类</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Dog</span>:</span>  <span class="comment"># 定义一个狗类</span></span><br><span class="line">    role = <span class="string">'dog'</span>  <span class="comment"># 狗的角色属性都是狗</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, name, breed, aggressivity, life_value)</span>:</span></span><br><span class="line">        self.name = name  <span class="comment"># 每一只狗都有自己的昵称;</span></span><br><span class="line">        self.breed = breed  <span class="comment"># 每一只狗都有自己的品种;</span></span><br><span class="line">        self.aggressivity = aggressivity  <span class="comment"># 每一只狗都有自己的攻击力;</span></span><br><span class="line">        self.life_value = life_value  <span class="comment"># 每一只狗都有自己的生命值;</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">bite</span><span class="params">(self,people)</span>:</span></span><br><span class="line">        <span class="comment"># 狗可以咬人，这里的狗也是一个对象。</span></span><br><span class="line">        <span class="comment"># 狗咬人，那么人的生命值就会根据狗的攻击力而下降</span></span><br><span class="line">        people.life_value -= self.aggressivity</span><br></pre></td></tr></table></figure>

<h4 id="3、创建一个新的兵器类"><a href="#3、创建一个新的兵器类" class="headerlink" title="3、创建一个新的兵器类"></a>3、创建一个新的兵器类</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Weapon</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self,name, price, aggrev, life_value)</span>:</span></span><br><span class="line">        self.name = name</span><br><span class="line">        self.price = price</span><br><span class="line">        self.aggrev = aggrev</span><br><span class="line">        self.life_value = life_value</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">update</span><span class="params">(self, obj)</span>:</span>  <span class="comment">#obj就是要带这个装备的人</span></span><br><span class="line">        obj.money -= self.price  <span class="comment"># 用这个武器的人花钱买所以对应的钱要减少</span></span><br><span class="line">        obj.aggressivity += self.aggrev  <span class="comment"># 带上这个装备可以让人增加攻击</span></span><br><span class="line">        obj.life_value += self.life_value  <span class="comment"># 带上这个装备可以让人增加生命值</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">prick</span><span class="params">(self, obj)</span>:</span>  <span class="comment"># 这是该装备的主动技能,扎死对方</span></span><br><span class="line">        obj.life_value -= <span class="number">500</span>  <span class="comment"># 假设攻击力是500</span></span><br></pre></td></tr></table></figure>

<h4 id="4、测试交互"><a href="#4、测试交互" class="headerlink" title="4、测试交互"></a>4、测试交互</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">lance = Weapon(<span class="string">'长矛'</span>,<span class="number">200</span>,<span class="number">6</span>,<span class="number">100</span>)</span><br><span class="line">egg = Person(<span class="string">'egon'</span>,<span class="number">10</span>,<span class="number">1000</span>,<span class="number">600</span>)  <span class="comment">#创造了一个实实在在的人egg</span></span><br><span class="line">ha2 = Dog(<span class="string">'二愣子'</span>,<span class="string">'哈士奇'</span>,<span class="number">10</span>,<span class="number">1000</span>)  <span class="comment">#创造了一只实实在在的狗ha2</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#egg独自力战"二愣子"深感吃力，决定穷毕生积蓄买一把武器</span></span><br><span class="line"><span class="keyword">if</span> egg.money &gt; lance.price: <span class="comment">#如果egg的钱比装备的价格多，可以买一把长矛</span></span><br><span class="line">    lance.update(egg) <span class="comment">#egg花钱买了一个长矛防身，且自身属性得到了提高</span></span><br><span class="line">    egg.weapon = lance <span class="comment">#egg装备上了长矛</span></span><br><span class="line"></span><br><span class="line">print(egg.money,egg.life_value,egg.aggressivity)</span><br><span class="line"></span><br><span class="line">print(ha2.life_value)</span><br><span class="line">egg.attack(ha2)   <span class="comment">#egg打了ha2一下</span></span><br><span class="line">print(ha2.life_value)</span><br><span class="line">egg.weapon.prick(ha2) <span class="comment">#发动武器技能</span></span><br><span class="line">print(ha2.life_value) <span class="comment">#ha2不敌狡猾的人类用武器取胜，血槽空了一半</span></span><br></pre></td></tr></table></figure>

<h2 id="（三）面向对象的三大特性"><a href="#（三）面向对象的三大特性" class="headerlink" title="（三）面向对象的三大特性"></a>（三）面向对象的三大特性</h2><h3 id="一、继承"><a href="#一、继承" class="headerlink" title="一、继承"></a>一、继承</h3><h4 id="1、什么是继承"><a href="#1、什么是继承" class="headerlink" title="1、什么是继承"></a>1、什么是继承</h4><p>继承是一种创建新类的方式，在python中，新建的类可以继承一个或多个父类，父类又可称为基类或超类，新建的类称为派生类或子类</p>
<p>python中类的继承分为：单继承和多继承</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ParentClass1</span>:</span> <span class="comment">#定义父类</span></span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ParentClass2</span>:</span> <span class="comment">#定义父类</span></span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SubClass1</span><span class="params">(ParentClass1)</span>:</span> <span class="comment">#单继承，基类是ParentClass1，派生类是SubClass</span></span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SubClass2</span><span class="params">(ParentClass1,ParentClass2)</span>:</span> <span class="comment">#python支持多继承，用逗号分隔开多个继承的类</span></span><br><span class="line">    <span class="keyword">pass</span></span><br></pre></td></tr></table></figure>

<p>查看继承：</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>SubClass1.__bases__ <span class="comment">#__base__只查看从左到右继承的第一个子类，__bases__则是查看所有继承的父类</span></span><br><span class="line">(&lt;class '__main__.ParentClass1'&gt;,)</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>SubClass2.__bases__</span><br><span class="line">(&lt;class '__main__.ParentClass1'&gt;, &lt;class '__main__.ParentClass2'&gt;)</span><br></pre></td></tr></table></figure>

<p><strong><em>提示：</em></strong></p>
<p>如果没有指定基类，python的类会默认继承object类，object是所有python类的基类，它提供了一些常见方法（如str）的实现。</p>
<p><strong>python3中，所有类都有父类。没有继承父类默认继承object</strong></p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>ParentClass1.__bases__</span><br><span class="line">(&lt;class 'object'&gt;,)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>ParentClass2.__bases__</span><br><span class="line">(&lt;class 'object'&gt;,)</span><br></pre></td></tr></table></figure>

<h4 id="2、继承与抽象（先抽象再继承）"><a href="#2、继承与抽象（先抽象再继承）" class="headerlink" title="2、继承与抽象（先抽象再继承）"></a>2、继承与抽象（先抽象再继承）</h4><p>抽象即抽取类似或者说比较像的部分。</p>
<p>抽象分成两个层次： </p>
<p>1.将奥巴马和梅西这俩对象比较像的部分抽取成类； </p>
<p>2.将人，猪，狗这三个类比较像的部分抽取成父类。</p>
<p>抽象最主要的作用是划分类别（可以隔离关注点，降低复杂度）</p>
<p><img src="https://raw.githubusercontent.com/suliangxu/MyHexoPicture/master/python%E5%85%A8%E6%A0%88/%E7%AC%AC01%E9%83%A8%E5%88%86%EF%BC%9A%E5%9F%BA%E7%A1%80%2B%E6%A8%A1%E5%9D%97%2B%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%2B%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B/%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1/1.png" alt></p>
<p><strong>继承：是基于抽象的结果，通过编程语言去实现它，肯定是先经历抽象这个过程，才能通过继承的方式去表达出抽象的结构。</strong></p>
<p>抽象只是分析和设计的过程中，一个动作或者说一种技巧，通过抽象可以得到类</p>
<p><img src="https://raw.githubusercontent.com/suliangxu/MyHexoPicture/master/python%E5%85%A8%E6%A0%88/%E7%AC%AC01%E9%83%A8%E5%88%86%EF%BC%9A%E5%9F%BA%E7%A1%80%2B%E6%A8%A1%E5%9D%97%2B%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%2B%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B/%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1/2.png" alt></p>
<h4 id="3、继承与重用性"><a href="#3、继承与重用性" class="headerlink" title="3、继承与重用性"></a>3、继承与重用性</h4><p>使用继承来解决代码重用的例子:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br></pre></td><td class="code"><pre><span class="line">==========================第一部分</span><br><span class="line">例如</span><br><span class="line"></span><br><span class="line">　　猫可以：吃、喝、爬树</span><br><span class="line"></span><br><span class="line">　　狗可以：吃、喝、看家</span><br><span class="line"></span><br><span class="line">如果我们要分别为猫和狗创建一个类，那么就需要为 猫 和 狗 实现他们所有的功能，伪代码如下：</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#猫和狗有大量相同的内容</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> 猫：</span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class">    <span class="title">def</span> 吃<span class="params">(self)</span>:</span></span><br><span class="line">        <span class="comment"># do something</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> 喝<span class="params">(self)</span>:</span></span><br><span class="line">        <span class="comment"># do something</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> 爬树<span class="params">(self)</span>:</span></span><br><span class="line">        <span class="comment"># do something</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> 狗：</span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class">    <span class="title">def</span> 吃<span class="params">(self)</span>:</span></span><br><span class="line">        <span class="comment"># do something</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> 喝<span class="params">(self)</span>:</span></span><br><span class="line">        <span class="comment"># do something</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> 看家<span class="params">(self)</span>:</span></span><br><span class="line">        <span class="comment">#do something</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">==========================第二部分</span><br><span class="line">上述代码不难看出，吃、喝是猫和狗都具有的功能，而我们却分别的猫和狗的类中编写了两次。如果使用 继承 的思想，如下实现：</span><br><span class="line"></span><br><span class="line">　　动物：吃、喝</span><br><span class="line"></span><br><span class="line">　　   猫：爬树（猫继承动物的功能）</span><br><span class="line"></span><br><span class="line">　　   狗：看家（狗继承动物的功能）</span><br><span class="line"></span><br><span class="line">伪代码如下：</span><br><span class="line"><span class="class"><span class="keyword">class</span> 动物:</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> 吃<span class="params">(self)</span>:</span></span><br><span class="line">        <span class="comment"># do something</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> 喝<span class="params">(self)</span>:</span></span><br><span class="line">        <span class="comment"># do something</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 在类后面括号中写入另外一个类名，表示当前类继承另外一个类</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> 猫<span class="params">(动物)</span>：</span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class">    <span class="title">def</span> 爬树<span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">print</span> <span class="string">'喵喵叫'</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 在类后面括号中写入另外一个类名，表示当前类继承另外一个类</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> 狗<span class="params">(动物)</span>：</span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class">    <span class="title">def</span> 看家<span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">print</span> <span class="string">'汪汪叫'</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">==========================第三部分</span><br><span class="line"><span class="comment">#继承的代码实现</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Animal</span>:</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">eat</span><span class="params">(self)</span>:</span></span><br><span class="line">        print(<span class="string">"%s 吃 "</span> %self.name)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">drink</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">print</span> (<span class="string">"%s 喝 "</span> %self.name)</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Cat</span><span class="params">(Animal)</span>:</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, name)</span>:</span></span><br><span class="line">        self.name = name</span><br><span class="line">        self.breed = <span class="string">'猫'</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">climb</span><span class="params">(self)</span>:</span></span><br><span class="line">        print(<span class="string">'爬树'</span>)</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Dog</span><span class="params">(Animal)</span>:</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, name)</span>:</span></span><br><span class="line">        self.name = name</span><br><span class="line">        self.breed=<span class="string">'狗'</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">look_after_house</span><span class="params">(self)</span>:</span></span><br><span class="line">        print(<span class="string">'汪汪叫'</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># ######### 执行 #########</span></span><br><span class="line"></span><br><span class="line">c1 = Cat(<span class="string">'小白家的小黑猫'</span>)</span><br><span class="line">c1.eat()</span><br><span class="line"></span><br><span class="line">c2 = Cat(<span class="string">'小黑的小白猫'</span>)</span><br><span class="line">c2.drink()</span><br><span class="line"></span><br><span class="line">d1 = Dog(<span class="string">'胖子家的小瘦狗'</span>)</span><br><span class="line">d1.eat()</span><br></pre></td></tr></table></figure>

<p>在开发程序的过程中，如果我们定义了一个类A，然后又想新建立另外一个类B，但是类B的大部分内容与类A的相同时</p>
<p>我们不可能从头开始写一个类B，这就用到了类的继承的概念。</p>
<p>通过继承的方式新建类B，让B继承A，B会‘遗传’A的所有属性(数据属性和函数属性)，实现代码重用。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Animal</span>:</span></span><br><span class="line">    <span class="string">'''</span></span><br><span class="line"><span class="string">    人和狗都是动物，所以创造一个Animal基类</span></span><br><span class="line"><span class="string">    '''</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, name, aggressivity, life_value)</span>:</span></span><br><span class="line">        self.name = name  <span class="comment"># 人和狗都有自己的昵称;</span></span><br><span class="line">        self.aggressivity = aggressivity  <span class="comment"># 人和狗都有自己的攻击力;</span></span><br><span class="line">        self.life_value = life_value  <span class="comment"># 人和狗都有自己的生命值;</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">eat</span><span class="params">(self)</span>:</span></span><br><span class="line">        print(<span class="string">'%s is eating'</span>%self.name)</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Dog</span><span class="params">(Animal)</span>:</span></span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span><span class="params">(Animal)</span>:</span></span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line">egg = Person(<span class="string">'egon'</span>,<span class="number">10</span>,<span class="number">1000</span>)</span><br><span class="line">ha2 = Dog(<span class="string">'二愣子'</span>,<span class="number">50</span>,<span class="number">1000</span>)</span><br><span class="line">egg.eat()</span><br><span class="line">ha2.eat()</span><br></pre></td></tr></table></figure>

<p><strong><em>提示：</em></strong></p>
<p>用已经有的类建立一个新的类，这样就重用了已经有的软件中的一部分设置大部分，大大生了编程工作量，这就是常说的软件重用，不仅可以重用自己的类，也可以继承别人的，比如标准库，来定制新的数据类型，这样就是大大缩短了软件开发周期，对大型软件开发来说，意义重大。</p>
<h4 id="4、派生"><a href="#4、派生" class="headerlink" title="4、派生"></a>4、派生</h4><p>当然子类也可以添加自己新的属性或者在自己这里重新定义这些属性（不会影响到父类），需要注意的是，一旦重新定义了自己的属性且与父类重名，那么调用新增的属性时，就以自己为准了。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Animal</span>:</span></span><br><span class="line">    <span class="string">'''</span></span><br><span class="line"><span class="string">    人和狗都是动物，所以创造一个Animal基类</span></span><br><span class="line"><span class="string">    '''</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, name, aggressivity, life_value)</span>:</span></span><br><span class="line">        self.name = name  <span class="comment"># 人和狗都有自己的昵称;</span></span><br><span class="line">        self.aggressivity = aggressivity  <span class="comment"># 人和狗都有自己的攻击力;</span></span><br><span class="line">        self.life_value = life_value  <span class="comment"># 人和狗都有自己的生命值;</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">eat</span><span class="params">(self)</span>:</span></span><br><span class="line">        print(<span class="string">'%s is eating'</span>%self.name)</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Dog</span><span class="params">(Animal)</span>:</span></span><br><span class="line">    <span class="string">'''</span></span><br><span class="line"><span class="string">    狗类，继承Animal类</span></span><br><span class="line"><span class="string">    '''</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">bite</span><span class="params">(self, people)</span>:</span></span><br><span class="line">        <span class="string">'''</span></span><br><span class="line"><span class="string">        派生：狗有咬人的技能</span></span><br><span class="line"><span class="string">        :param people:  </span></span><br><span class="line"><span class="string">        '''</span></span><br><span class="line">        people.life_value -= self.aggressivity</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span><span class="params">(Animal)</span>:</span></span><br><span class="line">    <span class="string">'''</span></span><br><span class="line"><span class="string">    人类，继承Animal</span></span><br><span class="line"><span class="string">    '''</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">attack</span><span class="params">(self, dog)</span>:</span></span><br><span class="line">        <span class="string">'''</span></span><br><span class="line"><span class="string">        派生：人有攻击的技能</span></span><br><span class="line"><span class="string">        :param dog: </span></span><br><span class="line"><span class="string">        '''</span></span><br><span class="line">        dog.life_value -= self.aggressivity</span><br><span class="line"></span><br><span class="line">egg = Person(<span class="string">'egon'</span>,<span class="number">10</span>,<span class="number">1000</span>)</span><br><span class="line">ha2 = Dog(<span class="string">'二愣子'</span>,<span class="number">50</span>,<span class="number">1000</span>)</span><br><span class="line">print(ha2.life_value)</span><br><span class="line">print(egg.attack(ha2))</span><br><span class="line">print(ha2.life_value)</span><br></pre></td></tr></table></figure>

<p><strong><em>注意：</em></strong></p>
<p>像ha2.life_value之类的属性引用，会先从实例中找life_value然后去类中找，然后再去父类中找…直到最顶级的父类。</p>
<p>在子类中，新建的重名的函数属性，在编辑函数内功能的时候，有可能需要重用父类中重名的那个函数功能，应该是用调用普通函数的方式，即：类名.func()，此时就与调用普通函数无异了，因此即便是self参数也要为其传值.</p>
<p>在python3中，子类执行父类的方法也可以直接用super方法。</p>
<p>帮你了解super：(不用传类名和self)</p>
<p>在函数外部引用super时，需要传类名和self。</p>
<p><strong>super关键字只在新式类中存在，而python3中所有的类都是新式类。</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">hahaha</span><span class="params">(self)</span>:</span></span><br><span class="line">        print(<span class="string">'A'</span>)</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">B</span><span class="params">(A)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">hahaha</span><span class="params">(self)</span>:</span></span><br><span class="line">        super().hahaha()</span><br><span class="line">        <span class="comment">#super(B,self).hahaha()</span></span><br><span class="line">        <span class="comment">#A.hahaha(self)</span></span><br><span class="line">        print(<span class="string">'B'</span>)</span><br><span class="line"></span><br><span class="line">a = A()</span><br><span class="line">b = B()</span><br><span class="line">b.hahaha()</span><br><span class="line">super(B,b).hahaha()</span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Animal</span>:</span></span><br><span class="line">    <span class="string">'''</span></span><br><span class="line"><span class="string">    人和狗都是动物，所以创造一个Animal基类</span></span><br><span class="line"><span class="string">    '''</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, name, aggressivity, life_value)</span>:</span></span><br><span class="line">        self.name = name  <span class="comment"># 人和狗都有自己的昵称;</span></span><br><span class="line">        self.aggressivity = aggressivity  <span class="comment"># 人和狗都有自己的攻击力;</span></span><br><span class="line">        self.life_value = life_value  <span class="comment"># 人和狗都有自己的生命值;</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">eat</span><span class="params">(self)</span>:</span></span><br><span class="line">        print(<span class="string">'%s is eating'</span>%self.name)</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Dog</span><span class="params">(Animal)</span>:</span></span><br><span class="line">    <span class="string">'''</span></span><br><span class="line"><span class="string">    狗类，继承Animal类</span></span><br><span class="line"><span class="string">    '''</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self,name,breed,aggressivity,life_value)</span>:</span></span><br><span class="line">        super().__init__(name, aggressivity, life_value) <span class="comment">#执行父类Animal的init方法</span></span><br><span class="line">        self.breed = breed  <span class="comment">#派生出了新的属性</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">bite</span><span class="params">(self, people)</span>:</span></span><br><span class="line">        <span class="string">'''</span></span><br><span class="line"><span class="string">        派生出了新的技能：狗有咬人的技能</span></span><br><span class="line"><span class="string">        :param people:  </span></span><br><span class="line"><span class="string">        '''</span></span><br><span class="line">        people.life_value -= self.aggressivity</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">eat</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="comment"># Animal.eat(self)</span></span><br><span class="line">        <span class="comment">#super().eat()</span></span><br><span class="line">        print(<span class="string">'from Dog'</span>)</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span><span class="params">(Animal)</span>:</span></span><br><span class="line">    <span class="string">'''</span></span><br><span class="line"><span class="string">    人类，继承Animal</span></span><br><span class="line"><span class="string">    '''</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self,name,aggressivity, life_value,money)</span>:</span></span><br><span class="line">        <span class="comment">#Animal.__init__(self, name, aggressivity, life_value)</span></span><br><span class="line">        <span class="comment">#super(Person, self).__init__(name, aggressivity, life_value)</span></span><br><span class="line">        super().__init__(name,aggressivity, life_value)  <span class="comment">#执行父类的init方法</span></span><br><span class="line">        self.money = money   <span class="comment">#派生出了新的属性</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">attack</span><span class="params">(self, dog)</span>:</span></span><br><span class="line">        <span class="string">'''</span></span><br><span class="line"><span class="string">        派生出了新的技能：人有攻击的技能</span></span><br><span class="line"><span class="string">        :param dog: </span></span><br><span class="line"><span class="string">        '''</span></span><br><span class="line">        dog.life_value -= self.aggressivity</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">eat</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="comment">#super().eat()</span></span><br><span class="line">        Animal.eat(self)</span><br><span class="line">        print(<span class="string">'from Person'</span>)</span><br><span class="line"></span><br><span class="line">egg = Person(<span class="string">'egon'</span>,<span class="number">10</span>,<span class="number">1000</span>,<span class="number">600</span>)</span><br><span class="line">ha2 = Dog(<span class="string">'二愣子'</span>,<span class="string">'哈士奇'</span>,<span class="number">10</span>,<span class="number">1000</span>)</span><br><span class="line">print(egg.name)</span><br><span class="line">print(ha2.name)</span><br><span class="line">egg.eat()</span><br></pre></td></tr></table></figure>

<p><strong>通过继承建立了派生类与基类之间的关系，它是一种’是’的关系，比如白马是马，人是动物。</strong></p>
<p><strong>当类之间有很多相同的功能，提取这些共同的功能做成基类，用继承比较好，比如教授是老师</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="class"><span class="keyword">class</span> <span class="title">Teacher</span>:</span></span><br><span class="line"><span class="meta">... </span>    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self,name,gender)</span>:</span></span><br><span class="line"><span class="meta">... </span>        self.name=name</span><br><span class="line"><span class="meta">... </span>        self.gender=gender</span><br><span class="line"><span class="meta">... </span>    <span class="function"><span class="keyword">def</span> <span class="title">teach</span><span class="params">(self)</span>:</span></span><br><span class="line"><span class="meta">... </span>        print(<span class="string">'teaching'</span>)</span><br><span class="line"><span class="meta">... </span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="class"><span class="keyword">class</span> <span class="title">Professor</span><span class="params">(Teacher)</span>:</span></span><br><span class="line"><span class="meta">... </span>    <span class="keyword">pass</span></span><br><span class="line"><span class="meta">... </span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>p1=Professor(<span class="string">'egon'</span>,<span class="string">'male'</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>p1.teach()</span><br><span class="line">teaching</span><br></pre></td></tr></table></figure>

<h4 id="5、抽象类与借口类（不太重要）"><a href="#5、抽象类与借口类（不太重要）" class="headerlink" title="5、抽象类与借口类（不太重要）"></a>5、抽象类与借口类（不太重要）</h4><p>接口类 ： python原生不支持<br>抽象类 ： python原生支持的</p>
<p><strong>（1）接口类</strong></p>
<p>继承有两种用途：</p>
<ol>
<li>继承基类的方法，并且做出自己的改变或者扩展（代码重用）  </li>
<li>声明某个子类兼容于某基类，定义一个接口类Interface，接口类中定义了一些接口名（就是函数名）且并未实现接口的功能，子类继承接口类，并且实现接口中的功能</li>
</ol>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Alipay</span>:</span></span><br><span class="line">    <span class="string">'''</span></span><br><span class="line"><span class="string">    支付宝支付</span></span><br><span class="line"><span class="string">    '''</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">pay</span><span class="params">(self,money)</span>:</span></span><br><span class="line">        print(<span class="string">'支付宝支付了%s元'</span>%money)</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Applepay</span>:</span></span><br><span class="line">    <span class="string">'''</span></span><br><span class="line"><span class="string">    apple pay支付</span></span><br><span class="line"><span class="string">    '''</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">pay</span><span class="params">(self,money)</span>:</span></span><br><span class="line">        print(<span class="string">'apple pay支付了%s元'</span>%money)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">pay</span><span class="params">(payment,money)</span>:</span></span><br><span class="line">    <span class="string">'''</span></span><br><span class="line"><span class="string">    支付函数，总体负责支付</span></span><br><span class="line"><span class="string">    对应支付的对象和要支付的金额</span></span><br><span class="line"><span class="string">    '''</span></span><br><span class="line">    payment.pay(money)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">p = Alipay()</span><br><span class="line">pay(p,<span class="number">200</span>)</span><br></pre></td></tr></table></figure>

<p>开发中容易出现的问题：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Alipay</span>:</span></span><br><span class="line">    <span class="string">'''</span></span><br><span class="line"><span class="string">    支付宝支付</span></span><br><span class="line"><span class="string">    '''</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">pay</span><span class="params">(self,money)</span>:</span></span><br><span class="line">        print(<span class="string">'支付宝支付了%s元'</span>%money)</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Applepay</span>:</span></span><br><span class="line">    <span class="string">'''</span></span><br><span class="line"><span class="string">    apple pay支付</span></span><br><span class="line"><span class="string">    '''</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">pay</span><span class="params">(self,money)</span>:</span></span><br><span class="line">        print(<span class="string">'apple pay支付了%s元'</span>%money)</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Wechatpay</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">fuqian</span><span class="params">(self,money)</span>:</span></span><br><span class="line">        <span class="string">'''</span></span><br><span class="line"><span class="string">        实现了pay的功能，但是名字不一样</span></span><br><span class="line"><span class="string">        '''</span></span><br><span class="line">        print(<span class="string">'微信支付了%s元'</span>%money)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">pay</span><span class="params">(payment,money)</span>:</span></span><br><span class="line">    <span class="string">'''</span></span><br><span class="line"><span class="string">    支付函数，总体负责支付</span></span><br><span class="line"><span class="string">    对应支付的对象和要支付的金额</span></span><br><span class="line"><span class="string">    '''</span></span><br><span class="line">    payment.pay(money)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">p = Wechatpay()</span><br><span class="line">pay(p,<span class="number">200</span>)   <span class="comment">#执行会报错</span></span><br></pre></td></tr></table></figure>

<p>接口初成：手动报异常：NotImplementedError来解决开发中遇到的问题</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Payment</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">pay</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">raise</span> NotImplementedError</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Wechatpay</span><span class="params">(Payment)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">fuqian</span><span class="params">(self,money)</span>:</span></span><br><span class="line">        print(<span class="string">'微信支付了%s元'</span>%money)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">p = Wechatpay()  <span class="comment">#这里不报错 </span></span><br><span class="line">pay(p,<span class="number">200</span>)      <span class="comment">#这里报错了</span></span><br></pre></td></tr></table></figure>

<p>借用abc模块来实现接口</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> abc <span class="keyword">import</span> ABCMeta,abstractmethod</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Payment</span><span class="params">(metaclass=ABCMeta)</span>:</span>	<span class="comment">#元类</span></span><br><span class="line"><span class="meta">    @abstractmethod</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">pay</span><span class="params">(self,money)</span>:</span></span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Wechatpay</span><span class="params">(Payment)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">fuqian</span><span class="params">(self,money)</span>:</span></span><br><span class="line">        print(<span class="string">'微信支付了%s元'</span>%money)</span><br><span class="line"></span><br><span class="line">p = Wechatpay() <span class="comment">#不调就报错了</span></span><br></pre></td></tr></table></figure>

<p>规范 ：接口类或者抽象类都可以<br>接口类 支持多继承，接口类中的所有的方法都必须不能实现 —— java<br>抽象类 不支持多继承，抽象类中方法可以有一些代码的实现 —— java</p>
<p>实践中，继承的第一种含义意义并不很大，甚至常常是有害的。因为它使得子类与基类出现强耦合。</p>
<p>继承的第二种含义非常重要。它又叫“接口继承”。<br>接口继承实质上是要求“做出一个良好的抽象，这个抽象规定了一个兼容接口，使得外部调用者无需关心具体细节，可一视同仁的处理实现了特定接口的所有对象”——这在程序设计上，叫做归一化。</p>
<p>归一化使得高层的外部使用者可以不加区分的处理所有接口兼容的对象集合——就好象linux的泛文件概念一样，所有东西都可以当文件处理，不必关心它是内存、磁盘、网络还是屏幕（当然，对底层设计者，当然也可以区分出“字符设备”和“块设备”，然后做出针对性的设计：细致到什么程度，视需求而定）。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">依赖倒置原则：</span><br><span class="line">高层模块不应该依赖低层模块，二者都应该依赖其抽象；抽象不应该应该依赖细节；细节应该依赖抽象。换言之，要针对接口编程，而不是针对实现编程</span><br></pre></td></tr></table></figure>

<p>在python中根本就没有一个叫做interface的关键字，上面的代码只是看起来像接口，其实并没有起到接口的作用，子类完全可以不用去实现接口 ，如果非要去模仿接口的概念，可以借助第三方模块：</p>
<p><a href="http://pypi.python.org/pypi/zope.interface" target="_blank" rel="noopener">http://pypi.python.org/pypi/zope.interface</a></p>
<p><a href="http://blog.csdn.net/hanhuili/article/details/9389433" target="_blank" rel="noopener">twisted</a>的twisted\internet\interface.py里使用zope.interface</p>
<p>文档<a href="https://zopeinterface.readthedocs.io/en/latest/" target="_blank" rel="noopener">https://zopeinterface.readthedocs.io/en/latest/</a></p>
<p>设计模式：<a href="https://github.com/faif/python-patterns" target="_blank" rel="noopener">https://github.com/faif/python-patterns</a></p>
<p>为何要用接口：</p>
<figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">接口提取了一群类共同的函数，可以把接口当做一个函数的集合。</span><br><span class="line"></span><br><span class="line">然后让子类去实现接口中的函数。</span><br><span class="line"></span><br><span class="line">这么做的意义在于归一化，什么叫归一化，就是只要是基于同一个接口实现的类，那么所有的这些类产生的对象在使用时，从用法上来说都一样。</span><br><span class="line"></span><br><span class="line">归一化，让使用者无需关心对象的类是什么，只需要的知道这些对象都具备某些功能就可以了，这极大地降低了使用者的使用难度。</span><br><span class="line"></span><br><span class="line">比如：我们定义一个动物接口，接口里定义了有跑、吃、呼吸等接口函数，这样老鼠的类去实现了该接口，松鼠的类也去实现了该接口，由二者分别产生一只老鼠和一只松鼠送到你面前，即便是你分别不到底哪只是什么鼠你肯定知道他俩都会跑，都会吃，都能呼吸。</span><br><span class="line"></span><br><span class="line">再比如：我们有一个汽车接口，里面定义了汽车所有的功能，然后由本田汽车的类，奥迪汽车的类，大众汽车的类，他们都实现了汽车接口，这样就好办了，大家只需要学会了怎么开汽车，那么无论是本田，还是奥迪，还是大众我们都会开了，开的时候根本无需关心我开的是哪一类车，操作手法（函数调用）都一样</span><br></pre></td></tr></table></figure>

<p><strong>（2）抽象类</strong></p>
<p><strong>什么是抽象类</strong></p>
<p>​    <em>与java一样，python也有抽象类的概念但是同样需要借助模块实现，*</em>抽象类是一个特殊的类，它的特殊之处在于只能被继承，不能被实例化***</p>
<p><strong>为什么要有抽象类</strong></p>
<p>​    <em>如果说<strong>类是从</strong>一堆<strong>对象</strong>中抽取相同的内容而来的，那么<strong>抽象类</strong>就<strong>是从</strong>一堆<strong>类</strong>中抽取相同的内容而来的，内容包括数据属性和函数属性。</em></p>
<p>　 <em>比如我们有香蕉的类，有苹果的类，有桃子的类，从这些类抽取相同的内容就是水果这个抽象的类，你吃水果时，要么是吃一个具体的香蕉，要么是吃一个具体的桃子。。。。。。你永远无法吃到一个叫做水果的东西。</em></p>
<p>​    <em>从设计角度去看，如果类是从现实对象抽象而来的，那么抽象类就是基于类抽象而来的。</em></p>
<p>　 <em>从实现角度来看，抽象类与普通类的不同之处在于：抽象类中有抽象方法，该类不能被实例化，只能被继承，且子类必须实现抽象方法。这一点与接口有点类似，但其实是不同的，即将揭晓答案</em></p>
<p>在python中实现抽象类：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#一切皆文件</span></span><br><span class="line"><span class="keyword">import</span> abc <span class="comment">#利用abc模块实现抽象类</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">All_file</span><span class="params">(metaclass=abc.ABCMeta)</span>:</span></span><br><span class="line">    all_type=<span class="string">'file'</span></span><br><span class="line"><span class="meta">    @abc.abstractmethod #定义抽象方法，无需实现功能</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">read</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="string">'子类必须定义读功能'</span></span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"><span class="meta">    @abc.abstractmethod #定义抽象方法，无需实现功能</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">write</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="string">'子类必须定义写功能'</span></span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># class Txt(All_file):</span></span><br><span class="line"><span class="comment">#     pass</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># t1=Txt() #报错,子类没有定义抽象方法</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Txt</span><span class="params">(All_file)</span>:</span> <span class="comment">#子类继承抽象类，但是必须定义read和write方法</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">read</span><span class="params">(self)</span>:</span></span><br><span class="line">        print(<span class="string">'文本数据的读取方法'</span>)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">write</span><span class="params">(self)</span>:</span></span><br><span class="line">        print(<span class="string">'文本数据的读取方法'</span>)</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Sata</span><span class="params">(All_file)</span>:</span> <span class="comment">#子类继承抽象类，但是必须定义read和write方法</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">read</span><span class="params">(self)</span>:</span></span><br><span class="line">        print(<span class="string">'硬盘数据的读取方法'</span>)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">write</span><span class="params">(self)</span>:</span></span><br><span class="line">        print(<span class="string">'硬盘数据的读取方法'</span>)</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Process</span><span class="params">(All_file)</span>:</span> <span class="comment">#子类继承抽象类，但是必须定义read和write方法</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">read</span><span class="params">(self)</span>:</span></span><br><span class="line">        print(<span class="string">'进程数据的读取方法'</span>)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">write</span><span class="params">(self)</span>:</span></span><br><span class="line">        print(<span class="string">'进程数据的读取方法'</span>)</span><br><span class="line"></span><br><span class="line">wenbenwenjian=Txt()</span><br><span class="line"></span><br><span class="line">yingpanwenjian=Sata()</span><br><span class="line"></span><br><span class="line">jinchengwenjian=Process()</span><br><span class="line"></span><br><span class="line"><span class="comment">#这样大家都是被归一化了,也就是一切皆文件的思想</span></span><br><span class="line">wenbenwenjian.read()</span><br><span class="line">yingpanwenjian.write()</span><br><span class="line">jinchengwenjian.read()</span><br><span class="line"></span><br><span class="line">print(wenbenwenjian.all_type)</span><br><span class="line">print(yingpanwenjian.all_type)</span><br><span class="line">print(jinchengwenjian.all_type)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 抽象类 ： 规范</span></span><br><span class="line"><span class="comment"># 一般情况下 单继承 能实现的功能都是一样的，所以在父类中可以有一些简单的基础实现</span></span><br><span class="line"><span class="comment"># 多继承的情况 由于功能比较复杂，所以不容易抽象出相同的功能的具体实现写在父类中</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 抽象类还是接口类 ： 面向对象的开发规范 所有的接口类和抽象类都不能实例化</span></span><br><span class="line"><span class="comment"># java ：</span></span><br><span class="line"><span class="comment"># java里的所有类的继承都是单继承,所以抽象类完美的解决了单继承需求中的规范问题</span></span><br><span class="line"><span class="comment"># 但对于多继承的需求，由于java本身语法的不支持，所以创建了接口Interface这个概念来解决多继承的规范问题</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># python</span></span><br><span class="line"><span class="comment"># python中没有接口类  ：</span></span><br><span class="line">  <span class="comment">#  python中自带多继承 所以我们直接用class来实现了接口类</span></span><br><span class="line"><span class="comment"># python中支持抽象类  ： 一般情况下 单继承  不能实例化</span></span><br><span class="line">  <span class="comment">#  且可以实现python代码</span></span><br></pre></td></tr></table></figure>

<p>*<em>（3）抽象类与接口类 *</em></p>
<p><em>抽象类的本质还是类，指的是一组类的相似性，包括数据属性（如all_type）和函数属性（如read、write），而接口只强调函数属性的相似性。</em></p>
<p><strong><em>抽象类是一个介于类和接口直接的一个概念，同时具备类和接口的部分特性，可以用来实现归一化设计</em></strong> </p>
<p>在python中，并没有接口类这种东西，即便不通过专门的模块定义接口，我们也应该有一些基本的概念。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 接口类 抽象类</span></span><br><span class="line"><span class="comment"># python中没有接口类，有抽象类，abc模块中的metaclass = ABCMeta，@abstructmethod</span></span><br><span class="line"><span class="comment"># 本质是做代码规范用的，希望在子类中实现和父类方法名字完全一样的方法</span></span><br><span class="line"><span class="comment"># 在java的角度上看 是有区别的</span></span><br><span class="line">    <span class="comment"># java本来就支持单继承 所以就有了抽象类</span></span><br><span class="line">    <span class="comment"># java没有多继承 所以为了接口隔离原则，设计了接口这个概念，支持多继承了</span></span><br><span class="line"><span class="comment"># python及支持单继承也支持多继承，所以对于接口类和抽象类的区别就不那么明显了</span></span><br><span class="line"><span class="comment"># 甚至在python中没有内置接口类</span></span><br></pre></td></tr></table></figure>

<p><strong>多继承问题：</strong></p>
<p>在继承抽象类的过程中，我们应该尽量避免多继承；<br>而在继承接口的时候，我们反而鼓励你来多继承接口</p>
<figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">接口隔离原则：</span><br><span class="line">使用多个专门的接口，而不使用单一的总接口。即客户端不应该依赖那些不需要的接口。</span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># tiger 走路 游泳</span></span><br><span class="line"><span class="comment"># swan 走路 游泳 飞</span></span><br><span class="line"><span class="comment"># oldying 走路 飞</span></span><br><span class="line"><span class="keyword">from</span> abc <span class="keyword">import</span> abstractmethod,ABCMeta</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Swim_Animal</span><span class="params">(metaclass=ABCMeta)</span>:</span></span><br><span class="line"><span class="meta">    @abstractmethod</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">swim</span><span class="params">(self)</span>:</span><span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Walk_Animal</span><span class="params">(metaclass=ABCMeta)</span>:</span></span><br><span class="line"><span class="meta">    @abstractmethod</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">walk</span><span class="params">(self)</span>:</span><span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Fly_Animal</span><span class="params">(metaclass=ABCMeta)</span>:</span></span><br><span class="line"><span class="meta">    @abstractmethod</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">fly</span><span class="params">(self)</span>:</span><span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Tiger</span><span class="params">(Walk_Animal,Swim_Animal)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">walk</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">swim</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">OldYing</span><span class="params">(Fly_Animal,Walk_Animal)</span>:</span><span class="keyword">pass</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Swan</span><span class="params">(Swim_Animal,Walk_Animal,Fly_Animal)</span>:</span><span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 接口类  刚好满足接口隔离原则 面向对象开发的思想 规范</span></span><br></pre></td></tr></table></figure>

<p><strong>方法的实现：</strong></p>
<p>在抽象类中，我们可以对一些抽象方法做出基础实现；<br>而在接口类中，任何方法都只是一种规范，具体的功能需要子类实现</p>
<h4 id="6、钻石继承（重要）"><a href="#6、钻石继承（重要）" class="headerlink" title="6、钻石继承（重要）"></a>6、钻石继承（重要）</h4><p><strong>（1）继承顺序</strong></p>
<p><img src="https://raw.githubusercontent.com/suliangxu/MyHexoPicture/master/python%E5%85%A8%E6%A0%88/%E7%AC%AC01%E9%83%A8%E5%88%86%EF%BC%9A%E5%9F%BA%E7%A1%80%2B%E6%A8%A1%E5%9D%97%2B%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%2B%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B/%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1/3.png" alt></p>
<p>继承顺序：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span><span class="params">(object)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">test</span><span class="params">(self)</span>:</span></span><br><span class="line">        print(<span class="string">'from A'</span>)</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">B</span><span class="params">(A)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">test</span><span class="params">(self)</span>:</span></span><br><span class="line">        print(<span class="string">'from B'</span>)</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">C</span><span class="params">(A)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">test</span><span class="params">(self)</span>:</span></span><br><span class="line">        print(<span class="string">'from C'</span>)</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">D</span><span class="params">(B)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">test</span><span class="params">(self)</span>:</span></span><br><span class="line">        print(<span class="string">'from D'</span>)</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">E</span><span class="params">(C)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">test</span><span class="params">(self)</span>:</span></span><br><span class="line">        print(<span class="string">'from E'</span>)</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">F</span><span class="params">(D,E)</span>:</span></span><br><span class="line">    <span class="comment"># def test(self):</span></span><br><span class="line">    <span class="comment">#     print('from F')</span></span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line">f1=F()</span><br><span class="line">f1.test()</span><br><span class="line">print(F.__mro__) <span class="comment">#只有新式才有这个属性可以查看线性列表，经典类没有这个属性</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#新式类继承顺序:F-&gt;D-&gt;B-&gt;E-&gt;C-&gt;A	广度优先</span></span><br><span class="line"><span class="comment">#经典类继承顺序:F-&gt;D-&gt;B-&gt;A-&gt;E-&gt;C	深度优先</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 单继承 ： 子类有的用子类 子类没有用父类</span></span><br><span class="line"><span class="comment"># 多继承中，我们子类的对象调用一个方法，默认是就近原则，找的顺序是什么？</span></span><br><span class="line"><span class="comment"># 经典类中 深度优先</span></span><br><span class="line"><span class="comment"># 新式类中 广度优先</span></span><br><span class="line"><span class="comment"># python2.7 新式类和经典类共存，新式类要继承object</span></span><br><span class="line"><span class="comment"># python3   只有新式类，默认继承object</span></span><br><span class="line"><span class="comment"># 经典类和新式类还有一个区别  mro方法只在新式类中存在</span></span><br></pre></td></tr></table></figure>

<p>super 只在python3中存在</p>
<p>super的本质 ：不是单纯找父类 而是根据调用者的节点位置的广度优先顺序来的</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span><span class="params">(object)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">func</span><span class="params">(self)</span>:</span> print(<span class="string">'A'</span>)</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">B</span><span class="params">(A)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">func</span><span class="params">(self)</span>:</span></span><br><span class="line">        super().func()</span><br><span class="line">        print(<span class="string">'B'</span>)</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">C</span><span class="params">(A)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">func</span><span class="params">(self)</span>:</span></span><br><span class="line">        super().func()</span><br><span class="line">        print(<span class="string">'C'</span>)</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">D</span><span class="params">(B,C)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">func</span><span class="params">(self)</span>:</span></span><br><span class="line">        super().func()</span><br><span class="line">        print(<span class="string">'D'</span>)</span><br><span class="line"></span><br><span class="line">b = D()</span><br><span class="line">b.func()	<span class="comment"># A C B D</span></span><br><span class="line"><span class="comment"># D 的super是 B</span></span><br><span class="line"><span class="comment"># B 的super是 C   super不是单纯的找父类，而是进行上一层级</span></span><br></pre></td></tr></table></figure>

<p><strong>（2）继承原理</strong></p>
<p>python到底是如何实现继承的，对于你定义的每一个类，python会计算出一个方法解析顺序(MRO)列表，这个MRO列表就是一个简单的所有基类的线性顺序列表，例如：</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>F.mro() <span class="comment">#等同于F.__mro__</span></span><br><span class="line">[&lt;class '__main__.F'&gt;, &lt;class '__main__.D'&gt;, &lt;class '__main__.B'&gt;, &lt;class '__main__.E'&gt;, &lt;class '__main__.C'&gt;, &lt;class '__main__.A'&gt;, &lt;class 'object'&gt;]</span><br></pre></td></tr></table></figure>

<p>为了实现继承,python会在MRO列表上从左到右开始查找基类,直到找到第一个匹配这个属性的类为止。<br>而这个MRO列表的构造是通过一个C3线性化算法来实现的。我们不去深究这个算法的数学原理,它实际上就是合并所有父类的MRO列表并遵循如下三条准则:<br>1.子类会先于父类被检查<br>2.多个父类会根据它们在列表中的顺序被检查<br>3.如果对下一个类存在两个合法的选择,选择第一个父类</p>
<h4 id="7、继承小结"><a href="#7、继承小结" class="headerlink" title="7、继承小结"></a>7、继承小结</h4><p><strong>（1）继承的作用</strong></p>
<figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">减少代码的重用</span><br><span class="line">提高代码可读性</span><br><span class="line">规范编程模式</span><br></pre></td></tr></table></figure>

<p><strong>（2）几个名词</strong></p>
<figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">抽象：抽象即抽取类似或者说比较像的部分。是一个从具题到抽象的过程。</span><br><span class="line">继承：子类继承了父类的方法和属性</span><br><span class="line">派生：子类在父类方法和属性的基础上产生了新的方法和属性</span><br></pre></td></tr></table></figure>

<p><strong>（3）抽象类与借口类</strong></p>
<figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">1.多继承问题</span><br><span class="line">在继承抽象类的过程中，我们应该尽量避免多继承；</span><br><span class="line">而在继承接口的时候，我们反而鼓励你来多继承接口</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">2.方法的实现</span><br><span class="line">在抽象类中，我们可以对一些抽象方法做出基础实现；</span><br><span class="line">而在接口类中，任何方法都只是一种规范，具体的功能需要子类实现</span><br></pre></td></tr></table></figure>

<p><strong>（4）钻石继承</strong></p>
<figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">新式类：广度优先</span><br><span class="line">经典类：深度优先</span><br></pre></td></tr></table></figure>

<h3 id="二、多态"><a href="#二、多态" class="headerlink" title="二、多态"></a>二、多态</h3><h4 id="1、多态"><a href="#1、多态" class="headerlink" title="1、多态"></a>1、多态</h4><p>多态指的是一类事物有多种形态</p>
<p>动物有多种形态：人，狗，猪</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> abc</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Animal</span><span class="params">(metaclass=abc.ABCMeta)</span>:</span> <span class="comment">#同一类事物:动物</span></span><br><span class="line"><span class="meta">    @abc.abstractmethod</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">talk</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">People</span><span class="params">(Animal)</span>:</span> <span class="comment">#动物的形态之一:人</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">talk</span><span class="params">(self)</span>:</span></span><br><span class="line">        print(<span class="string">'say hello'</span>)</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Dog</span><span class="params">(Animal)</span>:</span> <span class="comment">#动物的形态之二:狗</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">talk</span><span class="params">(self)</span>:</span></span><br><span class="line">        print(<span class="string">'say wangwang'</span>)</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Pig</span><span class="params">(Animal)</span>:</span> <span class="comment">#动物的形态之三:猪</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">talk</span><span class="params">(self)</span>:</span></span><br><span class="line">        print(<span class="string">'say aoao'</span>)</span><br></pre></td></tr></table></figure>

<p>文件有多种形态：文本文件，可执行文件.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> abc</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">File</span><span class="params">(metaclass=abc.ABCMeta)</span>:</span> <span class="comment">#同一类事物:文件</span></span><br><span class="line"><span class="meta">    @abc.abstractmethod</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">click</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Text</span><span class="params">(File)</span>:</span> <span class="comment">#文件的形态之一:文本文件</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">click</span><span class="params">(self)</span>:</span></span><br><span class="line">        print(<span class="string">'open file'</span>)</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ExeFile</span><span class="params">(File)</span>:</span> <span class="comment">#文件的形态之二:可执行文件</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">click</span><span class="params">(self)</span>:</span></span><br><span class="line">        print(<span class="string">'execute file'</span>)</span><br></pre></td></tr></table></figure>

<h4 id="2、多态性"><a href="#2、多态性" class="headerlink" title="2、多态性"></a>2、多态性</h4><p><strong>什么是多态动态绑定（在继承的背景下使用时，有时也称为多态性）</strong></p>
<p><strong>多态性是指在不考虑实例类型的情况下使用实例</strong></p>
<figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">在面向对象方法中一般是这样表述多态性：</span><br><span class="line">向不同的对象发送同一条消息（！！！obj.func():是调用了obj的方法func，又称为向obj发送了一条消息func），不同的对象在接收时会产生不同的行为（即方法）。</span><br><span class="line">也就是说，每个对象可以用自己的方式去响应共同的消息。所谓消息，就是调用函数，不同的行为就是指不同的实现，即执行不同的函数。</span><br><span class="line"></span><br><span class="line">比如：老师.下课铃响了（），学生.下课铃响了()，老师执行的是下班操作，学生执行的是放学操作，虽然二者消息一样，但是执行的效果不同</span><br></pre></td></tr></table></figure>

<p><strong>多态性</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">peo=People()</span><br><span class="line">dog=Dog()</span><br><span class="line">pig=Pig()</span><br><span class="line"></span><br><span class="line"><span class="comment">#peo、dog、pig都是动物,只要是动物肯定有talk方法</span></span><br><span class="line"><span class="comment">#于是我们可以不用考虑它们三者的具体是什么类型,而直接使用</span></span><br><span class="line">peo.talk()</span><br><span class="line">dog.talk()</span><br><span class="line">pig.talk()</span><br><span class="line"></span><br><span class="line"><span class="comment">#更进一步,我们可以定义一个统一的接口来使用</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">func</span><span class="params">(obj)</span>:</span></span><br><span class="line">    obj.talk()</span><br></pre></td></tr></table></figure>

<p><strong>鸭子类型</strong></p>
<p>逗比时刻：</p>
<p>　　Python崇尚鸭子类型，即‘如果看起来像、叫声像而且走起路来像鸭子，那么它就是鸭子’</p>
<p>python程序员通常根据这种行为来编写程序。例如，如果想编写现有对象的自定义版本，可以继承该对象</p>
<p>也可以创建一个外观和行为像，但与它无任何关系的全新对象，后者通常用于保存程序组件的松耦合度。</p>
<p>例1：利用标准库中定义的各种‘与文件类似’的对象，尽管这些对象的工作方式像文件，但他们没有继承内置文件对象的方法</p>
<p>例2：序列类型有多种形态：字符串，列表，元组，但他们直接没有直接的继承关系</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#二者都像鸭子,二者看起来都像文件,因而就可以当文件一样去用</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">TxtFile</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">read</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">write</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">DiskFile</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">read</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">write</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">pass</span></span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 鸭子类型</span></span><br><span class="line"><span class="comment"># list tuple</span></span><br><span class="line"><span class="comment"># 不崇尚根据继承所得来的相似</span></span><br><span class="line"><span class="comment"># 我只是自己实现我自己的代码就可以了。</span></span><br><span class="line"><span class="comment"># 如果两个类刚好相似，并不产生父类的子类的兄弟关系，而是鸭子类型</span></span><br><span class="line"><span class="comment"># list tuple 这种相似，是自己写代码的时候约束的，而不是通过父类约束的</span></span><br><span class="line"><span class="comment"># 优点 ： 松耦合 每个相似的类之间都没有影响</span></span><br><span class="line"><span class="comment"># 缺点 ： 太随意了,只能靠自觉</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">List</span><span class="params">()</span>:</span></span><br><span class="line">     <span class="function"><span class="keyword">def</span> <span class="title">__len__</span><span class="params">(self)</span>:</span></span><br><span class="line">     		<span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Tuple</span><span class="params">()</span>:</span></span><br><span class="line">		 <span class="function"><span class="keyword">def</span> <span class="title">__len__</span><span class="params">(self)</span>:</span></span><br><span class="line">		 		<span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">len</span><span class="params">(obj)</span>:</span></span><br><span class="line">    <span class="keyword">return</span> obj.__len__()</span><br><span class="line"></span><br><span class="line">l = Tuple()</span><br><span class="line">len(l)</span><br><span class="line"></span><br><span class="line"><span class="comment"># # 强类型语言     多态</span></span><br><span class="line"><span class="comment"># # python 语言    鸭子类型</span></span><br></pre></td></tr></table></figure>

<h3 id="三、封装"><a href="#三、封装" class="headerlink" title="三、封装"></a>三、封装</h3><p><strong>【封装】</strong></p>
<p>​         隐藏对象的属性和实现细节，仅对外提供公共访问方式。</p>
<p><strong>【好处】</strong> </p>
<ol>
<li><p>将变化隔离； </p>
</li>
<li><p>便于使用；</p>
</li>
<li><p>提高复用性； </p>
</li>
<li><p>提高安全性；</p>
</li>
</ol>
<p><strong>【封装原则】</strong></p>
<ol>
<li><p>将不需要对外提供的内容都隐藏起来；</p>
</li>
<li><p>把属性都隐藏，提供公共方法对其访问。</p>
</li>
</ol>
<h4 id="1、私有变量和私有方法"><a href="#1、私有变量和私有方法" class="headerlink" title="1、私有变量和私有方法"></a>1、私有变量和私有方法</h4><p><strong><em>在python中用双下划线开头的方式将属性隐藏起来（设置成私有的）</em></strong></p>
<p><strong>（1）私有变量</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#其实这仅仅这是一种变形操作</span></span><br><span class="line"><span class="comment">#类中所有双下划线开头的名称如__x都会自动变形成：_类名__x的形式：</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span>:</span></span><br><span class="line">    __N=<span class="number">0</span> <span class="comment">#类的数据属性就应该是共享的,但是语法上是可以把类的数据属性设置成私有的如__N,会变形为_A__N</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">        self.__X=<span class="number">10</span> <span class="comment">#变形为self._A__X</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__foo</span><span class="params">(self)</span>:</span> <span class="comment">#变形为_A__foo</span></span><br><span class="line">        print(<span class="string">'from A'</span>)</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">bar</span><span class="params">(self)</span>:</span></span><br><span class="line">        self.__foo() <span class="comment">#只有在类内部才可以通过__foo的形式访问到.</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#A._A__N是可以访问到的，即这种操作并不是严格意义上的限制外部访问，仅仅只是一种语法意义上的变形</span></span><br></pre></td></tr></table></figure>

<p><strong>这种自动变形的特点：</strong></p>
<p><strong>1.类中定义的</strong> <strong>x只能在内部使用，如self.__x，引用的就是变形的结果。</strong></p>
<p><strong>2.这种变形其实正是针对外部的变形，在外部是无法通过__x这个名字访问到的。</strong></p>
<p><strong>3.在子类定义的<strong>x不会覆盖在父类定义的</strong>x，因为子类中变形成了：_子类名<strong>x,而父类中变形成了：_父类名</strong>x，即双下滑线开头的属性在继承给子类时，子类是无法覆盖的。另外，父类的私有属性不能被子类调用。</strong></p>
<p>这种变形需要注意的问题是：</p>
<p><strong><em>1.这种机制也并没有真正意义上限制我们从外部直接访问属性，知道了类名和属性名就可以拼出名字：_类名<strong>属性，然后就可以访问了，如a._A</strong>N</em></strong></p>
<p><strong><em>2.变形的过程只在类的内部生效,在定义后的赋值操作，不会变形</em></strong></p>
<p><img src="https://raw.githubusercontent.com/suliangxu/MyHexoPicture/master/python%E5%85%A8%E6%A0%88/%E7%AC%AC01%E9%83%A8%E5%88%86%EF%BC%9A%E5%9F%BA%E7%A1%80%2B%E6%A8%A1%E5%9D%97%2B%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%2B%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B/%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1/4.png" alt></p>
<p><strong>（2）私有方法</strong></p>
<p><strong><em>在继承中，父类如果不想让子类覆盖自己的方法，可以将方法定义为私有的</em></strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#正常情况</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="class"><span class="keyword">class</span> <span class="title">A</span>:</span></span><br><span class="line"><span class="meta">... </span>    <span class="function"><span class="keyword">def</span> <span class="title">fa</span><span class="params">(self)</span>:</span></span><br><span class="line"><span class="meta">... </span>        print(<span class="string">'from A'</span>)</span><br><span class="line"><span class="meta">... </span>    <span class="function"><span class="keyword">def</span> <span class="title">test</span><span class="params">(self)</span>:</span></span><br><span class="line"><span class="meta">... </span>        self.fa()</span><br><span class="line"><span class="meta">... </span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="class"><span class="keyword">class</span> <span class="title">B</span><span class="params">(A)</span>:</span></span><br><span class="line"><span class="meta">... </span>    <span class="function"><span class="keyword">def</span> <span class="title">fa</span><span class="params">(self)</span>:</span></span><br><span class="line"><span class="meta">... </span>        print(<span class="string">'from B'</span>)</span><br><span class="line"><span class="meta">... </span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b=B()</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b.test()</span><br><span class="line"><span class="keyword">from</span> B</span><br><span class="line"> </span><br><span class="line"></span><br><span class="line"><span class="comment">#把fa定义成私有的，即__fa</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="class"><span class="keyword">class</span> <span class="title">A</span>:</span></span><br><span class="line"><span class="meta">... </span>    <span class="function"><span class="keyword">def</span> <span class="title">__fa</span><span class="params">(self)</span>:</span> <span class="comment">#在定义时就变形为_A__fa</span></span><br><span class="line"><span class="meta">... </span>        print(<span class="string">'from A'</span>)</span><br><span class="line"><span class="meta">... </span>    <span class="function"><span class="keyword">def</span> <span class="title">test</span><span class="params">(self)</span>:</span></span><br><span class="line"><span class="meta">... </span>        self.__fa() <span class="comment">#只会与自己所在的类为准,即调用_A__fa</span></span><br><span class="line"><span class="meta">... </span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="class"><span class="keyword">class</span> <span class="title">B</span><span class="params">(A)</span>:</span></span><br><span class="line"><span class="meta">... </span>    <span class="function"><span class="keyword">def</span> <span class="title">__fa</span><span class="params">(self)</span>:</span></span><br><span class="line"><span class="meta">... </span>        print(<span class="string">'from B'</span>)</span><br><span class="line"><span class="meta">... </span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b=B()</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b.test()</span><br><span class="line"><span class="keyword">from</span> A</span><br></pre></td></tr></table></figure>

<figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">会用到私有的这个概念de场景</span><br><span class="line">1.隐藏起一个属性 不想让类的外部调用</span><br><span class="line">2.我想保护这个属性，不想让属性随意被改变</span><br><span class="line">3.我想保护这个属性，不被子类继承</span><br></pre></td></tr></table></figure>

<h4 id="2、封装与扩展性"><a href="#2、封装与扩展性" class="headerlink" title="2、封装与扩展性"></a>2、封装与扩展性</h4><p><em>封装在于明确区分内外，使得类实现者可以修改封装内的东西而不影响外部调用者的代码；而外部使用用者只知道一个接口(函数)，只要接口（函数）名、参数不变，使用者的代码永远无需改变。这就提供一个良好的合作基础——或者说，只要接口这个基础约定不变，则代码改变不足为虑。</em></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#类的设计者</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Room</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self,name,owner,width,length,high)</span>:</span></span><br><span class="line">        self.name=name</span><br><span class="line">        self.owner=owner</span><br><span class="line">        self.__width=width</span><br><span class="line">        self.__length=length</span><br><span class="line">        self.__high=high</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">tell_area</span><span class="params">(self)</span>:</span> <span class="comment">#对外提供的接口，隐藏了内部的实现细节，此时我们想求的是面积</span></span><br><span class="line">        <span class="keyword">return</span> self.__width * self.__length</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#使用者</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>r1=Room(<span class="string">'卧室'</span>,<span class="string">'egon'</span>,<span class="number">20</span>,<span class="number">20</span>,<span class="number">20</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>r1.tell_area() <span class="comment">#使用者调用接口tell_area</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#类的设计者，轻松的扩展了功能，而类的使用者完全不需要改变自己的代码</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Room</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self,name,owner,width,length,high)</span>:</span></span><br><span class="line">        self.name=name</span><br><span class="line">        self.owner=owner</span><br><span class="line">        self.__width=width</span><br><span class="line">        self.__length=length</span><br><span class="line">        self.__high=high</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">tell_area</span><span class="params">(self)</span>:</span> <span class="comment">#对外提供的接口，隐藏内部实现，此时我们想求的是体积,内部逻辑变了,只需求修该下列一行就可以很简答的实现,而且外部调用感知不到,仍然使用该方法，但是功能已经变了</span></span><br><span class="line">        <span class="keyword">return</span> self.__width * self.__length * self.__high</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#对于仍然在使用tell_area接口的人来说，根本无需改动自己的代码，就可以用上新功能</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>r1.tell_area()</span><br></pre></td></tr></table></figure>

<h4 id="3、property属性"><a href="#3、property属性" class="headerlink" title="3、property属性"></a>3、property属性</h4><p><strong>什么是特性property</strong></p>
<p><em>property是一种特殊的属性，一种内置装饰器函数，只在面向对象中使用，访问它时会执行一段功能（函数）然后返回值</em></p>
<p>例一：</p>
<figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">例一：BMI指数（bmi是计算而来的，但很明显它听起来像是一个属性而非方法，如果我们将其做成一个属性，更便于理解）</span><br><span class="line"></span><br><span class="line">成人的BMI数值：</span><br><span class="line">过轻：低于18.5</span><br><span class="line">正常：18.5-23.9</span><br><span class="line">过重：24-27</span><br><span class="line">肥胖：28-32</span><br><span class="line">非常肥胖, 高于32</span><br><span class="line">　　体质指数（BMI）=体重（kg）÷身高^2（m）</span><br><span class="line">　　EX：70kg÷（1.75×1.75）=22.86</span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">People</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self,name,weight,height)</span>:</span></span><br><span class="line">        self.name=name</span><br><span class="line">        self.weight=weight</span><br><span class="line">        self.height=height</span><br><span class="line"><span class="meta">    @property</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">bmi</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> self.weight / (self.height**<span class="number">2</span>)</span><br><span class="line"></span><br><span class="line">p1=People(<span class="string">'egon'</span>,<span class="number">75</span>,<span class="number">1.85</span>)</span><br><span class="line">print(p1.bmi)</span><br></pre></td></tr></table></figure>

<p>例二：圆的周长和面积</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> math</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Circle</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self,radius)</span>:</span> <span class="comment">#圆的半径radius</span></span><br><span class="line">        self.radius=radius</span><br><span class="line"></span><br><span class="line"><span class="meta">    @property</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">area</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> math.pi * self.radius**<span class="number">2</span> <span class="comment">#计算面积</span></span><br><span class="line"></span><br><span class="line"><span class="meta">    @property</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">perimeter</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> <span class="number">2</span>*math.pi*self.radius <span class="comment">#计算周长</span></span><br><span class="line"></span><br><span class="line">c=Circle(<span class="number">10</span>)</span><br><span class="line">print(c.radius)</span><br><span class="line">print(c.area) <span class="comment">#可以向访问数据属性一样去访问area,会触发一个函数的执行,动态计算出一个值</span></span><br><span class="line">print(c.perimeter) <span class="comment">#同上</span></span><br><span class="line"></span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="string">输出结果:</span></span><br><span class="line"><span class="string">314.1592653589793</span></span><br><span class="line"><span class="string">62.83185307179586</span></span><br><span class="line"><span class="string">'''</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#注意：此时的特性area和perimeter不能被赋值</span></span><br><span class="line">c.area=<span class="number">3</span> <span class="comment">#为特性area赋值</span></span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="string">抛出异常:</span></span><br><span class="line"><span class="string">AttributeError: can't set attribute</span></span><br><span class="line"><span class="string">'''</span></span><br></pre></td></tr></table></figure>

<p><strong>为什么要用property</strong></p>
<p>将一个类的函数定义成特性以后，对象再去使用的时候obj.name,根本无法察觉自己的name是执行了一个函数然后计算出来的，这种特性的使用方式<strong>遵循了统一访问的原则</strong></p>
<p>除此之外，看下</p>
<figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">ps：面向对象的封装有三种方式:</span><br><span class="line">【public】</span><br><span class="line">这种其实就是不封装,是对外公开的</span><br><span class="line">【protected】</span><br><span class="line">这种封装方式对外不公开,但对朋友(friend)或者子类(形象的说法是“儿子”,但我不知道为什么大家 不说“女儿”,就像“parent”本来是“父母”的意思,但中文都是叫“父类”)公开</span><br><span class="line">【private】</span><br><span class="line">这种封装对谁都不公开</span><br></pre></td></tr></table></figure>

<p>python并没有在语法上把它们三个内建到自己的class机制中，在C++里一般会将所有的所有的数据都设置为私有的，然后提供set和get方法（接口）去设置和获取，在python中通过property方法可以实现</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Foo</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self,val)</span>:</span></span><br><span class="line">        self.__NAME=val <span class="comment">#将所有的数据属性都隐藏起来</span></span><br><span class="line"></span><br><span class="line"><span class="meta">    @property</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">name</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> self.__NAME <span class="comment">#obj.name访问的是self.__NAME(这也是真实值的存放位置)</span></span><br><span class="line"></span><br><span class="line"><span class="meta">    @name.setter</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">name</span><span class="params">(self,value)</span>:</span></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> isinstance(value,str):  <span class="comment">#在设定值之前进行类型检查</span></span><br><span class="line">            <span class="keyword">raise</span> TypeError(<span class="string">'%s must be str'</span> %value)</span><br><span class="line">        self.__NAME=value <span class="comment">#通过类型检查后,将值value存放到真实的位置self.__NAME</span></span><br><span class="line"></span><br><span class="line"><span class="meta">    @name.deleter</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">name</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">raise</span> TypeError(<span class="string">'Can not delete'</span>)</span><br><span class="line"></span><br><span class="line">f=Foo(<span class="string">'egon'</span>)</span><br><span class="line">print(f.name)</span><br><span class="line"><span class="comment"># f.name=10 #抛出异常'TypeError: 10 must be str'</span></span><br><span class="line"><span class="keyword">del</span> f.name <span class="comment">#抛出异常'TypeError: Can not delete'</span></span><br></pre></td></tr></table></figure>

<p>一个静态属性property本质就是实现了get，set，delete三种方法</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Foo</span>:</span></span><br><span class="line"><span class="meta">    @property</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">AAA</span><span class="params">(self)</span>:</span></span><br><span class="line">        print(<span class="string">'get的时候运行我啊'</span>)</span><br><span class="line"></span><br><span class="line"><span class="meta">    @AAA.setter</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">AAA</span><span class="params">(self,value)</span>:</span></span><br><span class="line">        print(<span class="string">'set的时候运行我啊'</span>)</span><br><span class="line"></span><br><span class="line"><span class="meta">    @AAA.deleter</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">AAA</span><span class="params">(self)</span>:</span></span><br><span class="line">        print(<span class="string">'delete的时候运行我啊'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">#只有在属性AAA定义property后才能定义AAA.setter,AAA.deleter</span></span><br><span class="line">f1=Foo()</span><br><span class="line">f1.AAA</span><br><span class="line">f1.AAA=<span class="string">'aaa'</span></span><br><span class="line"><span class="keyword">del</span> f1.AAA</span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Goods</span>:</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="comment"># 原价</span></span><br><span class="line">        self.original_price = <span class="number">100</span></span><br><span class="line">        <span class="comment"># 折扣</span></span><br><span class="line">        self.discount = <span class="number">0.8</span></span><br><span class="line"></span><br><span class="line"><span class="meta">    @property</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">price</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="comment"># 实际价格 = 原价 * 折扣</span></span><br><span class="line">        new_price = self.original_price * self.discount</span><br><span class="line">        <span class="keyword">return</span> new_price</span><br><span class="line"></span><br><span class="line"><span class="meta">    @price.setter</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">price</span><span class="params">(self, value)</span>:</span></span><br><span class="line">        self.original_price = value</span><br><span class="line"></span><br><span class="line"><span class="meta">    @price.deleter</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">price</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">del</span> self.original_price</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">obj = Goods()</span><br><span class="line">obj.price         <span class="comment"># 获取商品价格</span></span><br><span class="line">obj.price = <span class="number">200</span>   <span class="comment"># 修改商品原价</span></span><br><span class="line">print(obj.price)</span><br><span class="line"><span class="keyword">del</span> obj.price     <span class="comment"># 删除商品原价</span></span><br></pre></td></tr></table></figure>

<h4 id="4、classmethod"><a href="#4、classmethod" class="headerlink" title="4、classmethod"></a>4、classmethod</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Goods</span>:</span></span><br><span class="line">    __discount = <span class="number">0.8</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self,name,price)</span>:</span></span><br><span class="line">        self.name = name</span><br><span class="line">        self.__price = price</span><br><span class="line"><span class="meta">    @property</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">price</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> self.__price * Goods.__discount</span><br><span class="line"><span class="meta">    @classmethod   # 把一个方法 变成一个类中的方法，这个方法就直接可以被类调用，不需要依托任何对象</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">change_discount</span><span class="params">(cls,new_discount)</span>:</span>  <span class="comment"># 修改折扣，cls默认参数，指代这个类</span></span><br><span class="line">        cls.__discount = new_discount</span><br><span class="line">apple = Goods(<span class="string">'苹果'</span>,<span class="number">5</span>)</span><br><span class="line">print(apple.price)	<span class="comment"># 4.0</span></span><br><span class="line">Goods.change_discount(<span class="number">0.5</span>)  </span><br><span class="line">print(apple.price)	<span class="comment"># 2.5</span></span><br><span class="line"><span class="comment"># 当这个方法的操作只涉及静态属性的时候 就应该使用classmethod来装饰这个方法</span></span><br></pre></td></tr></table></figure>

<h4 id="5、staticmethod"><a href="#5、staticmethod" class="headerlink" title="5、staticmethod"></a>5、staticmethod</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Login</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self,name,password)</span>:</span></span><br><span class="line">        self.name = name</span><br><span class="line">        self.pwd = password</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">login</span><span class="params">(self)</span>:</span><span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"><span class="meta">    @staticmethod</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">get_usr_pwd</span><span class="params">()</span>:</span>   <span class="comment"># 静态方法</span></span><br><span class="line">        usr = input(<span class="string">'用户名 ：'</span>)</span><br><span class="line">        pwd = input(<span class="string">'密码 ：'</span>)</span><br><span class="line">        Login(usr,pwd)</span><br><span class="line"></span><br><span class="line">Login.get_usr_pwd()</span><br><span class="line"><span class="comment"># 在完全面向对象的程序中，</span></span><br><span class="line"><span class="comment"># 如果一个函数 既和对象没有关系 也和类没有关系 那么就用staticmethod将这个函数变成一个静态方法</span></span><br></pre></td></tr></table></figure>

<p>类方法和静态方法 都是类调用的<br>对象可以调用类方法和静态方法么？   可以   一般情况下 推荐用类名调用<br>类方法 有一个默认参数 cls 代表这个类  cls<br>静态方法 没有默认的参数 就象函数一样</p>
<h2 id="（四）面向对象的更多说明"><a href="#（四）面向对象的更多说明" class="headerlink" title="（四）面向对象的更多说明"></a>（四）面向对象的更多说明</h2><h3 id="一、面向对象的软件开发"><a href="#一、面向对象的软件开发" class="headerlink" title="一、面向对象的软件开发"></a>一、面向对象的软件开发</h3><p>很多人在学完了python的class机制之后，遇到一个生产中的问题，还是会懵逼，这其实太正常了，因为任何程序的开发都是先设计后编程，python的class机制只不过是一种编程方式，如果你硬要拿着class去和你的问题死磕，变得更加懵逼都是分分钟的事，在以前，软件的开发相对简单，从任务的分析到编写程序，再到程序的调试，可以由一个人或一个小组去完成。但是随着软件规模的迅速增大，软件任意面临的问题十分复杂，需要考虑的因素太多，在一个软件中所产生的错误和隐藏的错误、未知的错误可能达到惊人的程度，这也不是在设计阶段就完全解决的。</p>
<p>​    所以软件的开发其实一整套规范，我们所学的只是其中的一小部分，一个完整的开发过程，需要明确每个阶段的任务，在保证一个阶段正确的前提下再进行下一个阶段的工作，称之为软件工程</p>
<p>​    面向对象的软件工程包括下面几个部：</p>
<p><strong>1.面向对象分析（object oriented analysis ，OOA）</strong></p>
<p>​    软件工程中的系统分析阶段，要求分析员和用户结合在一起，对用户的需求做出精确的分析和明确的表述，从大的方面解析软件系统应该做什么，而不是怎么去做。面向对象的分析要按照面向对象的概念和方法，在对任务的分析中，从客观存在的事物和事物之间的关系，贵南出有关的对象（对象的‘特征’和‘技能’）以及对象之间的联系，并将具有相同属性和行为的对象用一个类class来标识。</p>
<p>​    建立一个能反映这是工作情况的需求模型，此时的模型是粗略的。</p>
<p><strong>2 面向对象设计（object oriented design，OOD）</strong></p>
<p>​    根据面向对象分析阶段形成的需求模型，对每一部分分别进行具体的设计。</p>
<p>​    首先是类的设计，类的设计可能包含多个层次（利用继承与派生机制）。然后以这些类为基础提出程序设计的思路和方法，包括对算法的设计。</p>
<p>​    在设计阶段并不牵涉任何一门具体的计算机语言，而是用一种更通用的描述工具（如伪代码或流程图）来描述</p>
<p><strong>3 面向对象编程（object oriented programming，OOP）</strong></p>
<p>​    根据面向对象设计的结果，选择一种计算机语言把它写成程序，可以是python</p>
<p><strong>4 面向对象测试（object oriented test，OOT）</strong></p>
<p>​    在写好程序后交给用户使用前，必须对程序进行严格的测试，测试的目的是发现程序中的错误并修正它。</p>
<p>​    面向对的测试是用面向对象的方法进行测试，以类作为测试的基本单元。</p>
<p><strong>5 面向对象维护（object oriendted soft maintenance，OOSM）</strong></p>
<p>​    正如对任何产品都需要进行售后服务和维护一样，软件在使用时也会出现一些问题，或者软件商想改进软件的性能，这就需要修改程序。</p>
<p>​    由于使用了面向对象的方法开发程序，使用程序的维护比较容易。</p>
<p>​    因为对象的封装性，修改一个对象对其他的对象影响很小，利用面向对象的方法维护程序，大大提高了软件维护的效率，可扩展性高。</p>
<p>​    在面向对象方法中，最早发展的肯定是面向对象编程(OOP),那时OOA和OOD都还没有发展起来，因此程序设计者为了写出面向对象的程序，还必须深入到分析和设计领域，尤其是设计领域，那时的OOP实际上包含了现在的OOD和OOP两个阶段，这对程序设计者要求比较高，许多人感到很难掌握。</p>
<p>​    现在设计一个大的软件，是严格按照面向对象软件工程的5个阶段进行的，这个5个阶段的工作不是由一个人从头到尾完成的，而是由不同的人分别完成，这样OOP阶段的任务就比较简单了。程序编写者只需要根据OOd提出的思路，用面向对象语言编写出程序既可。</p>
<p>​    在一个大型软件开发过程中，OOP只是很小的一个部分。</p>
<p>​    对于全栈开发的你来说，这五个阶段都有了，对于简单的问题，不必严格按照这个5个阶段进行，往往由程序设计者按照面向对象的方法进行程序设计，包括类的设计和程序的设计</p>
<h3 id="二、面向对象常用术语"><a href="#二、面向对象常用术语" class="headerlink" title="二、面向对象常用术语"></a>二、面向对象常用术语</h3><p><strong>抽象/实现</strong></p>
<p>抽象指对现实世界问题和实体的本质表现,行为和特征建模,建立一个相关的子集,可以用于 绘程序结构,从而实现这种模型。抽象不仅包括这种模型的数据属性,还定义了这些数据的接口。</p>
<p>对某种抽象的实现就是对此数据及与之相关接口的现实化(realization)。现实化这个过程对于客户 程序应当是透明而且无关的。 </p>
<p><strong>封装/接口</strong></p>
<p>封装描述了对数据/信息进行隐藏的观念,它对数据属性提供接口和访问函数。通过任何客户端直接对数据的访问,无视接口,与封装性都是背道而驰的,除非程序员允许这些操作。作为实现的 一部分,客户端根本就不需要知道在封装之后,数据属性是如何组织的。在Python中,所有的类属性都是公开的,但名字可能被“混淆”了,以阻止未经授权的访问,但仅此而已,再没有其他预防措施了。这就需要在设计时,对数据提供相应的接口,以免客户程序通过不规范的操作来存取封装的数据属性。</p>
<p>注意：封装绝不是等于“把不想让别人看到、以后可能修改的东西用private隐藏起来”</p>
<p><strong>真正的封装是，经过深入的思考，做出良好的抽象，给出“完整且最小”的接口，并使得内部细节可以对外透明</strong></p>
<p><strong>（注意：对外透明</strong>的意思是<strong>，</strong>外部调用者可以顺利的得到自己想要的任何功能，<strong>完全意识不到内部细节的存在）</strong></p>
<p><strong>合成</strong></p>
<p>合成扩充了对类的 述,使得多个不同的类合成为一个大的类,来解决现实问题。合成 述了 一个异常复杂的系统,比如一个类由其它类组成,更小的组件也可能是其它的类,数据属性及行为, 所有这些合在一起,彼此是“有一个”的关系。</p>
<p><strong>派生/继承/继承结构</strong></p>
<p>派生描述了子类衍生出新的特性,新类保留已存类类型中所有需要的数据和行为,但允许修改或者其它的自定义操作,都不会修改原类的定义。<br>继承描述了子类属性从祖先类继承这样一种方式<br>继承结构表示多“代”派生,可以述成一个“族谱”,连续的子类,与祖先类都有关系。</p>
<p><strong>泛化/特化</strong></p>
<p>基于继承<br>泛化表示所有子类与其父类及祖先类有一样的特点。<br>特化描述所有子类的自定义,也就是,什么属性让它与其祖先类不同。</p>
<p><strong>多态与多态性</strong></p>
<p>多态指的是同一种事物的多种状态：水这种事物有多种不同的状态：冰，水蒸气</p>
<p>多态性的概念指出了对象如何通过他们共同的属性和动作来操作及访问,而不需考虑他们具体的类。</p>
<p>冰，水蒸气，都继承于水，它们都有一个同名的方法就是变成云，但是冰.变云(),与水蒸气.变云()是截然不同的过程，虽然调用的方法都一样</p>
<p><strong>自省/反射</strong></p>
<p>自省也称作反射，这个性质展示了某对象是如何在运行期取得自身信息的。如果传一个对象给你,你可以查出它有什么能力,这是一项强大的特性。如果Python不支持某种形式的自省功能,dir和type内建函数,将很难正常工作。还有那些特殊属性,像<strong>dict</strong>,<strong>name</strong>及<strong>doc</strong></p>
<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">面向对象的三大特性 ： 继承 多态 封装</span><br><span class="line">继承 ：</span><br><span class="line">    单继承 ：  ****</span><br><span class="line">        父类（超类、基类）</span><br><span class="line">        子类（派生类）：派生方法和派生属性</span><br><span class="line">        子类的对象在调用方法和属性 ： 先用自己的 自己没有 才用父类的</span><br><span class="line">    多继承 ：（面试）</span><br><span class="line">        不会超过三个父类，不要超过三层  ***</span><br><span class="line">        如果子类自己有用自己的，如果没有就用离子类最近的那个父类的方法</span><br><span class="line">        抽象类和接口类   **</span><br><span class="line">        经典类和新式类 继承规则不同 深度优先和广度优先  ***** （面试）</span><br><span class="line">    super 只能在python3中使用   mro   ****</span><br><span class="line">        super是根据mro广度优先顺序找上一个类</span><br><span class="line">多态 ： （面试）</span><br><span class="line">    多态和鸭子类型</span><br><span class="line">封装 :   *** (面试)</span><br><span class="line">    私有的</span><br><span class="line">    __名字</span><br><span class="line">    只能在类的内部调用 子类都无法继承</span><br><span class="line">三个装饰器</span><br><span class="line">    @property         ****   规范 面试   #@name.setter</span><br><span class="line">    @staticmethod     ***</span><br><span class="line">    @classmethod      *****  当一个方法只使用了类的静态变量时 就给这个方法加上@classmethod装饰器，默认传cls参数</span><br></pre></td></tr></table></figure>


          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/06/06/python全栈/第02部分：并发编程+数据库+前端/前端/前端知识之JavaScript/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="John Doe">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/06/06/python全栈/第02部分：并发编程+数据库+前端/前端/前端知识之JavaScript/" itemprop="url">前端知识之JavaScript</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-06-06T01:08:51+08:00">
                2019-06-06
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/python全栈-02部分-前端/" itemprop="url" rel="index">
                    <span itemprop="name">python全栈 -02部分 -前端</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>[TOC]</p>
<h2 id="（一）JavaScript概述"><a href="#（一）JavaScript概述" class="headerlink" title="（一）JavaScript概述"></a>（一）JavaScript概述</h2><h3 id="一、ECMAScript和JavaScript的关系"><a href="#一、ECMAScript和JavaScript的关系" class="headerlink" title="一、ECMAScript和JavaScript的关系"></a>一、ECMAScript和JavaScript的关系</h3><p>​        1996年11月，JavaScript的创造者–Netscape公司，决定将JavaScript提交给国际标准化组织ECMA，希望这门语言能够成为国际标准。次年，ECMA发布262号标准文件（ECMA-262）的第一版，规定了浏览器脚本语言的标准，并将这种语言称为ECMAScript，这个版本就是1.0版。</p>
<p>​        该标准一开始就是针对JavaScript语言制定的，但是没有称其为JavaScript，有两个方面的原因。一是商标，JavaScript本身已被Netscape注册为商标。二是想体现这门语言的制定者是ECMA，而不是Netscape，这样有利于保证这门语言的开发性和中立性。</p>
<p>​        因此ECMAScript和JavaScript的关系是，前者是后者的规格，后者是前者的一种实现。</p>
<h3 id="二、ECMAScript的历史"><a href="#二、ECMAScript的历史" class="headerlink" title="二、ECMAScript的历史"></a>二、ECMAScript的历史</h3><table>
<thead>
<tr>
<th align="center">年份</th>
<th align="center">名称</th>
<th align="center">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="center">1997</td>
<td align="center">ECMAScript1</td>
<td align="center">第一个版本</td>
</tr>
<tr>
<td align="center">1998</td>
<td align="center">ECMAScript2</td>
<td align="center">版本变更</td>
</tr>
<tr>
<td align="center">1999</td>
<td align="center">ECMAScript3</td>
<td align="center">添加正则表达式、添加try/catch</td>
</tr>
<tr>
<td align="center"></td>
<td align="center">ECMAScript4</td>
<td align="center">没有发布</td>
</tr>
<tr>
<td align="center">2009</td>
<td align="center">ECMAScript5</td>
<td align="center">添加”strict mode”严格模式、添加JSON支持</td>
</tr>
<tr>
<td align="center">2011</td>
<td align="center">ECMAScript5.1</td>
<td align="center">版本变更（现在一般使用该版本，但逐渐向ES6过渡）</td>
</tr>
<tr>
<td align="center">2015</td>
<td align="center">ECMAScript6</td>
<td align="center">添加类和模块</td>
</tr>
<tr>
<td align="center">2016</td>
<td align="center">ECMAScript7</td>
<td align="center">增加指数运算符（**）、增加Array.prototype.includes</td>
</tr>
</tbody></table>
<p><strong><em>注：ES6就是指ECMAScript 6。</em></strong></p>
<p>尽管 ECMAScript 是一个重要的标准，但它并不是 JavaScript 唯一的部分，当然，也不是唯一被标准化的部分。实际上，一个完整的 JavaScript 实现是由以下 3 个不同部分组成的：</p>
<ul>
<li>核心（ECMAScript） </li>
<li>文档对象模型（DOM） Document object model (整合js，css，html)</li>
<li>浏览器对象模型（BOM） Broswer object model（整合js和浏览器）</li>
</ul>
<p>简单地说，ECMAScript 描述了JavaScript语言本身的相关内容。</p>
<p>JavaScript 是脚本语言<br>JavaScript 是一种轻量级的编程语言。</p>
<p>JavaScript 是可插入 HTML 页面的编程代码。</p>
<p>JavaScript 插入 HTML 页面后，可由所有的现代浏览器执行。</p>
<p>JavaScript 很容易学习。</p>
<h3 id="三、JavaScript引入方式"><a href="#三、JavaScript引入方式" class="headerlink" title="三、JavaScript引入方式"></a>三、JavaScript引入方式</h3><h4 id="1、Script标签内写代码"><a href="#1、Script标签内写代码" class="headerlink" title="1、Script标签内写代码"></a>1、Script标签内写代码</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">  <span class="comment">// 在这里写你的JS代码</span></span><br><span class="line">&lt;<span class="regexp">/script&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="2、引入额外的JS文件"><a href="#2、引入额外的JS文件" class="headerlink" title="2、引入额外的JS文件"></a>2、引入额外的JS文件</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;script src=<span class="string">"myscript.js"</span>&gt;<span class="xml"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure>

<h3 id="四、JavaScript语言规范"><a href="#四、JavaScript语言规范" class="headerlink" title="四、JavaScript语言规范"></a>四、JavaScript语言规范</h3><h4 id="1、注释（注释是代码之母）"><a href="#1、注释（注释是代码之母）" class="headerlink" title="1、注释（注释是代码之母）"></a>1、注释（注释是代码之母）</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 这是单行注释</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">这是</span></span><br><span class="line"><span class="comment">多行注释</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

<h4 id="2、结束符"><a href="#2、结束符" class="headerlink" title="2、结束符"></a>2、结束符</h4><p>JavaScript中的语句要以分号（；）为结束符。</p>
<h3 id="五、JavaScript语言基础"><a href="#五、JavaScript语言基础" class="headerlink" title="五、JavaScript语言基础"></a>五、JavaScript语言基础</h3><h4 id="1、变量声明"><a href="#1、变量声明" class="headerlink" title="1、变量声明"></a>1、变量声明</h4><p><strong>（1）</strong>JavaScript的变量名可以使用_、数字、字母、$组成，不能以数字开头。</p>
<p><strong>（2）</strong>声明变量使用   <strong>var 变量名；</strong>的格式来进行声明。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> name = <span class="string">"Alex"</span>;</span><br><span class="line"><span class="keyword">var</span> age = <span class="number">18</span>;</span><br></pre></td></tr></table></figure>

<p><strong><em>注：</em></strong></p>
<ul>
<li>变量名是区分大小写的</li>
<li>推荐使用驼峰式命名规则<ul>
<li>如： userName = “小强”    （首单词首字母小写，后面首字母大写）</li>
</ul>
</li>
<li>保留字不能用做变量名</li>
</ul>
<p><strong><em>补充：</em></strong></p>
<p>ES6新增了let命令，用于声明变量。其用法类似于var，但是所声明的变量只在let命令所在的代码块内有效。</p>
<p>如：for循环的计数器就很适合使用let命令。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i=<span class="number">0</span>; i&lt;arr.length; i++)</span><br><span class="line">&#123;</span><br><span class="line">	...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ES6新增const用来声明常量。一旦声明，其值就不能改变。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> PI = <span class="number">3.1415</span>;</span><br><span class="line">PI <span class="comment">// 3.1415</span></span><br><span class="line"></span><br><span class="line">PI = <span class="number">3</span></span><br><span class="line"><span class="comment">// TypeError: "PI" is read-only</span></span><br></pre></td></tr></table></figure>

<p><strong><em>再次补充：</em></strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//保留字列表</span></span><br><span class="line">abstract</span><br><span class="line">boolean</span><br><span class="line">byte</span><br><span class="line">char</span><br><span class="line"><span class="class"><span class="keyword">class</span></span></span><br><span class="line"><span class="class"><span class="title">const</span></span></span><br><span class="line"><span class="class"><span class="title">debugger</span></span></span><br><span class="line"><span class="class"><span class="title">double</span></span></span><br><span class="line"><span class="class"><span class="title">enum</span></span></span><br><span class="line"><span class="class"><span class="title">export</span></span></span><br><span class="line"><span class="class"><span class="keyword">extends</span></span></span><br><span class="line"><span class="class"><span class="title">final</span></span></span><br><span class="line"><span class="class"><span class="title">float</span></span></span><br><span class="line"><span class="class"><span class="title">goto</span></span></span><br><span class="line"><span class="class"><span class="title">implements</span></span></span><br><span class="line"><span class="class"><span class="title">import</span></span></span><br><span class="line"><span class="class"><span class="title">int</span></span></span><br><span class="line"><span class="class"><span class="title">interface</span></span></span><br><span class="line"><span class="class"><span class="title">long</span></span></span><br><span class="line"><span class="class"><span class="title">native</span></span></span><br><span class="line"><span class="class"><span class="title">package</span></span></span><br><span class="line"><span class="class"><span class="title">private</span></span></span><br><span class="line"><span class="class"><span class="title">protected</span></span></span><br><span class="line"><span class="class"><span class="title">public</span></span></span><br><span class="line"><span class="class"><span class="title">short</span></span></span><br><span class="line"><span class="class"><span class="title">static</span></span></span><br><span class="line"><span class="class"><span class="title">super</span></span></span><br><span class="line"><span class="class"><span class="title">synchronized</span></span></span><br><span class="line"><span class="class"><span class="title">throws</span></span></span><br><span class="line"><span class="class"><span class="title">transient</span></span></span><br><span class="line"><span class="class"><span class="title">volatile</span></span></span><br></pre></td></tr></table></figure>

<h3 id="六、JavaScript数据类型"><a href="#六、JavaScript数据类型" class="headerlink" title="六、JavaScript数据类型"></a>六、JavaScript数据类型</h3><p><strong>JavaScript拥有动态类型</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> x;  <span class="comment">// 此时x是undefined</span></span><br><span class="line"><span class="keyword">var</span> x = <span class="number">1</span>;  <span class="comment">// 此时x是数字</span></span><br><span class="line"><span class="keyword">var</span> x = <span class="string">"Alex"</span>  <span class="comment">// 此时x是字符串</span></span><br></pre></td></tr></table></figure>

<h4 id="1、数值-Number"><a href="#1、数值-Number" class="headerlink" title="1、数值(Number)"></a>1、数值(Number)</h4><p>JavaScript不区分整型和浮点型，就只有一种数字类型。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="number">12.34</span>;</span><br><span class="line"><span class="keyword">var</span> b = <span class="number">20</span>;</span><br><span class="line"><span class="keyword">var</span> c = <span class="number">123e5</span>;  <span class="comment">// 12300000</span></span><br><span class="line"><span class="keyword">var</span> d = <span class="number">123e-5</span>;  <span class="comment">// 0.00123</span></span><br></pre></td></tr></table></figure>

<p>还有一种NaN，表示不是一个数字(Not a Number)。</p>
<p><strong>常用方法：</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">parseInt</span>(<span class="string">"111"</span>)   --&gt; 把字符串转成数字</span><br><span class="line"><span class="built_in">parseFloat</span>(<span class="string">"111"</span>) --&gt; 把字符串转成小数</span><br><span class="line"></span><br><span class="line"><span class="built_in">parseInt</span>(<span class="string">"123"</span>)  <span class="comment">// 返回123</span></span><br><span class="line"><span class="built_in">parseInt</span>(<span class="string">"ABC"</span>)  <span class="comment">// 返回NaN,NaN属性是代表非数字值的特殊值。该属性用于指示某个值不是数字。</span></span><br><span class="line"><span class="built_in">parseFloat</span>(<span class="string">"123.456"</span>)  <span class="comment">// 返回123.456</span></span><br></pre></td></tr></table></figure>

<h4 id="2、字符串-String"><a href="#2、字符串-String" class="headerlink" title="2、字符串(String)"></a>2、字符串(String)</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="string">"Hello"</span></span><br><span class="line"><span class="keyword">var</span> b = <span class="string">"world"</span>;</span><br><span class="line"><span class="keyword">var</span> c = a + b; </span><br><span class="line"><span class="built_in">console</span>.log(c);  <span class="comment">// 得到Helloworld</span></span><br></pre></td></tr></table></figure>

<p><strong>拼接字符串一般使用”+”</strong></p>
<p><strong>常用方法：</strong></p>
<table>
<thead>
<tr>
<th align="center">方法</th>
<th align="center">说明</th>
</tr>
</thead>
<tbody><tr>
<td align="center">.length</td>
<td align="center">返回长度</td>
</tr>
<tr>
<td align="center">.trim()</td>
<td align="center">移除空白</td>
</tr>
<tr>
<td align="center">.trimLeft()</td>
<td align="center">移除左边的空白</td>
</tr>
<tr>
<td align="center">.trimRight()</td>
<td align="center">移除右边的空白</td>
</tr>
<tr>
<td align="center">.charAt(n)</td>
<td align="center">返回第n个字符</td>
</tr>
<tr>
<td align="center">.concat(value, …)</td>
<td align="center">拼接</td>
</tr>
<tr>
<td align="center">.indexOf(substring, start)</td>
<td align="center">子序列位置</td>
</tr>
<tr>
<td align="center">.substring(from, to)</td>
<td align="center">根据索引获取子序列</td>
</tr>
<tr>
<td align="center">.slice(start, end)</td>
<td align="center">切片</td>
</tr>
<tr>
<td align="center">.toLowerCase()</td>
<td align="center">小写</td>
</tr>
<tr>
<td align="center">.toUpperCase()</td>
<td align="center">大写</td>
</tr>
<tr>
<td align="center">.split(delimiter, limit)</td>
<td align="center">分割</td>
</tr>
</tbody></table>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//字符串示例1</span></span><br><span class="line"><span class="keyword">var</span> s = <span class="string">"xiaoqiang1234"</span></span><br><span class="line">s.length		<span class="comment">//13</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> s2 = <span class="string">"  xiao  12345  "</span>;</span><br><span class="line">s2.trim()		<span class="comment">//"xiao  12345"</span></span><br><span class="line">s2.length		<span class="comment">//15</span></span><br><span class="line">s2					<span class="comment">//"  xiao  12345  "</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> s3 = s2.trim()</span><br><span class="line">s3.length		<span class="comment">//11</span></span><br><span class="line">s2.trim().length		<span class="comment">//11</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//字符串示例2</span></span><br><span class="line">s2		<span class="comment">//"  xiao  12345  "</span></span><br><span class="line">s2.trimLeft()		<span class="comment">//"xiao  12345  "</span></span><br><span class="line">s2.trimRight()	<span class="comment">//"  xiao  12345"</span></span><br><span class="line">s2.charAt(<span class="number">0</span>)		<span class="comment">//" "</span></span><br><span class="line">s2.concat(<span class="number">1</span>)		<span class="comment">//"  xiao  12345  1"</span></span><br><span class="line">s2.concat(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>)		<span class="comment">//"  xiao  12345  123"</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//字符串示例3</span></span><br><span class="line">s2		<span class="comment">//"  xiao  12345  "</span></span><br><span class="line">s2.indexOf(<span class="string">"xiao"</span>)		<span class="comment">//2</span></span><br><span class="line">s2.substring(<span class="number">2</span>,<span class="number">6</span>)			<span class="comment">//"xiao"</span></span><br><span class="line">s2.slice(<span class="number">2</span>,<span class="number">6</span>)			<span class="comment">//"xiao"</span></span><br><span class="line">s2.slice(<span class="number">2</span>,<span class="number">-1</span>)		<span class="comment">//"xiao  12345"</span></span><br><span class="line">s2.substring(<span class="number">2</span>,<span class="number">-1</span>)		<span class="comment">//"  "</span></span><br><span class="line"><span class="comment">// ==&gt; s2.substring(-1,2) ==&gt; s2.substring(0,2)</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//字符串示例4</span></span><br><span class="line">s2.toLowerCase()		<span class="comment">//"  xiao  12345  "</span></span><br><span class="line">s2.toUpperCase()		<span class="comment">//"  XIAO  12345  "</span></span><br><span class="line">s2.split(<span class="string">" "</span>)		<span class="comment">//(7)["", "", "xiao", "", "12345", "", ""]</span></span><br><span class="line">s2.split(<span class="string">" "</span>,<span class="number">1</span>)		<span class="comment">//[""]</span></span><br><span class="line">s2.split(<span class="string">" "</span>,<span class="number">3</span>)		<span class="comment">//(3)["", "", "xiao"]</span></span><br><span class="line"><span class="comment">//第二个参数限制返回的“列表”（其实是数组）的元素个数</span></span><br></pre></td></tr></table></figure>

<p><strong>slice和substring的区别：</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">string.slice(start, stop)和string.substring(start, stop)：</span><br><span class="line"></span><br><span class="line">两者的相同点：</span><br><span class="line">如果start等于end，返回空字符串</span><br><span class="line">如果stop参数省略，则取到字符串末</span><br><span class="line">如果某个参数超过string的长度，这个参数会被替换为string的长度</span><br><span class="line"></span><br><span class="line">substirng()的特点：</span><br><span class="line">如果 start &gt; stop ，start和stop将被交换</span><br><span class="line">如果参数是负数或者不是数字，将会被<span class="number">0</span>替换</span><br><span class="line"></span><br><span class="line">silce()的特点：</span><br><span class="line">如果 start &gt; stop 不会交换两者</span><br><span class="line">如果start小于<span class="number">0</span>，则切割从字符串末尾往前数的第abs(start)个的字符开始(包括该位置的字符)</span><br><span class="line">如果stop小于<span class="number">0</span>，则切割在从字符串末尾往前数的第abs(stop)个字符结束(不包含该位置字符)</span><br></pre></td></tr></table></figure>

<p><strong><em>补充：</em></strong></p>
<p>ES6中引入了模块字符串。模版字符串（template string）是增强版的字符串，用反引号（`）标识。它可以当作普通字符串使用，也可以用来定义多行字符串，或者在字符串中嵌入变量。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 普通字符串</span></span><br><span class="line"><span class="string">`这是普通字符串！`</span></span><br><span class="line"><span class="comment">// 多行文本</span></span><br><span class="line"><span class="string">`这是多行的</span></span><br><span class="line"><span class="string">文本`</span></span><br><span class="line"><span class="comment">// 字符串中嵌入变量</span></span><br><span class="line"><span class="keyword">var</span> name = <span class="string">"q1mi"</span>, time = <span class="string">"today"</span>;</span><br><span class="line"><span class="string">`Hello <span class="subst">$&#123;name&#125;</span>, how are you <span class="subst">$&#123;time&#125;</span>?`</span></span><br></pre></td></tr></table></figure>

<p><strong><em>注意：</em></strong></p>
<p>如果模版字符串中使用反引号，则在其前面要用反斜杠转义。</p>
<p>JSHint启用ES6语法支持：//jshint esversion: 6</p>
<h4 id="3、布尔值（Boolean）"><a href="#3、布尔值（Boolean）" class="headerlink" title="3、布尔值（Boolean）"></a>3、布尔值（Boolean）</h4><p>区别于Python，true和false都是小写。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="literal">true</span>;</span><br><span class="line"><span class="keyword">var</span> b = <span class="literal">false</span>;</span><br></pre></td></tr></table></figure>

<p><strong>*””（空字符串）、0、null、undefined、NAN都是 false。*</strong></p>
<h4 id="4、null和undefined"><a href="#4、null和undefined" class="headerlink" title="4、null和undefined"></a>4、null和undefined</h4><ul>
<li>null表示值是空，一般在需要指定或清空一个变量时才会使用，如：name = null；</li>
<li>undefined表示当声明一个变量但未初始化时<strong>（即变量声明未赋值）</strong>，该变量的默认值是undefined。还有就是函数无明确的返回值时，返回的也是undefined。</li>
</ul>
<p>null表示变量的值是空，undefined则表示只声明了变量，但还没有赋值。</p>
<p>null == undefined  返回 true</p>
<p>null === undefined  返回 false</p>
<h4 id="5、对象（Object）"><a href="#5、对象（Object）" class="headerlink" title="5、对象（Object）"></a>5、对象（Object）</h4><p>JavaScript中的所有事物都是对象：字符串、数值、函数…此外，JavaScript允许自定义对象。</p>
<p>JavaScript提供多个内建对象，比如String、Data、Array等等。</p>
<p>对象只是带有属性和方法的特殊数据类型。</p>
<p><strong>null也是Object类型</strong></p>
<p><strong>数组：</strong></p>
<p>数组对象的作用是：使用单独的变量名来存储一系列的值。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = [<span class="number">123</span>, <span class="string">"ABC"</span>];</span><br><span class="line"><span class="built_in">console</span>.log(a[<span class="number">1</span>]);  <span class="comment">// 输出"ABC"</span></span><br></pre></td></tr></table></figure>

<p>常用方法：</p>
<table>
<thead>
<tr>
<th align="center">方法</th>
<th align="center">说明</th>
</tr>
</thead>
<tbody><tr>
<td align="center">.length</td>
<td align="center">数组的大小</td>
</tr>
<tr>
<td align="center">.push(ele)</td>
<td align="center">尾部追加元素</td>
</tr>
<tr>
<td align="center">.pop()</td>
<td align="center">获取尾部的元素</td>
</tr>
<tr>
<td align="center">.unshift(ele)</td>
<td align="center">头部插入元素</td>
</tr>
<tr>
<td align="center">.shift()</td>
<td align="center">头部移除元素</td>
</tr>
<tr>
<td align="center">.slice(start, end)</td>
<td align="center">切片</td>
</tr>
<tr>
<td align="center">.reverse()</td>
<td align="center">反转</td>
</tr>
<tr>
<td align="center">.join(seq)</td>
<td align="center">将数组元素连接成字符串</td>
</tr>
<tr>
<td align="center">.concat(val, …)</td>
<td align="center">连接数组</td>
</tr>
<tr>
<td align="center">.sort()</td>
<td align="center">排序</td>
</tr>
<tr>
<td align="center">.forEach()</td>
<td align="center">将数组的每个元素传递给回调函数</td>
</tr>
<tr>
<td align="center">.splice()</td>
<td align="center">删除元素，并向数组添加新元素。</td>
</tr>
<tr>
<td align="center">.map()</td>
<td align="center">返回一个数组元素调用函数处理后的值的新数组</td>
</tr>
</tbody></table>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//数组定义和数组根据索引取值</span></span><br><span class="line"><span class="keyword">var</span> a1 = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>];</span><br><span class="line">a1		<span class="comment">//(3)[1, 2, 3]</span></span><br><span class="line">a1[<span class="number">0</span>]	<span class="comment">// 1</span></span><br><span class="line">a1[<span class="number">1</span>]	<span class="comment">// 2</span></span><br><span class="line">a1[<span class="number">3</span>]	<span class="comment">//undefined</span></span><br><span class="line">a1[<span class="number">1</span>:<span class="number">2</span>]	<span class="comment">//error</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//类比Python</span></span><br><span class="line">a1.length		<span class="comment">// 3</span></span><br><span class="line">a1.push(<span class="string">"xiaoqiang"</span>)	<span class="comment">// 4</span></span><br><span class="line">a1		<span class="comment">//(4)[1, 2, 3, "xiaoqiang"]</span></span><br><span class="line">a1.pop()	<span class="comment">//"xiaoqiang"</span></span><br><span class="line">a1		<span class="comment">//(3)[1, 2, 3]</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//数组的前面插入和弹出</span></span><br><span class="line">a1.unshift(<span class="number">0</span>)		<span class="comment">// 4</span></span><br><span class="line">a1		<span class="comment">//(4)[0, 1, 2, 3]</span></span><br><span class="line">a1.shift()		<span class="comment">//0</span></span><br><span class="line">a1		<span class="comment">//(3)[1, 2, 3]</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//数组切片（左包含右不包含）</span></span><br><span class="line">a1.slice(<span class="number">1</span>,<span class="number">2</span>)		<span class="comment">//[2]</span></span><br><span class="line">a1.slice(<span class="number">1</span>,<span class="number">-1</span>)	<span class="comment">//[2]</span></span><br><span class="line">a1		<span class="comment">//(3)[1, 2, 3]</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//</span></span><br><span class="line">a1.reverse()	<span class="comment">//(3)[3, 2, 1]</span></span><br><span class="line">a1		<span class="comment">//(3)[3, 2, 1]</span></span><br><span class="line">a1.join(<span class="string">"+"</span>)		<span class="comment">//"3+2+1"</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//</span></span><br><span class="line">a1		<span class="comment">//(3)[3, 2, 1]</span></span><br><span class="line">a1.concat(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>)		<span class="comment">//(6)[3,2,1,1,2,3]</span></span><br><span class="line">a1.concat([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>])	<span class="comment">//(6)[3,2,1,1,2,3]</span></span><br><span class="line">a1.concat([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>],[<span class="string">"a"</span>,<span class="string">"b"</span>,<span class="string">"c"</span>])	<span class="comment">//(9)[3,2,1,1,2,3,"a","b","c"]</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//</span></span><br><span class="line">a1		<span class="comment">//(3)[3, 2, 1]</span></span><br><span class="line">a1.sort()		<span class="comment">//(3)[1, 2, 3]</span></span><br><span class="line">a2 = [<span class="number">19</span>, <span class="number">9</span>, <span class="number">24</span>, <span class="number">47</span>]</span><br><span class="line">a2.sort()		<span class="comment">//(4)[19, 24, 47, 9]</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sortNumber</span>(<span class="params">a,b</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">return</span> a-b</span><br><span class="line">&#125;</span><br><span class="line">a2.sort(sortNumber)		<span class="comment">//(4)[9, 19, 24, 47]</span></span><br></pre></td></tr></table></figure>

<p>关于sort()需要注意：</p>
<p>​        如果调用该方法时没有使用参数，将按字母顺序对数组中的元素进行排序，说得更精确点，是按照字符编码的顺序进行排序。要实现这一点，首先应把数组的元素都转换成字符串（如有必要），以便进行比较。</p>
<p>​        如果想按照其他标准进行排序，就需要提供比较函数，该函数要比较两个值，然后返回一个用于说明这两个值的相对顺序的数字。比较函数应该具有两个参数 a 和 b，其返回值如下：</p>
<p>若 a 小于 b，在排序后的数组中 a 应该出现在 b 之前，则返回一个小于 0 的值。<br>若 a 等于 b，则返回 0。<br>若 a 大于 b，则返回一个大于 0 的值。</p>
<p>示例：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sortNumber</span>(<span class="params">a,b</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> a - b</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> arr1 = [<span class="number">11</span>, <span class="number">100</span>, <span class="number">22</span>, <span class="number">55</span>, <span class="number">33</span>, <span class="number">44</span>]</span><br><span class="line">arr1.sort(sortNumber)</span><br></pre></td></tr></table></figure>

<p>关于遍历数组中的元素，可以使用下面的方式：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = [<span class="number">10</span>, <span class="number">20</span>, <span class="number">30</span>, <span class="number">40</span>];</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i=<span class="number">0</span>; i&lt;a.length; i++) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(a[i]);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="6、forEach"><a href="#6、forEach" class="headerlink" title="6、forEach()"></a>6、forEach()</h4><p><strong>语法：</strong></p>
<p>forEach ( function ( currentValue, index, arr ), thisValue )</p>
<p><strong>参数：</strong></p>
<table>
<thead>
<tr>
<th align="center">参数</th>
<th align="center">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="center">function ( currentValue, index, arr )</td>
<td align="center">必需。 数组中每个元素需要调用的函数。<br>函数参数：<br>currentValue：必需。当前元素<br>index：可选。当前元素的索引值<br>arr：可选。当前元素所属的数组对象</td>
</tr>
<tr>
<td align="center">thisValue</td>
<td align="center">可选。传递给函数的值一般用 “this” 值。<br>如果这个参数为空， “undefined” 会传递给 “this” 值</td>
</tr>
</tbody></table>
<h4 id="7、splice"><a href="#7、splice" class="headerlink" title="7、splice()"></a>7、splice()</h4><p><strong>语法：</strong></p>
<p>splice ( index, howmany, item1, ….., itemX )</p>
<p><strong>参数：</strong></p>
<table>
<thead>
<tr>
<th align="center">参数</th>
<th align="center">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="center"><em>index</em></td>
<td align="center">必需。规定从何处添加/删除元素。 该参数是开始插入和（或）删除的数组元素的下标，必须是数字。</td>
</tr>
<tr>
<td align="center"><em>howmany</em></td>
<td align="center">必需。规定应该删除多少元素。必须是数字，但可以是 “0”。<br> 如果未规定此参数，则删除从 index 开始到原数组结尾的所有元素。</td>
</tr>
<tr>
<td align="center"><em>item1</em>, …, <em>itemX</em></td>
<td align="center">可选。要添加到数组的新元素</td>
</tr>
</tbody></table>
<h4 id="8、map"><a href="#8、map" class="headerlink" title="8、map()"></a>8、map()</h4><p><strong>语法：</strong></p>
<p>map ( function ( currentValue, index, arr ), thisValue )</p>
<p><strong>参数：</strong></p>
<table>
<thead>
<tr>
<th align="center">参数</th>
<th align="center">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="center">function ( currentValue, index, arr )</td>
<td align="center">必需。 函数，数组中每个元素都会执行这个函数。<br>函数参数：<br>currentValue：必需。当前元素<br>index：可选。当前元素的索引值<br>arr：可选。当前元素所属的数组对象</td>
</tr>
<tr>
<td align="center">thisValue</td>
<td align="center">可选。对象作为该执行回调时使用，传递给函数，用作”this” 值。<br>如果省略了thisValue，”this”的值为 “undefined”</td>
</tr>
</tbody></table>
<p><strong><em>补充：</em></strong></p>
<p>ES6新引入了一种新的原始数据类型(Symbol)，表示独一无二的值。它是JavaScript语言的第七种数据类型。</p>
<h4 id="9、类型查询"><a href="#9、类型查询" class="headerlink" title="9、类型查询"></a>9、类型查询</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typeof</span> <span class="string">"abc"</span>  <span class="comment">// "string"</span></span><br><span class="line"><span class="keyword">typeof</span> <span class="literal">null</span>  <span class="comment">// "object"</span></span><br><span class="line"><span class="keyword">typeof</span> <span class="literal">true</span>  <span class="comment">// "boolean"</span></span><br><span class="line"><span class="keyword">typeof</span> <span class="number">123</span> <span class="comment">// "number"</span></span><br></pre></td></tr></table></figure>

<p><strong><em>typeof是一个元运算符（就像++、—、！、-等一元运算符），不是一个函数，也不是一个语句。</em></strong></p>
<p>对变量或值调用 typeof 运算符将返回下列值之一：</p>
<ul>
<li>undefined - 如果变量是 Undefined 类型的</li>
<li>boolean - 如果变量是 Boolean 类型的</li>
<li>number - 如果变量是 Number 类型的</li>
<li>string - 如果变量是 String 类型的</li>
<li>object - 如果变量是一种引用类型或 Null 类型的</li>
</ul>
<h3 id="七、运算符"><a href="#七、运算符" class="headerlink" title="七、运算符"></a>七、运算符</h3><h4 id="1、算数运算符"><a href="#1、算数运算符" class="headerlink" title="1、算数运算符"></a>1、算数运算符</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">+   -   *   <span class="regexp">/   %   ++   --</span></span><br></pre></td></tr></table></figure>

<h4 id="2、比较运算符"><a href="#2、比较运算符" class="headerlink" title="2、比较运算符"></a>2、比较运算符</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&gt;   &gt;=   <span class="xml"><span class="tag">&lt;   &lt;=   <span class="string">!</span>=   ==   ===   <span class="string">!</span>==</span></span></span><br></pre></td></tr></table></figure>

<p><strong><em>注意：</em></strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span> == “<span class="number">1</span>”  <span class="comment">// true 弱等于</span></span><br><span class="line"><span class="number">1</span> === <span class="string">"1"</span>  <span class="comment">// false  强等于（既判断值又判断类型）</span></span><br><span class="line"><span class="number">10</span> !== <span class="string">"10"</span>	<span class="comment">//true</span></span><br><span class="line"><span class="number">10</span> != <span class="string">"10"</span>	<span class="comment">//false</span></span><br></pre></td></tr></table></figure>

<h4 id="3、逻辑运算符"><a href="#3、逻辑运算符" class="headerlink" title="3、逻辑运算符"></a>3、逻辑运算符</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&amp;&amp;   ||   !</span><br></pre></td></tr></table></figure>

<h4 id="4、赋值运算符"><a href="#4、赋值运算符" class="headerlink" title="4、赋值运算符"></a>4、赋值运算符</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">=   +=   -=   *=   <span class="regexp">/=</span></span><br></pre></td></tr></table></figure>

<h3 id="八、流程控制"><a href="#八、流程控制" class="headerlink" title="八、流程控制"></a>八、流程控制</h3><h4 id="1、if-else"><a href="#1、if-else" class="headerlink" title="1、if-else"></a>1、if-else</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="number">10</span>;</span><br><span class="line"><span class="keyword">if</span> (a &gt; <span class="number">5</span>)&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">"yes"</span>);</span><br><span class="line">&#125;<span class="keyword">else</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">"no"</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="2、if-else-if-else"><a href="#2、if-else-if-else" class="headerlink" title="2、if-else  if-else"></a>2、if-else  if-else</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="number">10</span>;</span><br><span class="line"><span class="keyword">if</span> (a &gt; <span class="number">5</span>)&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">"a &gt; 5"</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span> (a &lt; <span class="number">5</span>) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">"a &lt; 5"</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">"a = 5"</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="3、switch"><a href="#3、switch" class="headerlink" title="3、switch"></a>3、switch</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> day = <span class="keyword">new</span> <span class="built_in">Date</span>().getDay();</span><br><span class="line"><span class="keyword">switch</span> (day) &#123;</span><br><span class="line">  <span class="keyword">case</span> <span class="number">0</span>:</span><br><span class="line">  	<span class="built_in">console</span>.log(<span class="string">"Sunday"</span>);</span><br><span class="line">  	<span class="keyword">break</span>;</span><br><span class="line">  <span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line">  	<span class="built_in">console</span>.log(<span class="string">"Monday"</span>);</span><br><span class="line">  	<span class="keyword">break</span>;</span><br><span class="line">	<span class="keyword">default</span>:</span><br><span class="line"> 		<span class="built_in">console</span>.log(<span class="string">"..."</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong><em>switch中的case子句通常都会加到break语句，否则程序会继续执行后续case中的语句。</em></strong></p>
<h4 id="4、for"><a href="#4、for" class="headerlink" title="4、for"></a>4、for</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i=<span class="number">0</span>;i&lt;<span class="number">10</span>;i++) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(i);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="5、while"><a href="#5、while" class="headerlink" title="5、while"></a>5、while</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> i = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">while</span> (i &lt; <span class="number">10</span>) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(i);</span><br><span class="line">  i++;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="6、三元运算"><a href="#6、三元运算" class="headerlink" title="6、三元运算"></a>6、三元运算</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">var</span> b = <span class="number">2</span>;</span><br><span class="line"><span class="keyword">var</span> c = a &gt; b ? a : b</span><br></pre></td></tr></table></figure>

<h3 id="九、函数"><a href="#九、函数" class="headerlink" title="九、函数"></a>九、函数</h3><h4 id="1、函数定义"><a href="#1、函数定义" class="headerlink" title="1、函数定义"></a>1、函数定义</h4><p>JavaScript中的函数和Python中的非常类似，只是定义的方式有点区别。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 普通函数定义</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">f1</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">"Hello world!"</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 带参数的函数</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">f2</span>(<span class="params">a, b</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="built_in">arguments</span>);  <span class="comment">// 内置的arguments对象</span></span><br><span class="line">  <span class="built_in">console</span>.log(<span class="built_in">arguments</span>.length);</span><br><span class="line">  <span class="built_in">console</span>.log(a, b);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 带返回值的函数</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sum</span>(<span class="params">a, b</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">return</span> a + b;</span><br><span class="line">&#125;</span><br><span class="line">sum(<span class="number">1</span>, <span class="number">2</span>);  <span class="comment">// 调用函数</span></span><br><span class="line"></span><br><span class="line">sum(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>)	<span class="comment">// 3</span></span><br><span class="line">sum(<span class="number">1</span>)	<span class="comment">//NAN  (a:1, b:undefined, a+b:NAN)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 匿名函数方式</span></span><br><span class="line"><span class="keyword">var</span> sum = <span class="function"><span class="keyword">function</span>(<span class="params">a, b</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">return</span> a + b;</span><br><span class="line">&#125;</span><br><span class="line">sum(<span class="number">1</span>, <span class="number">2</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 立即执行函数</span></span><br><span class="line">(<span class="function"><span class="keyword">function</span>(<span class="params">a, b</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">return</span> a + b;</span><br><span class="line">&#125;)(<span class="number">1</span>, <span class="number">2</span>);</span><br></pre></td></tr></table></figure>

<p><strong><em>补充：</em></strong></p>
<p>ES6中允许使用”箭头”（=&gt;）定义函数。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> f = <span class="function"><span class="params">v</span> =&gt;</span> v;</span><br><span class="line"><span class="comment">// 等同于</span></span><br><span class="line"><span class="keyword">var</span> f = <span class="function"><span class="keyword">function</span>(<span class="params">v</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">return</span> v;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>如果箭头函数不需要参数或需要多个参数，就是用圆括号代表参数部分：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> f = <span class="function"><span class="params">()</span> =&gt;</span> <span class="number">5</span>;</span><br><span class="line"><span class="comment">// 等同于</span></span><br><span class="line"><span class="keyword">var</span> f = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;<span class="keyword">return</span> <span class="number">5</span>&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> sum = <span class="function">(<span class="params">num1, num2</span>) =&gt;</span> num1 + num2;</span><br><span class="line"><span class="comment">// 等同于</span></span><br><span class="line"><span class="keyword">var</span> sum = <span class="function"><span class="keyword">function</span>(<span class="params">num1, num2</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">return</span> num1 + num2;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="2、函数中的argument参数"><a href="#2、函数中的argument参数" class="headerlink" title="2、函数中的argument参数"></a>2、函数中的argument参数</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">add</span>(<span class="params">a,b</span>)</span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(a+b);</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="built_in">arguments</span>)</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="built_in">arguments</span>.length)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">add(<span class="number">1</span>, <span class="number">2</span>)</span><br><span class="line">add(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>)</span><br></pre></td></tr></table></figure>

<p>输出：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">3</span></span><br><span class="line">[<span class="number">1</span>, <span class="number">2</span>]	<span class="comment">//数组</span></span><br><span class="line"><span class="number">2</span></span><br><span class="line"></span><br><span class="line"><span class="number">3</span></span><br><span class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line"><span class="number">3</span></span><br></pre></td></tr></table></figure>

<p><strong><em>注意：</em></strong></p>
<p>函数只能返回一个值，如果要返回多个值，只能将其放在数组或对象中返回。</p>
<h4 id="3、函数的全局变量和局部变量"><a href="#3、函数的全局变量和局部变量" class="headerlink" title="3、函数的全局变量和局部变量"></a>3、函数的全局变量和局部变量</h4><p><strong>（1）局部变量</strong></p>
<p>​        在JavaScript函数内部声明的变量（使用 var）是局部变量，所以只能在函数内部访问它（该变量的作用域是函数内部）。只要函数运行完毕，本地变量就会被删除。</p>
<p><strong>（2）全局变量</strong></p>
<p>​        在函数外声明的变量是<em>全局</em>变量，网页上的所有脚本和函数都能访问它。</p>
<p><strong>（3）变量生存周期</strong></p>
<p>JavaScript变量的生命期从它们被声明的时间开始。</p>
<p>局部变量会在函数运行以后被删除。</p>
<p>全局变量会在页面关闭后被删除。</p>
<h4 id="4、作用域"><a href="#4、作用域" class="headerlink" title="4、作用域"></a>4、作用域</h4><p>首先在函数内部查找变量，找不到则到外层函数查找，逐步找到最外层。</p>
<p>几个例子：</p>
<p>（1）</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> city = <span class="string">"BeiJing"</span>;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">f</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> city = <span class="string">"ShangHai"</span>;</span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">inner</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> city = <span class="string">"ShenZhen"</span>;</span><br><span class="line">    <span class="built_in">console</span>.log(city);</span><br><span class="line">  &#125;</span><br><span class="line">  inner();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">f();  <span class="comment">//输出结果是？</span></span><br></pre></td></tr></table></figure>

<p>（2）</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> city = <span class="string">"BeiJing"</span>;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Bar</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(city);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">f</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> city = <span class="string">"ShangHai"</span>;</span><br><span class="line">  <span class="keyword">return</span> Bar;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> ret = f();</span><br><span class="line">ret();  <span class="comment">// 打印结果是？(Beijing)</span></span><br></pre></td></tr></table></figure>

<p>（3）闭包</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> city = <span class="string">"BeiJing"</span>;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">f</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> city = <span class="string">"ShangHai"</span>;</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">inner</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(city);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> inner;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> ret = f();</span><br><span class="line">ret();	<span class="comment">//ShangHai</span></span><br></pre></td></tr></table></figure>

<h3 id="十、词法分析（尝试理解）"><a href="#十、词法分析（尝试理解）" class="headerlink" title="十、词法分析（尝试理解）"></a>十、词法分析（尝试理解）</h3><p>JavaScript中在调用函数的那一瞬间，会先进行词法分析。</p>
<p><strong>词法分析的过程：</strong></p>
<p>当函数调用的前一瞬间，会先形成一个激活对象：Avtive Object（AO），并会分析以下3个方面：</p>
<ol>
<li>函数参数，如果有，则将此参数赋值给AO，且值为undefined。如果没有，则不做任何操作。</li>
<li>函数局部变量，如果AO上有同名的值，则不做任何操作。如果没有，则将此变量赋值给AO，并且值为undefined。</li>
<li>函数声明，如果AO上有，则会将AO上的对象覆盖。如果没有，则不做任何操作。</li>
</ol>
<p><strong><em>函数内部无论是使用参数还是使用局部变量都到AO上找。</em></strong></p>
<p>看两个例子：</p>
<p>第一题：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> age = <span class="number">18</span>;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(age);</span><br><span class="line">  <span class="keyword">var</span> age = <span class="number">22</span>;</span><br><span class="line">  <span class="built_in">console</span>.log(age);</span><br><span class="line">&#125;</span><br><span class="line">foo();  <span class="comment">// 问：执行foo()之后的结果是？</span></span><br><span class="line"><span class="comment">// undefined 22</span></span><br></pre></td></tr></table></figure>

<p>第二题：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> age = <span class="number">18</span>;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(age);</span><br><span class="line">  <span class="keyword">var</span> age = <span class="number">22</span>;</span><br><span class="line">  <span class="built_in">console</span>.log(age);</span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">age</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"呵呵"</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="built_in">console</span>.log(age);</span><br><span class="line">&#125;</span><br><span class="line">foo();  <span class="comment">// 执行后的结果是？</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 1. 先分析 给AO赋值</span></span><br><span class="line"><span class="comment">// var age = 22;  --&gt; AO.age=undefined;</span></span><br><span class="line"><span class="comment">// function age()&#123;console.log("呵呵");&#125;  --&gt; AO.age=function()&#123;...&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 2. 真正执行阶段 就去AO上找</span></span><br><span class="line"><span class="comment">// function()&#123;...&#125;</span></span><br><span class="line"><span class="comment">// 22</span></span><br><span class="line"><span class="comment">// 22</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 总共三个值</span></span><br></pre></td></tr></table></figure>

<p>答案解析：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">词法分析过程：</span><br><span class="line">1、分析参数，有一个参数，形成一个 AO.age=undefine;</span><br><span class="line">2、分析变量声明，有一个 var age, 发现 AO 上面已经有一个 AO.age，因此不做任何处理</span><br><span class="line">3、分析函数声明，有一个 function age()&#123;...&#125; 声明， 则把原有的 age 覆盖成 AO.age=function()&#123;...&#125;;</span><br><span class="line"></span><br><span class="line">最终，AO上的属性只有一个age，并且值为一个函数声明</span><br><span class="line"></span><br><span class="line">执行过程：</span><br><span class="line">注意：执行过程中所有的值都是从AO对象上去寻找</span><br><span class="line"></span><br><span class="line">1、执行第一个 console.log(age) 时，此时的 AO.age 是一个函数，所以第一个输出的一个函数</span><br><span class="line">2、这句 var age=22; 是对 AO.age 的属性赋值， 此时AO.age=22 ，所以在第二个输出的是 22</span><br><span class="line">3、同理第三个输出的还是22, 因为中间再没有改变age值的语句了</span><br></pre></td></tr></table></figure>

<h3 id="十一、内置对象和方法"><a href="#十一、内置对象和方法" class="headerlink" title="十一、内置对象和方法"></a>十一、内置对象和方法</h3><p>JavaScript中的所有事物都是对象：字符串、数字、数组、日期等等。在JavaScript中，对象是拥有属性和方法的数据。</p>
<p>我们在学习基本数据类型的时候已经带大家了解了，JavaScript中的Number对象、String对象、Array对象等。</p>
<p><strong><em>注意 var s1 = “abc”和 var s2 = new String(“abc”)的区别：typeof s1 –&gt; string而 typeof s2 –&gt; Object</em></strong></p>
<p><img src="https://images2018.cnblogs.com/blog/867021/201803/867021-20180311224027096-1902975546.png" alt></p>
<h4 id="1、自定义对象"><a href="#1、自定义对象" class="headerlink" title="1、自定义对象"></a>1、自定义对象</h4><p>JavaScript的对象（Object）本质上是键值对的集合（Hash结构），但是只能用字符串作为键。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = &#123;<span class="string">"name"</span>: <span class="string">"Alex"</span>, <span class="string">"age"</span>: <span class="number">18</span>&#125;;</span><br><span class="line"><span class="built_in">console</span>.log(a.name);</span><br><span class="line"><span class="built_in">console</span>.log(a[<span class="string">"age"</span>]);</span><br></pre></td></tr></table></figure>

<p><strong>注：</strong></p>
<p>键可以不用双引号，加上也不出错；</p>
<p>值若是字符串类型，必须加上双引号。</p>
<p>遍历对象中的内容：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = &#123;<span class="string">"name"</span>: <span class="string">"Alex"</span>, <span class="string">"age"</span>: <span class="number">18</span>&#125;;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i <span class="keyword">in</span> a)&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(i, a[i]);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>创建对象：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> person=<span class="keyword">new</span> <span class="built_in">Object</span>();  <span class="comment">// 创建一个person对象</span></span><br><span class="line">person.name=<span class="string">"Alex"</span>;  <span class="comment">// person对象的name属性</span></span><br><span class="line">person.age=<span class="number">18</span>;  <span class="comment">// person对象的age属性</span></span><br></pre></td></tr></table></figure>

<p><strong><em>注意：</em></strong></p>
<p>​        ES6中提供了Map数据结构。它类似于对象，也是键值对的集合，但是“键”的范围不限于字符串，各种类型的值（包括对象）都可以当做键。</p>
<p>​         也就是说，Object结构提供了“字符串–值”的对应，Map结构提供了“值–值”的对应，是一种更完善的Hash结构实现。</p>
<p>map：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> m = <span class="keyword">new</span> <span class="built_in">Map</span>();</span><br><span class="line"><span class="keyword">var</span> o = &#123;<span class="attr">p</span>: <span class="string">"Hello World"</span>&#125;</span><br><span class="line"></span><br><span class="line">m.set(o, <span class="string">"content"</span>&#125;</span><br><span class="line">m.get(o)  <span class="comment">// "content"</span></span><br><span class="line"></span><br><span class="line">m.has(o)  <span class="comment">// true</span></span><br><span class="line">m.delete(o)  <span class="comment">// true</span></span><br><span class="line">m.has(o) <span class="comment">// false</span></span><br></pre></td></tr></table></figure>

<p>JavaScript面向对象之继承:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 父类构造函数</span></span><br><span class="line"><span class="keyword">var</span> Car = <span class="function"><span class="keyword">function</span> (<span class="params">loc</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.loc = loc;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 父类方法</span></span><br><span class="line">Car.prototype.move = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.loc ++;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 子类构造函数</span></span><br><span class="line"><span class="keyword">var</span> Van = <span class="function"><span class="keyword">function</span> (<span class="params">loc</span>) </span>&#123;</span><br><span class="line">  Car.call(<span class="keyword">this</span>, loc);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 继承父类的方法</span></span><br><span class="line">Van.prototype = <span class="built_in">Object</span>.create(Car.prototype);</span><br><span class="line"><span class="comment">// 修复 constructor</span></span><br><span class="line">Van.prototype.constructor = Van;</span><br><span class="line"><span class="comment">// 扩展方法</span></span><br><span class="line">Van.prototype.grab = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">/* ... */</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h4 id="2、Date对象"><a href="#2、Date对象" class="headerlink" title="2、Date对象"></a>2、Date对象</h4><p>创建Date对象：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//方法1：不指定参数</span></span><br><span class="line"><span class="keyword">var</span> d1 = <span class="keyword">new</span> <span class="built_in">Date</span>();</span><br><span class="line"><span class="built_in">console</span>.log(d1.toLocaleString());</span><br><span class="line"><span class="comment">//方法2：参数为日期字符串</span></span><br><span class="line"><span class="keyword">var</span> d2 = <span class="keyword">new</span> <span class="built_in">Date</span>(<span class="string">"2004/3/20 11:12"</span>);</span><br><span class="line"><span class="built_in">console</span>.log(d2.toLocaleString());</span><br><span class="line"><span class="keyword">var</span> d3 = <span class="keyword">new</span> <span class="built_in">Date</span>(<span class="string">"04/03/20 11:12"</span>);</span><br><span class="line"><span class="built_in">console</span>.log(d3.toLocaleString());</span><br><span class="line"><span class="comment">//方法3：参数为毫秒数</span></span><br><span class="line"><span class="keyword">var</span> d3 = <span class="keyword">new</span> <span class="built_in">Date</span>(<span class="number">5000</span>);</span><br><span class="line"><span class="built_in">console</span>.log(d3.toLocaleString());</span><br><span class="line"><span class="built_in">console</span>.log(d3.toUTCString());</span><br><span class="line"></span><br><span class="line"><span class="comment">//方法4：参数为年月日小时分钟秒毫秒</span></span><br><span class="line"><span class="keyword">var</span> d4 = <span class="keyword">new</span> <span class="built_in">Date</span>(<span class="number">2004</span>,<span class="number">2</span>,<span class="number">20</span>,<span class="number">11</span>,<span class="number">12</span>,<span class="number">0</span>,<span class="number">300</span>);</span><br><span class="line"><span class="built_in">console</span>.log(d4.toLocaleString());  <span class="comment">//毫秒并不直接显示</span></span><br></pre></td></tr></table></figure>

<p>Date对象的方法：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> d = <span class="keyword">new</span> <span class="built_in">Date</span>(); </span><br><span class="line"><span class="comment">//getDate()                 获取日</span></span><br><span class="line"><span class="comment">//getDay ()                 获取星期</span></span><br><span class="line"><span class="comment">//getMonth ()               获取月（0-11）</span></span><br><span class="line"><span class="comment">//getFullYear ()            获取完整年份</span></span><br><span class="line"><span class="comment">//getHours ()               获取小时</span></span><br><span class="line"><span class="comment">//getMinutes ()             获取分钟</span></span><br><span class="line"><span class="comment">//getSeconds ()             获取秒</span></span><br><span class="line"><span class="comment">//getMilliseconds ()        获取毫秒</span></span><br><span class="line"><span class="comment">//getTime ()                返回累计毫秒数(从1970/1/1午夜)</span></span><br></pre></td></tr></table></figure>

<h4 id="3、JSON对象"><a href="#3、JSON对象" class="headerlink" title="3、JSON对象"></a>3、JSON对象</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//任何语言都能支持JSON这个格式</span></span><br><span class="line"><span class="keyword">var</span> str1 = <span class="string">'&#123;"name": "Alex", "age": 18&#125;'</span>;		<span class="comment">//JSON类的字符串</span></span><br><span class="line"><span class="keyword">var</span> obj1 = &#123;<span class="string">"name"</span>: <span class="string">"Alex"</span>, <span class="string">"age"</span>: <span class="number">18</span>&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// JSON字符串转换成对象</span></span><br><span class="line"><span class="keyword">var</span> obj = <span class="built_in">JSON</span>.parse(str1); </span><br><span class="line"><span class="built_in">console</span>.log(obj)		<span class="comment">//&#123;name: "Alex", age: 18&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 对象转换成JSON字符串</span></span><br><span class="line"><span class="keyword">var</span> str = <span class="built_in">JSON</span>.stringify(obj1);</span><br><span class="line"><span class="built_in">console</span>.log(str)		<span class="comment">// &#123;"name": "Alex", "age": 18&#125;</span></span><br></pre></td></tr></table></figure>

<h4 id="4、RegExp对象"><a href="#4、RegExp对象" class="headerlink" title="4、RegExp对象"></a>4、RegExp对象</h4><p><strong>RegExp相关：</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//RegExp对象</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//创建正则对象方式1</span></span><br><span class="line"><span class="comment">// 参数1 正则表达式(不能有空格)</span></span><br><span class="line"><span class="comment">// 参数2 匹配模式：常用g(全局匹配;找到所有匹配，而不是在第一个匹配后停止)和i(忽略大小写)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 用户名只能是英文字母、数字和_，并且首字母必须是英文字母。长度最短不能少于6位 最长不能超过12位。</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建RegExp对象方式（逗号后面不要加空格）</span></span><br><span class="line"><span class="keyword">var</span> reg1 = <span class="keyword">new</span> <span class="built_in">RegExp</span>(<span class="string">"^[a-zA-Z][a-zA-Z0-9_]&#123;5,11&#125;$"</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 匹配响应的字符串</span></span><br><span class="line"><span class="keyword">var</span> s1 = <span class="string">"bc123"</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//RegExp对象的test方法，测试一个字符串是否符合对应的正则规则，返回值是true或false。</span></span><br><span class="line">reg1.test(s1);  <span class="comment">// true</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建方式2</span></span><br><span class="line"><span class="comment">// /填写正则表达式/匹配模式（逗号后面不要加空格）</span></span><br><span class="line"><span class="keyword">var</span> reg2 = <span class="regexp">/^[a-zA-Z][a-zA-Z0-9_]&#123;5,11&#125;$/</span>;</span><br><span class="line"><span class="comment">/////	坑1: 正则表达式中不能有空格</span></span><br><span class="line"></span><br><span class="line">reg2.test(s1);  <span class="comment">// true</span></span><br><span class="line"><span class="comment">///// 坑2: text()不传值相当于传了一个undefined进去</span></span><br><span class="line"><span class="comment">///// 然后text()就把这个undefined当成是"undefined"来判断（字符串类型）</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// String对象与正则结合的4个方法</span></span><br><span class="line"><span class="keyword">var</span> s2 = <span class="string">"hello world"</span>;</span><br><span class="line"></span><br><span class="line">s2.match(<span class="regexp">/o/g</span>);         <span class="comment">// ["o", "o"]             查找字符串中 符合正则 的内容</span></span><br><span class="line">s2.search(<span class="regexp">/h/g</span>);        <span class="comment">// 0                      查找字符串中符合正则表达式的内容位置</span></span><br><span class="line">s2.split(<span class="regexp">/o/g</span>);         <span class="comment">// ["hell", " w", "rld"]  按照正则表达式对字符串进行切割</span></span><br><span class="line">s2.replace(<span class="regexp">/o/g</span>, <span class="string">"s"</span>);  <span class="comment">// "hells wsrld"          对字符串按照正则进行替换</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 关于匹配模式：g和i的简单示例</span></span><br><span class="line"><span class="comment">//g 全局匹配</span></span><br><span class="line"><span class="comment">//i 不区分大小写</span></span><br><span class="line"><span class="keyword">var</span> s1 = <span class="string">"name:Alex age:18"</span>;</span><br><span class="line"></span><br><span class="line">s1.replace(<span class="regexp">/a/</span>, <span class="string">"哈哈哈"</span>);      <span class="comment">// "n哈哈哈me:Alex age:18"  不是改变原来的字符串，而是生成新的字符串</span></span><br><span class="line">s1.replace(<span class="regexp">/a/g</span>, <span class="string">"哈哈哈"</span>);     <span class="comment">// "n哈哈哈me:Alex 哈哈哈ge:18"      全局匹配</span></span><br><span class="line">s1.replace(<span class="regexp">/a/gi</span>, <span class="string">"哈哈哈"</span>);    <span class="comment">// "n哈哈哈me:哈哈哈lex 哈哈哈ge:18"  不区分大小写</span></span><br><span class="line"></span><br><span class="line"><span class="comment">///// 坑3:</span></span><br><span class="line"><span class="comment">// 当正则表达式使用全局模式时，并且还让其检测一个字符串，此时会引出lastIndex的概念。</span></span><br><span class="line"><span class="comment">// lastIndex会记住上一次匹配成功的位置，下一次匹配从lastIndex的下一位开始</span></span><br><span class="line"><span class="comment">// 避免方法：可将g去除</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 注意事项1：</span></span><br><span class="line"><span class="comment">// 如果regExpObject带有全局标志g，test()函数不是从字符串的开头开始查找，而是从属性regExpObject.lastIndex所指定的索引处开始查找。</span></span><br><span class="line"><span class="comment">// 该属性值默认为0，所以第一次仍然是从字符串的开头查找。</span></span><br><span class="line"><span class="comment">// 当找到一个匹配时，test()函数会将regExpObject.lastIndex的值改为字符串中本次匹配内容的最后一个字符的下一个索引位置。</span></span><br><span class="line"><span class="comment">// 当再次执行test()函数时，将会从该索引位置处开始查找，从而找到下一个匹配。</span></span><br><span class="line"><span class="comment">// 因此，当我们使用test()函数执行了一次匹配之后，如果想要重新使用test()函数从头开始查找，则需要手动将regExpObject.lastIndex的值重置为 0。</span></span><br><span class="line"><span class="comment">// 如果test()函数再也找不到可以匹配的文本时，该函数会自动把regExpObject.lastIndex属性重置为 0。</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> reg3 = <span class="regexp">/foo/g</span>;</span><br><span class="line"><span class="comment">// 此时 regex.lastIndex=0</span></span><br><span class="line">reg3.test(<span class="string">'foo'</span>); <span class="comment">// 返回true</span></span><br><span class="line"><span class="comment">// 此时 regex.lastIndex=3</span></span><br><span class="line">reg3.test(<span class="string">'xxxfoo'</span>); <span class="comment">// 还是返回true</span></span><br><span class="line"><span class="comment">// 所以我们在使用test()方法校验一个字符串是否完全匹配时，一定要加上^和$符号。</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 注意事项2(说出来你可能不信系列)：</span></span><br><span class="line"><span class="comment">// 当我们不加参数调用RegExpObj.test()方法时, 相当于执行RegExpObj.test("undefined"), 并且/undefined/.test()默认返回true。</span></span><br><span class="line"><span class="keyword">var</span> reg4 = <span class="regexp">/^undefined$/</span>;</span><br><span class="line">reg4.test(); <span class="comment">// 返回true</span></span><br><span class="line">reg4.test(<span class="literal">undefined</span>); <span class="comment">// 返回true</span></span><br><span class="line">reg4.test(<span class="string">"undefined"</span>); <span class="comment">// 返回true</span></span><br></pre></td></tr></table></figure>

<h4 id="5、Math对象"><a href="#5、Math对象" class="headerlink" title="5、Math对象"></a>5、Math对象</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">abs(x)      返回数的绝对值。</span><br><span class="line">exp(x)      返回 e 的指数。</span><br><span class="line">floor(x)    对数进行下舍入（向下取整）。</span><br><span class="line">log(x)      返回数的自然对数（底为e）。</span><br><span class="line">max(x,y)    返回 x 和 y 中的最高值。</span><br><span class="line">min(x,y)    返回 x 和 y 中的最低值。</span><br><span class="line">pow(x,y)    返回 x 的 y 次幂。</span><br><span class="line">random()    返回 <span class="number">0</span> ~ <span class="number">1</span> 之间的随机数。</span><br><span class="line">round(x)    把数四舍五入为最接近的整数。</span><br><span class="line">sin(x)      返回数的正弦。</span><br><span class="line">sqrt(x)     返回数的平方根。</span><br><span class="line">tan(x)      返回角的正切。</span><br></pre></td></tr></table></figure>


          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/05/28/python全栈/第02部分：并发编程+数据库+前端/前端/前端知识之CSS/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="John Doe">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/05/28/python全栈/第02部分：并发编程+数据库+前端/前端/前端知识之CSS/" itemprop="url">前端知识之CSS</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-05-28T17:38:26+08:00">
                2019-05-28
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/python全栈-02部分-前端/" itemprop="url" rel="index">
                    <span itemprop="name">python全栈 -02部分 -前端</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>[TOC]</p>
<h2 id="（一）CSS-介绍"><a href="#（一）CSS-介绍" class="headerlink" title="（一）CSS 介绍"></a>（一）CSS 介绍</h2><p><strong>1、</strong>CSS（Cascading Style Sheet，层叠样式表）：定义如何显示HTML元素。</p>
<p><strong>2、</strong>当浏览器读到一个样式表，它就会按照这个样式表来对文档进行格式化（渲染）。</p>
<h2 id="（二）CSS语法"><a href="#（二）CSS语法" class="headerlink" title="（二）CSS语法"></a>（二）CSS语法</h2><h3 id="一、CSS实例"><a href="#一、CSS实例" class="headerlink" title="一、CSS实例"></a>一、CSS实例</h3><p><strong>1、</strong>每个CSS样式由两个组成部分：选择器和申明。声明又包括属性和属性值。每个声明之后用分号结束。</p>
<p><img src="https://images2017.cnblogs.com/blog/867021/201712/867021-20171215115756808-909989248.png" alt></p>
<h3 id="二、CSS注释"><a href="#二、CSS注释" class="headerlink" title="二、CSS注释"></a>二、CSS注释</h3><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*这是注释*/</span></span><br></pre></td></tr></table></figure>

<p>注释是代码之母。</p>
<h2 id="（三）CSS的几种引入方式"><a href="#（三）CSS的几种引入方式" class="headerlink" title="（三）CSS的几种引入方式"></a>（三）CSS的几种引入方式</h2><h3 id="一、行内样式"><a href="#一、行内样式" class="headerlink" title="一、行内样式"></a>一、行内样式</h3><p>行内式是在标记的style属性中设定CSS样式。不推荐大规模使用。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">style</span>=<span class="string">"color: red"</span>&gt;</span>Hello world.<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="二、内部样式"><a href="#二、内部样式" class="headerlink" title="二、内部样式"></a>二、内部样式</h3><p>嵌入式是将CSS样式集中写在网页的<head><meta name="generator" content="Hexo 3.9.0"></head>标签对的<style></style>标签对中。格式如下：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line">        p&#123;</span><br><span class="line"><span class="css">            <span class="selector-tag">background-color</span>: <span class="selector-id">#2b99ff</span>;</span></span><br><span class="line">        &#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="三、外部样式"><a href="#三、外部样式" class="headerlink" title="三、外部样式"></a>三、外部样式</h3><p>外部样式就是在将CSS写在一个单独的文件中，然后在页面进行引入即可。推荐使用此方式。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">href</span>=<span class="string">"mystyle.css"</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">type</span>=<span class="string">"text/css"</span>/&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="（四）CSS选择器"><a href="#（四）CSS选择器" class="headerlink" title="（四）CSS选择器"></a>（四）CSS选择器</h2><h3 id="一、基本选择器"><a href="#一、基本选择器" class="headerlink" title="一、基本选择器"></a>一、基本选择器</h3><p><strong>1、</strong>元素选择器</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">p</span> &#123;<span class="attribute">color</span>: <span class="string">"red"</span>;&#125;</span><br></pre></td></tr></table></figure>

<p><strong>2、</strong>ID选择器</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-id">#il</span> &#123;</span><br><span class="line">	<span class="attribute">background-color</span>: red;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>3、</strong>类选择器</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.c1</span> &#123;</span><br><span class="line">	<span class="attribute">font-size</span>: <span class="number">14px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">p</span><span class="selector-class">.c1</span> &#123;</span><br><span class="line">	<span class="attribute">color</span>: red;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong><em>注意：</em></strong></p>
<p><em>样式类名不要用数字开头（有的浏览器不认）。</em></p>
<p><em>标签中的class属性如果有多个，要用空格分隔。</em></p>
<p><strong>4、</strong>通过选择器</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">* &#123;</span><br><span class="line">	<span class="attribute">color</span>: white;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="二、组合选择器"><a href="#二、组合选择器" class="headerlink" title="二、组合选择器"></a>二、组合选择器</h3><p><strong>1、</strong>后代选择器</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*li内部的a标签设置字体颜色*/</span></span><br><span class="line"><span class="selector-tag">li</span> <span class="selector-tag">a</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: green;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>2、</strong>儿子选择器</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*选择所有父级是 &lt;div&gt; 元素的 &lt;p&gt; 元素*/</span></span><br><span class="line"><span class="selector-tag">div</span>&gt;<span class="selector-tag">p</span> &#123;</span><br><span class="line">  <span class="attribute">font-family</span>: <span class="string">"Arial Black"</span>, arial-black, cursive;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>3、</strong>毗邻选择器</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*选择所有紧接着&lt;div&gt;元素之后的&lt;p&gt;元素*/</span></span><br><span class="line"><span class="selector-tag">div</span>+<span class="selector-tag">p</span> &#123;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">5px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>4、</strong>弟弟选择器</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*i1后面所有的兄弟p标签*/</span></span><br><span class="line"><span class="selector-id">#i1</span>~<span class="selector-tag">p</span> &#123;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">2px</span> solid royalblue;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="三、属性选择器"><a href="#三、属性选择器" class="headerlink" title="三、属性选择器"></a>三、属性选择器</h3><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*用于选取带有指定属性的元素。*/</span></span><br><span class="line"><span class="selector-tag">p</span><span class="selector-attr">[title]</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: red;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*用于选取带有指定属性和值的元素。*/</span></span><br><span class="line"><span class="selector-tag">p</span><span class="selector-attr">[title="213"]</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: green;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>不怎么常用的属性选择器：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*找到所有title属性以hello开头的元素*/</span></span><br><span class="line"><span class="selector-attr">[title^="hello"]</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: red;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*找到所有title属性以hello结尾的元素*/</span></span><br><span class="line"><span class="selector-attr">[title$="hello"]</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: yellow;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*找到所有title属性中包含（字符串包含）hello的元素*/</span></span><br><span class="line"><span class="selector-attr">[title*="hello"]</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: red;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*找到所有title属性(有多个值或值以空格分割)中有一个值为hello的元素：*/</span></span><br><span class="line"><span class="selector-attr">[title~="hello"]</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: green;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="四、分组和嵌套"><a href="#四、分组和嵌套" class="headerlink" title="四、分组和嵌套"></a>四、分组和嵌套</h3><h4 id="1、分组"><a href="#1、分组" class="headerlink" title="1、分组"></a>1、分组</h4><p>（1）当多个元素的样式相同的时候，我们没有必要重复地为每个元素都设置样式，我们可以通过在多个选择器之间使用逗号分隔的分组选择器来统一元素样式。</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">div</span>, <span class="selector-tag">p</span> &#123;</span><br><span class="line">	<span class="attribute">color</span>: red;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*div标签和p标签统一设置字体为红色*/</span></span><br></pre></td></tr></table></figure>

<p>（2）通常，我们会分两行来写，更清晰：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">div</span>,</span><br><span class="line"><span class="selector-tag">p</span> &#123;</span><br><span class="line">	<span class="attribute">color</span>: red;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="2、嵌套"><a href="#2、嵌套" class="headerlink" title="2、嵌套"></a>2、嵌套</h4><p>多种选择器可以混合起来使用：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.c1</span> <span class="selector-tag">p</span> &#123;</span><br><span class="line">	<span class="attribute">color</span>: red;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*.c1类内部所有p标签设置字体颜色为红色*/</span></span><br></pre></td></tr></table></figure>

<h3 id="五、伪类选择器"><a href="#五、伪类选择器" class="headerlink" title="五、伪类选择器"></a>五、伪类选择器</h3><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 未访问的链接 */</span></span><br><span class="line"><span class="selector-tag">a</span><span class="selector-pseudo">:link</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#FF0000</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 已访问的链接 */</span></span><br><span class="line"><span class="selector-tag">a</span><span class="selector-pseudo">:visited</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#00FF00</span></span><br><span class="line">&#125; </span><br><span class="line"></span><br><span class="line"><span class="comment">/* 鼠标移动到链接上 */</span></span><br><span class="line"><span class="selector-tag">a</span><span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#FF00FF</span></span><br><span class="line">&#125; </span><br><span class="line"></span><br><span class="line"><span class="comment">/* 选定的链接 */</span> </span><br><span class="line"><span class="selector-tag">a</span><span class="selector-pseudo">:active</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#0000FF</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*input输入框获取焦点时样式*/</span></span><br><span class="line"><span class="selector-tag">input</span><span class="selector-pseudo">:focus</span> &#123;</span><br><span class="line">  <span class="attribute">outline</span>: none;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#eee</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="六、伪元素选择器"><a href="#六、伪元素选择器" class="headerlink" title="六、伪元素选择器"></a>六、伪元素选择器</h3><h4 id="1、first-letter"><a href="#1、first-letter" class="headerlink" title="1、first-letter"></a>1、first-letter</h4><p>常用的给首字母设置特殊样式：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">p</span><span class="selector-pseudo">:first-letter</span> &#123;</span><br><span class="line">	<span class="attribute">font-size</span>: <span class="number">48px</span>;</span><br><span class="line">	<span class="attribute">color</span>: red;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="2、before"><a href="#2、before" class="headerlink" title="2、before"></a>2、before</h4><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">p</span><span class="selector-pseudo">:before</span> &#123;</span><br><span class="line">	<span class="attribute">content</span>: <span class="string">"*"</span>;</span><br><span class="line">	<span class="attribute">color</span>: red;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*在每个p元素之前插入内容*/</span></span><br></pre></td></tr></table></figure>

<h4 id="3、after"><a href="#3、after" class="headerlink" title="3、after"></a>3、after</h4><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">p</span><span class="selector-pseudo">:after</span> &#123;</span><br><span class="line">	<span class="attribute">content</span>: <span class="string">"[?]"</span>;</span><br><span class="line">	<span class="attribute">color</span>: blue;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*在每个p元素后插入内容*/</span></span><br></pre></td></tr></table></figure>

<p><strong>before和after多用于清除浮动</strong></p>
<h3 id="七、选择器的优先级"><a href="#七、选择器的优先级" class="headerlink" title="七、选择器的优先级"></a>七、选择器的优先级</h3><h4 id="1、CSS的继承"><a href="#1、CSS的继承" class="headerlink" title="1、CSS的继承"></a>1、CSS的继承</h4><p>（1）继承是CSS的一个主要特征，它是依赖于祖先-后代的关系的。继承是一种机制，它允许样式不仅可以应用于某个特定的元素，还可以应用于它的后代。</p>
<p>如：一个body定义了的字体颜色值也会应用到段落的文本中。</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">body</span> &#123;</span><br><span class="line">	<span class="attribute">color</span>: red;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>此时页面上所有标签都会继承body的字体颜色。然而CSS继承性的权重是非常低的，是比普通元素的权重还要低的0.</p>
<p>我们只要给对应的标签设置字体颜色就可以覆盖掉它继承的样式。</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">p</span> &#123;</span><br><span class="line">	<span class="attribute">color</span>: green;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>（2）CSS继承也是有限制的。有一些属性不能被继承，如：border、margin、padding、background等。</p>
<h4 id="2、选择器的优先级"><a href="#2、选择器的优先级" class="headerlink" title="2、选择器的优先级"></a>2、选择器的优先级</h4><p>其实，在使用多个选择器时，该用哪个样式是按照不同选择器的权重来决定的，具体的选择器权重计算方式如下图：</p>
<p><img src="https://images2018.cnblogs.com/blog/867021/201803/867021-20180305155201408-1680872107.png" alt></p>
<p>除此之外，还可以通过添加 !important 的方式来强制让样式生效，但并不推荐使用。若使用过多，会使样式文件混乱不易维护。</p>
<h2 id="（五）CSS属性相关"><a href="#（五）CSS属性相关" class="headerlink" title="（五）CSS属性相关"></a>（五）CSS属性相关</h2><h3 id="一、宽和高"><a href="#一、宽和高" class="headerlink" title="一、宽和高"></a>一、宽和高</h3><p>width属性可以为元素设置宽度。</p>
<p>height属性可以为元素设置高度。</p>
<p>块级标签才能设置宽度，内联标签的宽度由内容来决定。</p>
<h3 id="二、字体属性"><a href="#二、字体属性" class="headerlink" title="二、字体属性"></a>二、字体属性</h3><h4 id="1、文字字体"><a href="#1、文字字体" class="headerlink" title="1、文字字体"></a>1、文字字体</h4><p>font-family可以把多个字体名称作为一个”回退”系统来保存。如果浏览器不支持第一个字体，则会尝试下一个。浏览器会使用它可识别的第一个值。</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">body</span> &#123;</span><br><span class="line">	<span class="attribute">font-family</span>: <span class="string">"Microsoft Yahei"</span>, <span class="string">"微软雅黑"</span>, <span class="string">"Arial"</span>, sans-serif</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="2、字体大小"><a href="#2、字体大小" class="headerlink" title="2、字体大小"></a>2、字体大小</h4><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">p</span> &#123;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">14px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>如果设置为inherit表示继承父元素的字体大小值。</p>
<h4 id="3、字重（粗细）"><a href="#3、字重（粗细）" class="headerlink" title="3、字重（粗细）"></a>3、字重（粗细）</h4><p>font-weight用来设置字体的字重（粗细）。</p>
<table>
<thead>
<tr>
<th align="center">值</th>
<th align="center">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="center">normal</td>
<td align="center">默认值，标准粗细</td>
</tr>
<tr>
<td align="center">bold</td>
<td align="center">粗体</td>
</tr>
<tr>
<td align="center">bolder</td>
<td align="center">更粗</td>
</tr>
<tr>
<td align="center">lighter</td>
<td align="center">更细</td>
</tr>
<tr>
<td align="center">100～900</td>
<td align="center">设置具体粗细，400等同于normal，而700等同于bold</td>
</tr>
<tr>
<td align="center">inherit</td>
<td align="center">继承父元素字体的粗细值</td>
</tr>
</tbody></table>
<h4 id="4、文本颜色"><a href="#4、文本颜色" class="headerlink" title="4、文本颜色"></a>4、文本颜色</h4><p>颜色属性被用来设置文字的颜色。</p>
<p>颜色是通过CSS最经常的指定：</p>
<ul>
<li>十六进制值：#FF0000</li>
<li>一个RGB值：RGB(255, 0, 0)</li>
<li>颜色的名称：red</li>
</ul>
<p>还有rgba(255, 0, 0, 3)，第四个值为alpha，指定了色彩的透明度/不透明度，它的范围为0.0到1.0之间。</p>
<h3 id="三、文字属性"><a href="#三、文字属性" class="headerlink" title="三、文字属性"></a>三、文字属性</h3><h4 id="1、文字对齐"><a href="#1、文字对齐" class="headerlink" title="1、文字对齐"></a>1、文字对齐</h4><p>text-align属性规定元素中的文本的水平对齐方式</p>
<table>
<thead>
<tr>
<th align="center">值</th>
<th align="center">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="center">left</td>
<td align="center">左边对齐 默认值</td>
</tr>
<tr>
<td align="center">right</td>
<td align="center">右对齐</td>
</tr>
<tr>
<td align="center">center</td>
<td align="center">居中对齐</td>
</tr>
<tr>
<td align="center">justify</td>
<td align="center">两端对齐</td>
</tr>
</tbody></table>
<h4 id="2、文字装饰"><a href="#2、文字装饰" class="headerlink" title="2、文字装饰"></a>2、文字装饰</h4><p>text-decoration 属性用来给文字添加特殊效果。</p>
<table>
<thead>
<tr>
<th align="center">值</th>
<th align="center">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="center">none</td>
<td align="center">默认（定义标准的文本）</td>
</tr>
<tr>
<td align="center">underline</td>
<td align="center">定义文本下的一条线</td>
</tr>
<tr>
<td align="center">overline</td>
<td align="center">定义文本上的一条线</td>
</tr>
<tr>
<td align="center">line-through</td>
<td align="center">定义穿过文本下的一条线</td>
</tr>
<tr>
<td align="center">inherit</td>
<td align="center">继承父元素的text-decoration属性的值</td>
</tr>
</tbody></table>
<p>常用的为去掉a标签默认的自划线：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">a</span> &#123;</span><br><span class="line">	<span class="attribute">text-decoration</span>: none;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="3、首行缩进"><a href="#3、首行缩进" class="headerlink" title="3、首行缩进"></a>3、首行缩进</h4><p>将段落的第一行缩进32像素（该数值为字体像素的2倍，即空两格）：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">p</span> &#123;</span><br><span class="line">	<span class="attribute">text-indent</span>: <span class="number">32px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="四、背景属性"><a href="#四、背景属性" class="headerlink" title="四、背景属性"></a>四、背景属性</h3><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*背景颜色*/</span></span><br><span class="line"><span class="selector-tag">background-color</span>: <span class="selector-tag">red</span>;</span><br><span class="line"><span class="comment">/*背景图片*/</span></span><br><span class="line">background-image: url('1.jpg');</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> 背景重复</span></span><br><span class="line"><span class="comment"> repeat(默认):背景图片平铺排满整个网页</span></span><br><span class="line"><span class="comment"> repeat-x：背景图片只在水平方向上平铺</span></span><br><span class="line"><span class="comment"> repeat-y：背景图片只在垂直方向上平铺</span></span><br><span class="line"><span class="comment"> no-repeat：背景图片不平铺</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="selector-tag">background-repeat</span>: <span class="selector-tag">no-repeat</span>; </span><br><span class="line"><span class="comment">/*背景位置*/</span></span><br><span class="line"><span class="selector-tag">background-position</span>: <span class="selector-tag">right</span> <span class="selector-tag">top</span>;</span><br><span class="line"><span class="comment">/*background-position: 200px 200px;*/</span></span><br></pre></td></tr></table></figure>

<p>支持简写：</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">background: #ffffff url('1.jpg') no-repeat right top;</span><br></pre></td></tr></table></figure>

<p>使用背景图片的一个常见案例就是很多网站会把很多小图标放在一张图片上，然后根据位置去显示图片。减少频繁的图片请求。</p>
<p>一个有趣的例子：（鼠标滚动背景不动）</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1.0"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"X-UA-Compatible"</span> <span class="attr">content</span>=<span class="string">"ie=edge"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>滚动背景图示例<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line">        * &#123;</span><br><span class="line">            margin: 0;</span><br><span class="line">        &#125;</span><br><span class="line"><span class="css">        <span class="selector-class">.box</span> &#123;</span></span><br><span class="line">            width: 100%;</span><br><span class="line">            height: 500px;</span><br><span class="line">            background: url("https://www.luffycity.com/static/img/width-bank.1c9d1b0.png") no-repeat center center;</span><br><span class="line">            background-attachment: fixed;</span><br><span class="line">        &#125;</span><br><span class="line"><span class="css">        <span class="selector-class">.d1</span> &#123;</span></span><br><span class="line">            height: 500px;</span><br><span class="line">            background-color: tomato;</span><br><span class="line">        &#125;</span><br><span class="line"><span class="css">        <span class="selector-class">.d2</span> &#123;</span></span><br><span class="line">            height: 500px;</span><br><span class="line">            background-color: steelblue;</span><br><span class="line">        &#125;</span><br><span class="line"><span class="css">        <span class="selector-class">.d3</span> &#123;</span></span><br><span class="line">            height: 500px;</span><br><span class="line">            background-color: mediumorchid;</span><br><span class="line">        &#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"d1"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"box"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"d2"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"d3"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="五、边框"><a href="#五、边框" class="headerlink" title="五、边框"></a>五、边框</h3><h4 id="1、边框属性"><a href="#1、边框属性" class="headerlink" title="1、边框属性"></a>1、边框属性</h4><ul>
<li>border-width</li>
<li>border-style</li>
<li>border-color</li>
</ul>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-id">#i1</span> &#123;</span><br><span class="line">	<span class="attribute">border-width</span>: <span class="number">2px</span>;</span><br><span class="line">	<span class="attribute">border-style</span>: solid;</span><br><span class="line">	<span class="attribute">border-color</span>: red;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>通常使用简写方式：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-id">#i1</span> &#123;</span><br><span class="line">	<span class="attribute">border</span>: <span class="number">2px</span> solid red;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="2、边框样式"><a href="#2、边框样式" class="headerlink" title="2、边框样式"></a>2、边框样式</h4><table>
<thead>
<tr>
<th align="center">值</th>
<th align="center">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="center">none</td>
<td align="center">无边框</td>
</tr>
<tr>
<td align="center">dotted</td>
<td align="center">点状虚线边框</td>
</tr>
<tr>
<td align="center">dashed</td>
<td align="center">矩形虚线边框</td>
</tr>
<tr>
<td align="center">solid</td>
<td align="center">实线边框</td>
</tr>
</tbody></table>
<p>除了可以统一设置边框外还可以单独为某一个边框设置样式：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-id">#i1</span> &#123;</span><br><span class="line">	<span class="attribute">border-top-style</span>: dotted;</span><br><span class="line">	<span class="attribute">border-top-color</span>: red;</span><br><span class="line">	<span class="attribute">border-right-style</span>: solid;</span><br><span class="line">	<span class="attribute">border-bottom-style</span>: dotted;</span><br><span class="line">	<span class="attribute">border-left-style</span>: none;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="六、border-radius"><a href="#六、border-radius" class="headerlink" title="六、border-radius"></a>六、border-radius</h3><p>用这个属性能实现圆角边框的效果。</p>
<p>将border-radius设置为长或高的一半即可得到一个圆形。</p>
<h3 id="七、display属性"><a href="#七、display属性" class="headerlink" title="七、display属性"></a>七、display属性</h3><p>用于控制HTML元素的显示效果。</p>
<table>
<thead>
<tr>
<th align="center">值</th>
<th align="center">意义</th>
</tr>
</thead>
<tbody><tr>
<td align="center">none</td>
<td align="center">HTML文档元素存在，但是在浏览器中不显示。一般用于配合JavaScript代码使用。</td>
</tr>
<tr>
<td align="center">block</td>
<td align="center">默认占满整个页面宽度，如果设置了指定宽度，则会用margin填充剩下的部分。</td>
</tr>
<tr>
<td align="center">inline</td>
<td align="center">按行内元素显示，此时再设置元素的width、height、margin-top、margin-bottom和float属性都不会有什么影响</td>
</tr>
<tr>
<td align="center">inline-block</td>
<td align="center">使元素同时具有行内元素和块级元素的特点。</td>
</tr>
</tbody></table>
<p>display: “none”与visibility: hidden的区别：</p>
<ul>
<li>visibility: hidden：可以隐藏某个元素，但隐藏的元素仍需占用与未隐藏之前一样的空间。也就是说，该元素虽然被隐藏了，但仍然会影响布局。</li>
<li>display: “none”：可以隐藏某个元素，且隐藏的元素不会占用任何空间。也就是说，该元素不但被隐藏了，而且该元素原本占用的空间也会从页面布局中消失。</li>
</ul>
<h3 id="八、CSS盒子模型"><a href="#八、CSS盒子模型" class="headerlink" title="八、CSS盒子模型"></a>八、CSS盒子模型</h3><ul>
<li><strong>margin</strong>：用于控制元素与元素之间的距离；margin的最基本用途就是控制元素周围空间的间隔，从视觉角度上达到相互隔开的目的；</li>
<li><strong>padding</strong>：用于控制内容与边框之间的距离；</li>
<li><strong>border</strong>：围绕在内边距和内容外的边框；</li>
<li><strong>content</strong>：盒子的内容，显示文本和图像。</li>
</ul>
<p><img src="https://images2018.cnblogs.com/blog/867021/201803/867021-20180305155247808-885981996.png" alt></p>
<h3 id="九、margin外边距"><a href="#九、margin外边距" class="headerlink" title="九、margin外边距"></a>九、margin外边距</h3><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.margin-test</span> &#123;</span><br><span class="line">  <span class="attribute">margin-top</span>:<span class="number">5px</span>;</span><br><span class="line">  <span class="attribute">margin-right</span>:<span class="number">10px</span>;</span><br><span class="line">  <span class="attribute">margin-bottom</span>:<span class="number">15px</span>;</span><br><span class="line">  <span class="attribute">margin-left</span>:<span class="number">20px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>推荐使用简写：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.margin-test</span> &#123;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">5px</span> <span class="number">10px</span> <span class="number">15px</span> <span class="number">20px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*顺序：上右下左*/</span></span><br></pre></td></tr></table></figure>

<p>常见居中：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.mycenter</span> &#123;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">0</span> auto;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="十、padding内填充"><a href="#十、padding内填充" class="headerlink" title="十、padding内填充"></a>十、padding内填充</h3><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.padding-test</span> &#123;</span><br><span class="line">  <span class="attribute">padding-top</span>: <span class="number">5px</span>;</span><br><span class="line">  <span class="attribute">padding-right</span>: <span class="number">10px</span>;</span><br><span class="line">  <span class="attribute">padding-bottom</span>: <span class="number">15px</span>;</span><br><span class="line">  <span class="attribute">padding-left</span>: <span class="number">20px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>推荐使用简写：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.padding-test</span> &#123;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">5px</span> <span class="number">10px</span> <span class="number">15px</span> <span class="number">20px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*顺序：上右下左*/</span></span><br></pre></td></tr></table></figure>

<p>padding的常用简写方式：</p>
<ul>
<li>提供一个参数：用于四边</li>
<li>提供两个参数：第一个为上下，第二个为左右</li>
<li>提供三个参数：第一个为上，第二个左右，第三个为下</li>
<li>提供四个参数：上右下左</li>
</ul>
<h3 id="十一、float"><a href="#十一、float" class="headerlink" title="十一、float"></a>十一、float</h3><p>在 CSS 中，任何元素都可以浮动。</p>
<p>浮动元素会生成一个块级框，而不论它本身是何种元素。</p>
<p>关于浮动的两个特点：</p>
<ul>
<li>浮动的框可以向左或向右移动，直到它的外边缘碰到包含框或另一个浮动框的边框为止。</li>
<li>由于浮动框不在文档的普通流中，所以文档的普通流中的块框表现得就像浮动框不存在一样。</li>
</ul>
<p><strong>三种取值：</strong></p>
<ul>
<li>left：向左浮动</li>
<li>right：向右浮动</li>
<li>none：默认值，不浮动</li>
</ul>
<h3 id="十二、clear"><a href="#十二、clear" class="headerlink" title="十二、clear"></a>十二、clear</h3><p>clear属性规定元素的哪一侧不允许其他浮动元素。</p>
<table>
<thead>
<tr>
<th align="center">值</th>
<th align="center">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="center">left</td>
<td align="center">在左侧不允许浮动元素</td>
</tr>
<tr>
<td align="center">right</td>
<td align="center">在右侧不允许浮动元素</td>
</tr>
<tr>
<td align="center">both</td>
<td align="center">在左右两侧均不允许浮动元素</td>
</tr>
<tr>
<td align="center">none</td>
<td align="center">默认值。允许浮动元素出现在两侧</td>
</tr>
<tr>
<td align="center">nherit</td>
<td align="center">规定应该从父元素继承 clear 属性的值。</td>
</tr>
</tbody></table>
<p><strong><em>注意：</em></strong>clear属性只会对自身起作用，而不会影响到其他元素。</p>
<h4 id="1、清除浮动"><a href="#1、清除浮动" class="headerlink" title="1、清除浮动"></a>1、清除浮动</h4><p>清除浮动的副作用（父标签塌陷问题）</p>
<p>主要有三种方式：</p>
<ul>
<li>固定高度</li>
<li>伪元素清除法</li>
<li>overflow:hidden</li>
</ul>
<p>伪元素清除法（使用较多）：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.clearfix</span><span class="selector-pseudo">:after</span> &#123;</span><br><span class="line">  <span class="attribute">content</span>: <span class="string">""</span>;</span><br><span class="line">  <span class="attribute">display</span>: block;</span><br><span class="line">  <span class="attribute">clear</span>: both;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="十三、overflow溢出属性"><a href="#十三、overflow溢出属性" class="headerlink" title="十三、overflow溢出属性"></a>十三、overflow溢出属性</h3><table>
<thead>
<tr>
<th align="center">值</th>
<th align="center">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="center">visible</td>
<td align="center">默认值。内容不会被修剪，会呈现在元素框之外</td>
</tr>
<tr>
<td align="center">hidden</td>
<td align="center">内容会被修剪，并且其余内容是不可见的</td>
</tr>
<tr>
<td align="center">scroll</td>
<td align="center">内容会被修剪，但是浏览器会显示滚动条以便查看其余的内容</td>
</tr>
<tr>
<td align="center">auto</td>
<td align="center">如果内容被修剪，则浏览器会显示滚动条以便查看其余的内容</td>
</tr>
<tr>
<td align="center">inherit</td>
<td align="center">规定应该从父元素继承 overflow 属性的值</td>
</tr>
</tbody></table>
<ul>
<li>overflow（水平和垂直均设置）</li>
<li>overflow-x（设置水平方向）</li>
<li>overflow-y（设置垂直方向）</li>
</ul>
<h4 id="1、圆形头像示例"><a href="#1、圆形头像示例" class="headerlink" title="1、圆形头像示例"></a>1、圆形头像示例</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE HTML&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"x-ua-compatible"</span> <span class="attr">content</span>=<span class="string">"IE=edge"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">title</span>&gt;</span>圆形的头像示例<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line">    * &#123;</span><br><span class="line">      margin: 0;</span><br><span class="line">      padding: 0;</span><br><span class="line"><span class="css">      <span class="selector-tag">background-color</span>: <span class="selector-id">#eeeeee</span>;</span></span><br><span class="line">    &#125;</span><br><span class="line"><span class="css">    <span class="selector-class">.header-img</span> &#123;</span></span><br><span class="line">      width: 150px;</span><br><span class="line">      height: 150px;</span><br><span class="line">      border: 3px solid white;</span><br><span class="line">      border-radius: 50%;</span><br><span class="line">      overflow: hidden;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="css">    <span class="selector-class">.header-img</span>&gt;<span class="selector-tag">img</span> &#123;</span></span><br><span class="line">      max-width: 100%;</span><br><span class="line">    &#125;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"header-img"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"https://q1mi.github.io/Blog/asset/img/head_img.jpg"</span> <span class="attr">alt</span>=<span class="string">""</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="十四、定位（position）"><a href="#十四、定位（position）" class="headerlink" title="十四、定位（position）"></a>十四、定位（position）</h3><h4 id="1、static"><a href="#1、static" class="headerlink" title="1、static"></a>1、static</h4><p> static 默认值，无定位，不能当作绝对定位的参照物，并且设置标签对象的left、top等值是不起作用的的。</p>
<h4 id="2、relative（相对定位）"><a href="#2、relative（相对定位）" class="headerlink" title="2、relative（相对定位）"></a>2、relative（相对定位）</h4><p>​        相对定位是相对于该元素在文档流中的原始位置，即以自己原始位置为参照物。有趣的是，即使设定了元素的相对定位以及偏移值，元素还占有着原来的位置，即占据文档流空间。对象遵循正常文档流，但将依据top，right，bottom，left等属性在正常文档流中偏移位置。而其层叠通过z-index属性定义。</p>
<p><strong><em>注意：</em></strong></p>
<p>position：relative的一个主要用法：方便绝对定位元素找到参照物。</p>
<p>####3、absolute（绝对定位）</p>
<p><strong>定义：</strong>设置为绝对定位的元素框从文档流完全删除，并相对于最近的已定位祖先元素定位，如果元素没有已定位的祖先元素，那么它的位置相对于最初的包含块（即body元素）。元素原先在正常文档流中所占的空间会关闭，就好像该元素原来不存在一样。元素定位后生成一个块级框，而不论原来它在正常流中生成何种类型的框。</p>
<p><strong>重点：</strong>如果父级设置了position属性，例如position:relative;，那么子元素就会以父级的左上角为原始点进行定位。这样能很好的解决自适应网站的标签偏离问题，即父级为自适应的，那我子元素就设置position:absolute;父元素设置position:relative;，然后Top、Right、Bottom、Left用百分比宽度表示。</p>
<p>另外，对象脱离正常文档流，使用top，right，bottom，left等属性进行绝对定位。而其层叠通过z-index属性定义。</p>
<h4 id="4、fixed（固定）"><a href="#4、fixed（固定）" class="headerlink" title="4、fixed（固定）"></a>4、fixed（固定）</h4><p><strong>fixed：</strong>对象脱离正常文档流，使用top，right，bottom，left等属性以窗口为参考点进行定位，当出现滚动条时，对象不会随着滚动。而其层叠通过z-index属性 定义。 注意点： 一个元素若设置了 position:absolute | fixed; 则该元素就不能设置float。这 是一个常识性的知识点，因为这是两个不同的流，一个是浮动流，另一个是“定位流”。但是 relative 却可以。因为它原本所占的空间仍然占据文档流。</p>
<p>​        在理论上，被设置为fixed的元素会被定位于浏览器窗口的一个指定坐标，不论窗口是否滚动，它都会固定在这个位置。</p>
<p>示例代码（返回顶部示例）：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"x-ua-compatible"</span> <span class="attr">content</span>=<span class="string">"IE=edge"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">title</span>&gt;</span>返回顶部示例<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line">    * &#123;</span><br><span class="line">      margin: 0;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">    <span class="selector-class">.d1</span> &#123;</span></span><br><span class="line">      height: 1000px;</span><br><span class="line"><span class="css">      <span class="selector-tag">background-color</span>: <span class="selector-id">#eeee</span>;</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">    <span class="selector-class">.scrollTop</span> &#123;</span></span><br><span class="line">      background-color: darkgrey;</span><br><span class="line">      padding: 10px;</span><br><span class="line">      text-align: center;</span><br><span class="line">      position: fixed;</span><br><span class="line">      right: 10px;</span><br><span class="line">      bottom: 20px;</span><br><span class="line">    &#125;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"d1"</span>&gt;</span>111<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"scrollTop"</span>&gt;</span>返回顶部<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="十五、z-index"><a href="#十五、z-index" class="headerlink" title="十五、z-index"></a>十五、z-index</h3><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-id">#i2</span> &#123;</span><br><span class="line">  <span class="attribute">z-index</span>: <span class="number">999</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>设置对象的层叠顺序。</p>
<ol>
<li>z-index 值表示谁压着谁，数值大的压盖住数值小的，</li>
<li>只有定位了的元素，才能有z-index,也就是说，不管相对定位，绝对定位，固定定位，都可以使用z-index，而浮动元素不能使用z-index</li>
<li>z-index值没有单位，就是一个正整数，默认的z-index值为0如果大家都没有z-index值，或者z-index值一样，那么谁写在HTML后面，谁在上面压着别人，定位了元素，永远压住没有定位的元素。</li>
<li>从父现象：父亲怂了，儿子再牛逼也没用</li>
</ol>
<p>自定义模态框示例：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"x-ua-compatible"</span> <span class="attr">content</span>=<span class="string">"IE=edge"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">title</span>&gt;</span>自定义模态框<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="css">    <span class="selector-class">.cover</span> &#123;</span></span><br><span class="line"><span class="css">      <span class="selector-tag">background-color</span>: <span class="selector-tag">rgba</span>(0,0,0,0<span class="selector-class">.65</span>);</span></span><br><span class="line">      position: fixed;</span><br><span class="line">      top: 0;</span><br><span class="line">      right: 0;</span><br><span class="line">      bottom: 0;</span><br><span class="line">      left: 0;</span><br><span class="line">      z-index: 998;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">    <span class="selector-class">.modal</span> &#123;</span></span><br><span class="line">      background-color: white;</span><br><span class="line">      position: fixed;</span><br><span class="line">      width: 600px;</span><br><span class="line">      height: 400px;</span><br><span class="line">      left: 50%;</span><br><span class="line">      top: 50%;</span><br><span class="line">      margin: -200px 0 0 -300px;</span><br><span class="line">      z-index: 1000;</span><br><span class="line">    &#125;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"cover"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"modal"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="十五、opacity"><a href="#十五、opacity" class="headerlink" title="十五、opacity"></a>十五、opacity</h3><p>用来定义透明效果。取值范围是0~1，0是完全透明，1是完全不透明。</p>
<h2 id="（六）综合示例"><a href="#（六）综合示例" class="headerlink" title="（六）综合示例"></a>（六）综合示例</h2><h3 id="顶部导航菜单"><a href="#顶部导航菜单" class="headerlink" title="顶部导航菜单"></a>顶部导航菜单</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE HTML&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"x-ua-compatible"</span> <span class="attr">content</span>=<span class="string">"IE=edge"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">title</span>&gt;</span>li标签的float示例<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="css">    <span class="comment">/*清除浏览器默认外边距和内填充*/</span></span></span><br><span class="line">    * &#123;</span><br><span class="line">      margin: 0;</span><br><span class="line">      padding: 0;</span><br><span class="line">    &#125;</span><br><span class="line">    a &#123;</span><br><span class="line"><span class="css">      <span class="selector-tag">text-decoration</span>: <span class="selector-tag">none</span>; <span class="comment">/*去除a标签默认的下划线*/</span></span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">    <span class="selector-class">.nav</span> &#123;</span></span><br><span class="line">      background-color: black;</span><br><span class="line">      height: 40px;</span><br><span class="line">      width: 100%;</span><br><span class="line">      position: fixed;</span><br><span class="line">      top: 0;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    ul &#123;</span><br><span class="line"><span class="css">      <span class="selector-tag">list-style-type</span>: <span class="selector-tag">none</span>; <span class="comment">/*删除列表默认的圆点样式*/</span></span></span><br><span class="line"><span class="css">      <span class="selector-tag">margin</span>: 0; <span class="comment">/*删除列表默认的外边距*/</span></span></span><br><span class="line"><span class="css">      <span class="selector-tag">padding</span>: 0; <span class="comment">/*删除列表默认的内填充*/</span></span></span><br><span class="line">    &#125;</span><br><span class="line"><span class="css">    <span class="comment">/*li元素向左浮动*/</span></span></span><br><span class="line">    li &#123;</span><br><span class="line">      float: left;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    li &gt; a &#123;</span><br><span class="line"><span class="css">      <span class="selector-tag">display</span>: <span class="selector-tag">block</span>; <span class="comment">/*让链接显示为块级标签*/</span></span></span><br><span class="line"><span class="css">      <span class="selector-tag">padding</span>: 0 15<span class="selector-tag">px</span>; <span class="comment">/*设置左右各15像素的填充*/</span></span></span><br><span class="line"><span class="css">      <span class="selector-tag">color</span>: <span class="selector-id">#b0b0b0</span>; <span class="comment">/*设置字体颜色*/</span></span></span><br><span class="line"><span class="css">      <span class="selector-tag">line-height</span>: 40<span class="selector-tag">px</span>; <span class="comment">/*设置行高*/</span></span></span><br><span class="line">    &#125;</span><br><span class="line"><span class="css">    <span class="comment">/*鼠标移上去颜色变白*/</span></span></span><br><span class="line"><span class="css">    <span class="selector-tag">li</span> &gt; <span class="selector-tag">a</span><span class="selector-pseudo">:hover</span> &#123;</span></span><br><span class="line"><span class="css">      <span class="selector-tag">color</span>: <span class="selector-id">#fff</span>;</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">    <span class="comment">/*清除浮动 解决父级塌陷问题*/</span></span></span><br><span class="line"><span class="css">    <span class="selector-class">.clearfix</span><span class="selector-pseudo">:after</span> &#123;</span></span><br><span class="line">      content: "";</span><br><span class="line">      display: block;</span><br><span class="line">      clear: both;</span><br><span class="line">    &#125;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 顶部导航栏 开始 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"nav"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">ul</span> <span class="attr">class</span>=<span class="string">"clearfix"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">""</span>&gt;</span>玉米商城<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">""</span>&gt;</span>MIUI<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">""</span>&gt;</span>ioT<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">""</span>&gt;</span>云服务<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">""</span>&gt;</span>水滴<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">""</span>&gt;</span>金融<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">""</span>&gt;</span>优品<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 顶部导航栏 结束 --&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>


          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/8/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/8/">8</a><span class="page-number current">9</span><a class="page-number" href="/page/10/">10</a><a class="extend next" rel="next" href="/page/10/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image" src="/images/avatar.jpg" alt="John Doe">
            
              <p class="site-author-name" itemprop="name">John Doe</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">92</span>
                  <span class="site-state-item-name">posts</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">17</span>
                  <span class="site-state-item-name">categories</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">19</span>
                  <span class="site-state-item-name">tags</span>
                </a>
              </div>
            

          </nav>

          

          
            <div class="links-of-author motion-element">
                
                  <span class="links-of-author-item">
                    <a href="https://suliangxu.github.io" target="_blank" title="GitHub">
                      
                        <i class="fa fa-fw fa-github"></i>GitHub</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="mailto:1193135584@qq.com" target="_blank" title="E-Mail">
                      
                        <i class="fa fa-fw fa-envelope"></i>E-Mail</a>
                  </span>
                
            </div>
          

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">John Doe</span>

  
</div>


  <div class="powered-by">Powered by <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a></div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">Theme &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Pisces</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  


  



  
  









  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  

  
  
    <script type="text/javascript" src="/lib/canvas-nest/canvas-nest.min.js"></script>
  

  
  
    <script type="text/javascript" src="/lib/three/three.min.js"></script>
  

  
  
    <script type="text/javascript" src="/lib/three/three-waves.min.js"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script>



  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  
  
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        tex2jax: {
          inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
          processEscapes: true,
          skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
        }
      });
    </script>

    <script type="text/x-mathjax-config">
      MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for (i=0; i < all.length; i += 1) {
          all[i].SourceElement().parentNode.className += ' has-jax';
        }
      });
    </script>
    <script type="text/javascript" src="//cdn.bootcss.com/mathjax/2.7.1/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
  


  

  

</body>
</html>
